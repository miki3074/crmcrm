import{r as u,q as ge,I as Ft,o as l,f as o,b as t,F as y,x as k,t as i,g as p,j as w,v as A,i as b,n as B,s as q,k as pe,d as h,Q as Rt,m as I,A as qt,a as ne,w as Bt,y as Ot,e as ot}from"./app-7fb329a1.js";import{_ as Nt}from"./AuthenticatedLayout-ec93dfd8.js";import{_ as Wt}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-8a711471.js";const Ht={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5 mt-8"},Lt={class:"space-y-3 max-h-80 overflow-y-auto pr-1"},Pt={class:"flex-1"},Qt={class:"flex items-center gap-2"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white"},Jt={class:"text-xs text-gray-500"},Kt=["onClick"],Xt={class:"mt-1 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},Yt={key:0,class:"text-sm text-gray-500"},Zt={key:0,class:"mt-4"},es={class:"mt-2 flex justify-end"},ts=["disabled"],ss={key:1,class:"mt-3 text-xs text-gray-500"},as={__name:"TaskChat",props:{taskId:{type:Number,required:!0},canChat:{type:Boolean,default:!0}},setup(S){const $=S,m=u([]),g=u("");let C=null;const a=async()=>{const{data:_}=await b.get(`/api/tasks/${$.taskId}/comments`,{withCredentials:!0});m.value=_},f=async()=>{g.value.trim()&&(await b.get("/sanctum/csrf-cookie"),await b.post(`/api/tasks/${$.taskId}/comments`,{body:g.value},{withCredentials:!0}),g.value="",await a())},D=async _=>{await b.delete(`/api/task-comments/${_}`),await a()};return ge(async()=>{await a(),C=setInterval(a,1e4)}),Ft(()=>{C&&clearInterval(C)}),(_,F)=>(l(),o("div",Ht,[F[1]||(F[1]=t("div",{class:"mb-4 flex items-center justify-between"},[t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")],-1)),t("div",Lt,[(l(!0),o(y,null,k(m.value,x=>{var v;return l(),o("div",{key:x.id,class:"flex gap-3"},[t("div",Pt,[t("div",Qt,[t("div",Gt,i(((v=x.user)==null?void 0:v.name)??"‚Äî"),1),t("div",Jt,i(new Date(x.created_at).toLocaleString()),1),_.$page.props.auth.user&&x.user&&x.user.id===_.$page.props.auth.user.id?(l(),o("button",{key:0,class:"ml-auto text-xs text-red-600 hover:underline",onClick:n=>D(x.id)},"–£–¥–∞–ª–∏—Ç—å",8,Kt)):p("",!0)]),t("div",Xt,i(x.body),1)])])}),128)),m.value.length?p("",!0):(l(),o("div",Yt,"–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π."))]),S.canChat?(l(),o("div",Zt,[w(t("textarea",{"onUpdate:modelValue":F[0]||(F[0]=x=>g.value=x),rows:"2",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶",class:"w-full rounded-lg border bg-white/80 dark:bg-gray-700 px-3 py-2 text-sm dark:text-white"},null,512),[[A,g.value]]),t("div",es,[t("button",{onClick:f,disabled:!g.value.trim(),class:"px-4 py-2 rounded-lg bg-indigo-600 text-white disabled:opacity-40"},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,ts)])])):(l(),o("div",ss," –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —á–∞—Ç–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. "))]))}},ls={class:"mt-6"},os={key:0,class:"space-y-2"},rs=["checked","onChange"],ds={key:0,class:"text-sm text-gray-500"},is={key:1,class:"text-gray-500"},ns={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},us={class:"bg-white rounded p-6 w-96"},vs={key:0,class:"text-sm text-rose-600 mb-2"},ps=["value"],gs=["value"],cs=["value"],bs={class:"flex items-center gap-2 mb-2"},xs={class:"flex justify-end gap-2"},ms={__name:"TaskChecklists",props:{taskId:{type:Number,required:!0},executors:{type:Array,default:()=>[]},responsibles:{type:Array,default:()=>[]},creator:{type:Object,default:()=>null}},setup(S){const $=u(""),m=S,g=u([]),C=u(!1),a=u(!1),f=u({title:"",assigned_to:[],important:!1,files:[]}),D=async()=>{C.value=!0;try{const{data:x}=await b.get(`/api/tasks/${m.taskId}/checklists`);g.value=x}finally{C.value=!1}},_=async()=>{var v,n;$.value="";const x=new FormData;x.append("title",f.value.title),f.value.assigned_to&&x.append("assigned_to",f.value.assigned_to),x.append("important",f.value.important?1:0);for(let T of f.value.files)x.append("files[]",T);try{await b.post(`/api/tasks/${m.taskId}/checklists`,x,{headers:{"Content-Type":"multipart/form-data"}}),a.value=!1,f.value={title:"",assigned_to:"",important:!1,files:[]},await D()}catch(T){if(((v=T.response)==null?void 0:v.status)===422){const V=T.response.data;$.value=V.message||((n=Object.values(V.errors||{})[0])==null?void 0:n[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–Ω–∫—Ç–∞ —á–µ–∫-–ª–∏—Å—Ç–∞."}else $.value="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞."}},F=async x=>{await b.patch(`/api/checklists/${x.id}/toggle`),await D()};return ge(D),(x,v)=>(l(),o("div",ls,[v[10]||(v[10]=t("h3",{class:"text-lg font-semibold mb-2"},"–ß–µ–∫-–ª–∏—Å—Ç—ã",-1)),g.value.length?(l(),o("ul",os,[(l(!0),o(y,null,k(g.value,n=>(l(),o("li",{key:n.id,class:"flex items-center gap-2"},[t("input",{type:"checkbox",checked:n.completed,onChange:T=>F(n)},null,40,rs),t("span",{class:B({"font-bold text-red-600":n.important})},i(n.title),3),n.assignee?(l(),o("span",ds,"("+i(n.assignee.name)+")",1)):p("",!0)]))),128))])):(l(),o("p",is,"–ù–µ—Ç —á–µ–∫-–ª–∏—Å—Ç–æ–≤")),t("button",{class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded",onClick:v[0]||(v[0]=n=>a.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç "),a.value?(l(),o("div",ns,[t("div",us,[v[8]||(v[8]=t("h4",{class:"text-lg font-semibold mb-2"},"–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞",-1)),$.value?(l(),o("p",vs,i($.value),1)):p("",!0),w(t("input",{required:"","onUpdate:modelValue":v[1]||(v[1]=n=>f.value.title=n),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"w-full border mb-2 p-2"},null,512),[[A,f.value.title]]),v[9]||(v[9]=t("label",{class:"block text-sm"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":v[2]||(v[2]=n=>f.value.assigned_to=n),class:"w-full border mb-2 p-2"},[v[6]||(v[6]=t("option",{value:""},"‚Äî",-1)),(l(!0),o(y,null,k(S.executors,n=>(l(),o("option",{key:"exec-"+n.id,value:n.id},i(n.name),9,ps))),128)),(l(!0),o(y,null,k(S.responsibles,n=>(l(),o("option",{key:"resp-"+n.id,value:n.id},i(n.name),9,gs))),128)),S.creator?(l(),o("option",{key:0,value:S.creator.id},i(S.creator.name),9,cs)):p("",!0)],512),[[q,f.value.assigned_to]]),t("label",bs,[w(t("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=n=>f.value.important=n)},null,512),[[pe,f.value.important]]),v[7]||(v[7]=h(" –í–∞–∂–Ω–æ ",-1))]),t("input",{type:"file",multiple:"",onChange:v[4]||(v[4]=n=>f.value.files=Array.from(n.target.files)),class:"mb-4"},null,32),t("div",xs,[t("button",{onClick:v[5]||(v[5]=n=>a.value=!1),class:"px-3 py-1 border"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:_,class:"px-3 py-1 bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):p("",!0)]))}};const ys={class:"relative overflow-hidden rounded-b-3xl shadow-lg"},ks={class:"relative max-w-7xl mx-auto px-6 py-10 text-white"},fs={class:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-8"},ws={class:"flex-1 space-y-4"},hs={class:"flex flex-wrap items-center gap-3"},_s={class:"text-3xl sm:text-4xl font-bold tracking-tight"},$s={key:0,class:"px-3 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"},js={class:"flex flex-wrap items-center gap-2 text-sm font-medium"},Cs={class:"badge"},Vs={class:"badge"},Ms={class:"badge"},Us={class:"badge"},Es={class:"badge"},Is={class:"badge"},Ss={key:0,class:"bg-white/10 rounded-xl p-4 mt-4 backdrop-blur-sm"},Ds={class:"text-gray-100 whitespace-pre-line"},Ts={class:"flex flex-col gap-6 w-full sm:w-auto"},zs={class:"flex flex-wrap justify-start sm:justify-end gap-2"},As={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},Fs={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Rs={key:0,class:"text-sm text-rose-600 mb-3"},qs={class:"flex justify-end gap-2"},Bs=["disabled"],Os={key:0},Ns={key:1},Ws=["href"],Hs={key:0,class:"grid grid-cols-2 sm:grid-cols-2 gap-3 bg-white/10 dark:bg-white/5 rounded-2xl p-4 border border-white/20 backdrop-blur-sm shadow-sm"},Ls={key:1,class:"flex justify-end gap-2 mt-3"},Ps={key:1,class:"text-xs text-amber-200 max-w-xs text-right"},Qs={key:2,class:"text-sm text-emerald-200"},Gs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},Js={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ks={class:"lg:col-span-2 space-y-4"},Xs={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ys={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Zs={class:"text-sm font-medium text-gray-900 dark:text-white"},ea={class:"text-sm font-medium text-gray-900 dark:text-white"},ta={class:"mt-2"},sa={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},aa={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},la={class:"flex mt-3 gap-1"},oa=["onClick","title"],ra={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},da={key:0},ia={key:1,class:"mt-4 grid grid-cols-2 gap-2"},na={key:2,class:"mt-3"},ua={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},va={key:1,class:"flex flex-wrap gap-2"},pa=["href"],ga={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ca={class:"flex items-center justify-between mb-3"},ba={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},xa={key:1,class:"text-sm text-gray-600 dark:text-gray-300"},ma={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ya=["onClick"],ka={class:"flex items-start justify-between gap-3"},fa={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},wa={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},ha={class:"space-y-4"},_a={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},$a={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},ja={class:"flex justify-between"},Ca={class:"font-medium"},Va={class:"flex justify-between"},Ma={class:"font-medium"},Ua={class:"flex justify-between"},Ea={class:"font-medium"},Ia={class:"flex justify-between"},Sa={class:"font-medium"},Da={class:"flex justify-between"},Ta={class:"font-medium"},za={class:"flex justify-between"},Aa={key:0,class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Fa={key:0,class:"space-y-4"},Ra={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},qa={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Ba={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Oa={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Na={class:"flex items-center justify-between"},Wa={key:0,class:"mt-3 text-sm text-rose-600"},Ha=["value"],La=["value"],Pa={class:"grid grid-cols-2 gap-4"},Qa={class:"flex justify-end gap-2"},Ga=["disabled"],Ja={key:0},Ka={key:1},Xa={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ya={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6"},Za={class:"mb-3"},el={class:"mb-3"},tl={class:"mb-3"},sl={class:"flex justify-end gap-2 mt-4"},al={key:2,class:"fixed inset-0 flex items-center justify-center bg-black/50"},ll={class:"bg-white p-4 rounded w-96"},ol=["value"],rl={class:"flex justify-end gap-2 mt-4"},dl={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},il={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},nl=["value"],ul=["value"],vl={key:0,class:"text-rose-600 text-sm mt-2"},pl={class:"mt-4 flex justify-end gap-2"},gl={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},cl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},bl=["value"],xl=["value"],ml={key:0,class:"text-rose-600 text-sm mt-2"},yl={class:"mt-4 flex justify-end gap-2"},kl={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},fl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},wl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},hl=["value"],_l={class:"flex justify-end gap-2"},$l={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},jl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},Cl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},Vl=["value"],Ml={class:"flex justify-end gap-2"},Ul={key:7,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},El={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-4xl shadow-xl"},Il={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},Sl=["onClick"],Dl=["onClick"],Tl=["onClick"],zl={key:0,class:"mt-3 text-sm text-rose-600"},Al={class:"flex justify-end mt-5"},Fl={key:8,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Rl={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-xl"},ql={class:"flex justify-end gap-2 mt-4"},Bl=["disabled"],Ol={key:0},Nl={key:1},Wl={__name:"Show",setup(S){var ke;const{props:$}=Rt(),m=$.id,g=(ke=$.auth)==null?void 0:ke.user,C=u(!0),a=u(null),f=u(!1),D=u(""),_=u(null),F=r=>{_.value=r.target.files},x=u(!1),v=u([]),n=u({title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""}),T=u(!1),V=u({title:"",start_date:"",due_date:""}),rt=I(()=>{var r;return!a.value||!g?!1:(a.value.responsibles||[]).some(e=>e.id===g.id)||(((r=a.value.project)==null?void 0:r.managers)||[]).some(e=>e.id===g.id)||P.value}),ce=r=>r==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":r==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",be=r=>r==="high"?"–í—ã—Å–æ–∫–∞—è":r==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è",z=async()=>{C.value=!0;try{const{data:r}=await b.get(`/api/tasks/${m}`,{withCredentials:!0});a.value=r,V.value={title:r.title||"",start_date:r.start_date||"",due_date:r.due_date||""}}finally{C.value=!1}},dt=async()=>{var r,e;try{const{data:d}=await b.put(`/api/tasks/${m}`,V.value,{withCredentials:!0});a.value=d.task,T.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},it=async r=>{try{const{data:e}=await b.patch(`/api/tasks/${m}/progress`,{progress:r},{withCredentials:!0});a.value.progress=e.progress}catch{alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.")}},nt=async()=>{var e;if(!((e=_.value)!=null&&e.length))return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã");const r=new FormData;for(let d=0;d<_.value.length;d++)r.append("files[]",_.value[d]);try{await b.post(`/api/tasks/${m}/files`,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),_.value=null,await z()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤")}},ut=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,x.value=!0},vt=async()=>{var r,e;f.value=!0,D.value="";try{const d={title:n.value.title,executor_id:Array.isArray(n.value.executor_id)?n.value.executor_id:[n.value.executor_id],responsible_id:Array.isArray(n.value.responsible_id)?n.value.responsible_id:[n.value.responsible_id],start_date:n.value.start_date,due_date:n.value.due_date};await b.post(`/api/tasks/${m}/subtasks`,d),x.value=!1,await z()}catch(d){D.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{f.value=!1}},P=I(()=>{var r,e,d;return(d=(e=(r=a.value)==null?void 0:r.project)==null?void 0:e.executors)==null?void 0:d.some(c=>c.id===(g==null?void 0:g.id))}),pt=I(()=>{var r;return(((r=a.value)==null?void 0:r.subtasks)||[]).some(e=>!e.completed)}),gt=I(()=>{var r,e;return((r=a.value)==null?void 0:r.progress)===100&&!((e=a.value)!=null&&e.completed)&&!pt.value}),ct=async()=>{var r,e;try{const{data:d}=await b.patch(`/api/tasks/${m}/complete`,{},{withCredentials:!0});a.value=d.task}catch(d){const c=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É";alert(c)}},bt=I(()=>{var e,d;const r=(d=(e=$.auth)==null?void 0:e.user)==null?void 0:d.id;return!r||!a.value?!1:(a.value.executors||[]).some(c=>c.id===r)||(a.value.responsibles||[]).some(c=>c.id===r)}),xt=I(()=>{var r,e,d;return!a.value||!g?!1:(a.value.executors||[]).some(c=>c.id===g.id)||(a.value.responsibles||[]).some(c=>c.id===g.id)||(((r=a.value.project)==null?void 0:r.executors)||[]).some(c=>c.id===g.id)||g.id===((d=(e=a.value.project)==null?void 0:e.company)==null?void 0:d.user_id)}),mt=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),yt=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),Q=u(!1),G=u(!1),J=u(""),kt=async()=>{var r,e;J.value="",G.value=!0;try{await b.delete(`/api/tasks/${m}`,{withCredentials:!0}),Q.value=!1,alert("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞."),window.history.back()}catch(d){J.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏"}finally{G.value=!1}},K=u(!1),X=u(null),ft=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,K.value=!0},wt=async()=>{var r,e;if(X.value)try{const{data:d}=await b.post(`/api/tasks/${m}/watchers`,{user_id:X.value},{withCredentials:!0});a.value.watchers=d.watchers,K.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è")}},Y=u(!1),Z=u(!1),xe=u(null),me=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),ye=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);v.value=r},ht=async()=>{await ye(),xe.value=null,Y.value=!0},_t=async()=>{await ye(),xe.value=null,Z.value=!0},ee=u(!1),te=u(!1),O=u([]),N=u([]),se=u([]),$t=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);se.value=r,ee.value=!0},jt=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);se.value=r,te.value=!0},Ct=async()=>{O.value.length&&(await b.post(`/api/tasks/${m}/executors/add`,{user_ids:O.value}),await z(),ee.value=!1,O.value=[])},Vt=async()=>{N.value.length&&(await b.post(`/api/tasks/${m}/responsibles/add`,{user_ids:N.value}),await z(),te.value=!1,N.value=[])},ue=u(!1),R=u(""),Mt=async r=>{var e,d,c,M,U;R.value="";try{await b.delete(`/api/tasks/${m}/executors`,{data:{user_id:r}}),await z()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Ut=async r=>{var e,d,c,M,U;R.value="";try{await b.delete(`/api/tasks/${m}/responsibles`,{data:{user_id:r}}),await z()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},Et=async r=>{var e,d,c,M,U;R.value="";try{await b.delete(`/api/tasks/${m}/watchers`,{data:{user_id:r}}),await z()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è"}},ae=u(null),le=u(null),oe=u(null),re=u(null),W=u(""),H=u(""),It=I(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.executors||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),St=I(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.responsibles||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),Dt=async()=>{var r,e;if(W.value="",!ae.value||!le.value){W.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${m}/executor`,{replace_user_id:ae.value,user_id:le.value}),await z(),Y.value=!1}catch(d){W.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è."}},Tt=async()=>{var r,e;if(H.value="",!oe.value||!re.value){H.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${m}/responsible`,{replace_user_id:oe.value,user_id:re.value}),await z(),Z.value=!1}catch(d){H.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ."}},de=u(!1),ie=u(!1),L=u({description:""}),zt=()=>{var r;L.value.description=((r=a.value)==null?void 0:r.description)||"",de.value=!0},At=async()=>{var r,e;if(a.value){ie.value=!0;try{await b.patch(`/api/tasks/${a.value.id}/description`,{description:L.value.description}),a.value.description=L.value.description,de.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è")}finally{ie.value=!1}}};return ge(z),(r,e)=>{var c;const d=qt("Head");return l(),o(y,null,[ne(d,{title:(c=a.value)!=null&&c.title?`–ó–∞–¥–∞—á–∞ ‚Äî ${a.value.title}`:"–ó–∞–¥–∞—á–∞"},null,8,["title"]),ne(Nt,null,{default:Bt(()=>{var M,U,E,fe,we,he,_e,$e,je,Ce,Ve,Me,Ue,Ee,Ie,Se,De,Te,ze,Ae,Fe,Re,qe,Be,Oe,Ne,We,He,Le,Pe,Qe,Ge,Je,Ke,Xe,Ye,Ze,et,tt,st,at,lt;return[t("div",ys,[e[46]||(e[46]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600"},null,-1)),t("div",ks,[t("div",fs,[t("div",ws,[t("div",hs,[t("h1",_s,i(((M=a.value)==null?void 0:M.title)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),(E=(U=a.value)==null?void 0:U.watcherstask)!=null&&E.some(s=>s.id===r.$page.props.auth.user.id)?(l(),o("span",$s," üëÅ –í—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç–µ ")):p("",!0)]),t("div",js,[t("span",Cs,[e[31]||(e[31]=h("üìÅ –ü—Ä–æ–µ–∫—Ç: ",-1)),t("b",null,i(((we=(fe=a.value)==null?void 0:fe.project)==null?void 0:we.name)??"‚Äî"),1)]),t("span",Vs,[e[32]||(e[32]=h("üè¢ –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),t("b",null,i((($e=(_e=(he=a.value)==null?void 0:he.project)==null?void 0:_e.company)==null?void 0:$e.name)??"‚Äî"),1)]),t("span",Ms,[e[33]||(e[33]=h("üë§ –û—Ç: ",-1)),t("b",null,i(((Ce=(je=a.value)==null?void 0:je.creator)==null?void 0:Ce.name)??"‚Äî"),1)]),t("span",Us,[e[34]||(e[34]=h(" üë∑ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏: ",-1)),t("b",null,i((Me=(Ve=a.value)==null?void 0:Ve.executors)!=null&&Me.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Es,[e[35]||(e[35]=h(" üë®‚Äçüíº –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ: ",-1)),t("b",null,i((Ee=(Ue=a.value)==null?void 0:Ue.responsibles)!=null&&Ee.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Is,[e[36]||(e[36]=h(" üëÅ –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1)),t("b",null,i((Se=(Ie=a.value)==null?void 0:Ie.watcherstask)!=null&&Se.length?a.value.watcherstask.map(s=>s.name).join(", "):"‚Äî"),1)]),a.value?(l(),o("span",{key:0,class:B(["badge bg-white text-gray-900 ring-1",ce(a.value.priority)])},[e[37]||(e[37]=h(" ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ",-1)),t("b",null,i(be(a.value.priority)),1)],2)):p("",!0)]),(De=a.value)!=null&&De.description?(l(),o("div",Ss,[e[38]||(e[38]=t("h3",{class:"text-base font-semibold mb-1"},"üìù –û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",Ds,i(a.value.description),1)])):p("",!0)]),t("div",Ts,[t("div",zs,[yt.value?(l(),o("button",{key:0,onClick:e[0]||(e[0]=s=>T.value=!0),class:"btn-action bg-blue-600 hover:bg-blue-700 text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å ")):p("",!0),mt.value?(l(),o("button",{key:1,onClick:e[1]||(e[1]=s=>Q.value=!0),class:"btn-action bg-rose-500 hover:bg-rose-600 text-white"}," üóë –£–¥–∞–ª–∏—Ç—å ")):p("",!0),Q.value?(l(),o("div",As,[t("div",Fs,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É? ",-1)),e[41]||(e[41]=h()),e[42]||(e[42]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},[h(" –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ "),t("span",{class:"font-semibold text-rose-600"},"–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ"),h("."),t("br"),h(" –ó–∞–¥–∞—á–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã. ")],-1)),e[43]||(e[43]=h()),J.value?(l(),o("p",Rs,i(J.value),1)):p("",!0),e[44]||(e[44]=h()),t("div",qs,[t("button",{style:{color:"gray"},onClick:e[2]||(e[2]=s=>Q.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –û—Ç–º–µ–Ω–∞ "),e[39]||(e[39]=h()),t("button",{onClick:kt,class:"px-4 py-2 rounded-lg bg-rose-600 hover:bg-rose-700 text-white",disabled:G.value},[G.value?(l(),o("span",Ns,"–£–¥–∞–ª—è—é‚Ä¶")):(l(),o("span",Os,"–£–¥–∞–ª–∏—Ç—å"))],8,Bs)])])])):p("",!0),t("button",{onClick:zt,class:"btn-action bg-indigo-500 hover:bg-indigo-600 text-white"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ "),(ze=(Te=a.value)==null?void 0:Te.project)!=null&&ze.id?(l(),o("a",{key:3,href:`/projects/${a.value.project.id}`,class:"btn-action bg-white hover:bg-gray-100 text-gray-900"}," üîô –ö –ø—Ä–æ–µ–∫—Ç—É ",8,Ws)):p("",!0)]),me.value?(l(),o("div",Hs,[e[45]||(e[45]=t("h4",{class:"col-span-2 text-sm uppercase tracking-wide text-white/70 font-semibold mb-1"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ",-1)),t("button",{onClick:ht,class:"btn-grid bg-blue-500 hover:bg-blue-600"}," üë∑ –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:_t,class:"btn-grid bg-indigo-500 hover:bg-indigo-600"}," üë®‚Äçüíº –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:$t,class:"btn-grid bg-emerald-500 hover:bg-emerald-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:jt,class:"btn-grid bg-teal-500 hover:bg-teal-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:ft,class:"btn-grid bg-purple-500 hover:bg-purple-600 col-span-2"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è "),me.value?(l(),o("button",{key:0,onClick:e[3]||(e[3]=s=>ue.value=!0),class:"btn-grid bg-gray-500 hover:bg-purple-600 col-span-2"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")):p("",!0)])):p("",!0),bt.value?(l(),o("div",Ls,[gt.value?(l(),o("button",{key:0,onClick:ct,class:"btn-action bg-emerald-600 hover:bg-emerald-700 text-white"}," ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É ")):((Ae=a.value)==null?void 0:Ae.progress)===100&&!((Fe=a.value)!=null&&Fe.completed)?(l(),o("div",Ps," –ï—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É. ")):p("",!0),(Re=a.value)!=null&&Re.completed?(l(),o("div",Qs," ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ "+i(((qe=a.value)==null?void 0:qe.completed_at)||""),1)):p("",!0)])):p("",!0)])])])]),t("div",Gs,[t("div",Js,[t("div",Ks,[t("div",Xs,[t("div",Ys,[t("div",null,[e[47]||(e[47]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("div",Zs,i(((Be=a.value)==null?void 0:Be.start_date)??"‚Äî"),1)]),t("div",null,[e[48]||(e[48]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("div",ea,i(((Oe=a.value)==null?void 0:Oe.due_date)??"‚Äî"),1)]),t("div",null,[e[49]||(e[49]=t("div",{class:"text-xs text-gray-500"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),t("div",ta,[t("div",sa,[t("div",{class:"h-2 bg-emerald-500",style:Ot({width:(((Ne=a.value)==null?void 0:Ne.progress)||0)+"%"})},null,4)]),t("div",aa,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+i(((We=a.value)==null?void 0:We.progress)??0)+"%",1)]),t("div",la,[(l(),o(y,null,k(11,s=>{var j;return t("button",{key:s,onClick:ve=>it((s-1)*10),class:B(["flex-1 h-5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300",{"!bg-emerald-500":(((j=a.value)==null?void 0:j.progress)||0)>=(s-1)*10}]),title:`${(s-1)*10}%`},null,10,oa)}),64))])])])]),t("div",ra,[xt.value?(l(),o("div",da,[t("input",{type:"file",multiple:"",onChange:F,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"text-sm text-gray-600 dark:text-gray-300"},null,32),t("button",{onClick:nt,class:"rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 mt-4"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å ")])):p("",!0),C.value?(l(),o("div",ia,[(l(),o(y,null,k(4,s=>t("div",{key:s,class:"h-8 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"})),64))])):(l(),o("div",na,[(Le=(He=a.value)==null?void 0:He.files)!=null&&Le.length?(l(),o("div",va,[(l(!0),o(y,null,k(a.value.files,s=>(l(),o("a",{key:s.id,href:`/api/tasks/files/${s.id}`,class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100"},[e[50]||(e[50]=t("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),h(" "+i(s.file_path.split("/").pop()),1)],8,pa))),128))])):(l(),o("div",ua," –§–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã. "))]))]),t("div",ga,[t("div",ca,[e[51]||(e[51]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ü–æ–¥–∑–∞–¥–∞—á–∏",-1)),rt.value?(l(),o("button",{key:0,onClick:ut,class:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700"}," + –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):p("",!0)]),C.value?(l(),o("div",ba,[(l(),o(y,null,k(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[52]||(e[52]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(Qe=(Pe=a.value)==null?void 0:Pe.subtasks)!=null&&Qe.length?(l(),o("div",ma,[(l(!0),o(y,null,k(a.value.subtasks,s=>{var j;return l(),o("div",{key:s.id,onClick:ve=>r.$inertia.visit(`/subtasks/${s.id}`),class:B(["group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",[s.progress===100?"border-emerald-500 ring-1 ring-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":s.progress>=50?"border-amber-400 ring-1 ring-amber-300 bg-amber-50 dark:bg-amber-900/20":"border-gray-400 ring-1 ring-gray-300 bg-gray-50 dark:bg-rose-900/20"]])},[t("div",ka,[t("h3",fa,i(s.title),1),t("span",{class:B(["text-sm px-2 py-1 rounded-full",{"bg-emerald-100 text-emerald-700":s.progress===100,"bg-amber-100 text-amber-700":s.progress>=50&&s.progress<100,"bg-rose-100 text-rose-700":s.progress<50}])},i(s.progress??0)+"% ",3)]),t("div",wa,[t("div",null,[e[53]||(e[53]=h(" –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: ",-1)),t("b",null,i(((j=s.executors)==null?void 0:j.map(ve=>ve.name).join(", "))||"‚Äî"),1)]),t("div",null,"–°—Ä–æ–∫–∏: "+i(s.start_date)+" ‚Äî "+i(s.due_date),1)])],10,ya)}),128))])):(l(),o("div",xa," –ü–æ–¥–∑–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. "))])]),t("div",ha,[t("div",_a,[e[60]||(e[60]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ",-1)),t("dl",$a,[t("div",ja,[e[54]||(e[54]=t("dt",null,"–ê–≤—Ç–æ—Ä",-1)),t("dd",Ca,i(((Je=(Ge=a.value)==null?void 0:Ge.creator)==null?void 0:Je.name)??"‚Äî"),1)]),t("div",Va,[e[55]||(e[55]=t("dt",null,"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("dd",Ma,i((Xe=(Ke=a.value)==null?void 0:Ke.executors)!=null&&Xe.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Ua,[e[56]||(e[56]=t("dt",null,"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("dd",Ea,i((Ze=(Ye=a.value)==null?void 0:Ye.responsibles)!=null&&Ze.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Ia,[e[57]||(e[57]=t("dt",null,"–ü—Ä–æ–µ–∫—Ç",-1)),t("dd",Sa,i(((tt=(et=a.value)==null?void 0:et.project)==null?void 0:tt.name)??"‚Äî"),1)]),t("div",Da,[e[58]||(e[58]=t("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),t("dd",Ta,i(((lt=(at=(st=a.value)==null?void 0:st.project)==null?void 0:at.company)==null?void 0:lt.name)??"‚Äî"),1)]),t("div",za,[e[59]||(e[59]=t("dt",null,"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),t("dd",null,[a.value?(l(),o("span",{key:0,class:B(["px-2 py-1 text-xs rounded-full ring-1",ce(a.value.priority)])},i(be(a.value.priority)),3)):p("",!0)])])])]),a.value?(l(),o("div",Aa,[ne(ms,{"task-id":a.value.id,executors:a.value.executors,responsibles:a.value.responsibles,creator:a.value.creator},null,8,["task-id","executors","responsibles","creator"])])):p("",!0)]),a.value?(l(),o("div",Fa,[t("div",Ra,[e[61]||(e[61]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ß–∞—Ç",-1)),ne(as,{"task-id":a.value.id,"can-chat":!0},null,8,["task-id"])])])):(l(),o("div",qa,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"))])]),x.value?(l(),o("div",Ba,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>x.value=!1)}),t("div",Oa,[t("div",Na,[e[62]||(e[62]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ù–æ–≤–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞",-1)),t("button",{onClick:e[5]||(e[5]=s=>x.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),D.value?(l(),o("p",Wa,i(D.value),1)):p("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:ot(vt,["prevent"])},[t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>n.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[A,n.value.title]])]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>n.value.executor_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[64]||(e[64]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,Ha))),128))],512),[[q,n.value.executor_id]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>n.value.responsible_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[66]||(e[66]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,La))),128))],512),[[q,n.value.responsible_id]])]),t("div",Pa,[t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>n.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[A,n.value.start_date]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>n.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[A,n.value.due_date]])])]),t("div",Qa,[t("button",{type:"button",onClick:e[11]||(e[11]=s=>x.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{type:"submit",disabled:f.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[f.value?(l(),o("span",Ka,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Ja,"–°–æ–∑–¥–∞—Ç—å"))],8,Ga)])],32)])])):p("",!0),T.value?(l(),o("div",Xa,[t("div",Ya,[e[74]||(e[74]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É",-1)),t("form",{onSubmit:ot(dt,["prevent"])},[t("div",Za,[e[70]||(e[70]=t("label",{class:"block text-sm text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{required:"","onUpdate:modelValue":e[12]||(e[12]=s=>V.value.title=s),type:"text",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[A,V.value.title]])]),t("div",el,[e[71]||(e[71]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),w(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>V.value.start_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[A,V.value.start_date]])]),t("div",tl,[e[72]||(e[72]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>V.value.due_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[A,V.value.due_date]])]),t("div",sl,[t("button",{type:"button",onClick:e[15]||(e[15]=s=>T.value=!1),class:"px-4 py-2 border rounded"},"–û—Ç–º–µ–Ω–∞"),e[73]||(e[73]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):p("",!0),K.value?(l(),o("div",al,[t("div",ll,[e[75]||(e[75]=t("h3",{class:"font-semibold mb-3"},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),w(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>X.value=s),class:"w-full border p-2 rounded"},[(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,ol))),128))],512),[[q,X.value]]),t("div",rl,[t("button",{onClick:e[17]||(e[17]=s=>K.value=!1),class:"px-3 py-1 border rounded"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:wt,class:"px-3 py-1 bg-blue-600 text-white rounded"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):p("",!0),Y.value?(l(),o("div",dl,[t("div",il,[e[78]||(e[78]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),e[79]||(e[79]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>ae.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[76]||(e[76]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(y,null,k(a.value.executors,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,nl))),128))],512),[[q,ae.value]]),e[80]||(e[80]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>le.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[77]||(e[77]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(y,null,k(It.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,ul))),128))],512),[[q,le.value]]),W.value?(l(),o("p",vl,i(W.value),1)):p("",!0),t("div",pl,[t("button",{onClick:e[20]||(e[20]=s=>Y.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Dt,class:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):p("",!0),Z.value?(l(),o("div",gl,[t("div",cl,[e[83]||(e[83]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),e[84]||(e[84]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>oe.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[81]||(e[81]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(y,null,k(a.value.responsibles,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,bl))),128))],512),[[q,oe.value]]),e[85]||(e[85]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>re.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[82]||(e[82]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(y,null,k(St.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,xl))),128))],512),[[q,re.value]]),H.value?(l(),o("p",ml,i(H.value),1)):p("",!0),t("div",yl,[t("button",{onClick:e[23]||(e[23]=s=>Z.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Tt,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):p("",!0),ee.value?(l(),o("div",kl,[t("div",fl,[e[86]||(e[86]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π",-1)),t("div",wl,[(l(!0),o(y,null,k(se.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[24]||(e[24]=j=>O.value=j)},null,8,hl),[[pe,O.value]]),t("span",null,i(s.name),1)]))),128))]),t("div",_l,[t("button",{onClick:e[25]||(e[25]=s=>ee.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Ct,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):p("",!0),te.value?(l(),o("div",$l,[t("div",jl,[e[87]||(e[87]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö",-1)),t("div",Cl,[(l(!0),o(y,null,k(se.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[26]||(e[26]=j=>N.value=j)},null,8,Vl),[[pe,N.value]]),t("span",null,i(s.name),1)]))),128))]),t("div",Ml,[t("button",{onClick:e[27]||(e[27]=s=>te.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Vt,class:"px-4 py-2 bg-teal-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):p("",!0),ue.value?(l(),o("div",Ul,[t("div",El,[e[91]||(e[91]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∑–∞–¥–∞—á–∏ ",-1)),t("div",Il,[t("div",null,[e[88]||(e[88]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),(l(!0),o(y,null,k(a.value.executors,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:j=>Mt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Sl)]))),128))]),t("div",null,[e[89]||(e[89]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),(l(!0),o(y,null,k(a.value.responsibles,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:j=>Ut(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Dl)]))),128))]),t("div",null,[e[90]||(e[90]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏",-1)),(l(!0),o(y,null,k(a.value.watcherstask,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:j=>Et(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Tl)]))),128))])]),R.value?(l(),o("p",zl,i(R.value),1)):p("",!0),t("div",Al,[t("button",{onClick:e[28]||(e[28]=s=>ue.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):p("",!0),de.value?(l(),o("div",Fl,[t("div",Rl,[e[92]||(e[92]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ ",-1)),w(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=s=>L.value.description=s),class:"w-full border rounded-lg p-3 min-h-[150px] dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."},null,512),[[A,L.value.description]]),t("div",ql,[t("button",{onClick:e[30]||(e[30]=s=>de.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600 dark:border-gray-500"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:At,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",disabled:ie.value},[ie.value?(l(),o("span",Nl,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Ol,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,Bl)])])])):p("",!0)]}),_:1})],64)}}},Gl=Wt(Wl,[["__scopeId","data-v-c7af4d0f"]]);export{Gl as default};
