import{h as x,i as $,z as B,c as M,o as r,a as o,m as S,u as N,M as D,F as b,j as E,Z as L,b as e,d as k,w as V,V as U,H as p,t as n,P as z,f,g as i}from"./app-12bccec5.js";import{_ as I}from"./AuthenticatedLayout-68445c6f.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-b144d97d.js";const q={class:"py-8 bg-slate-50 dark:bg-slate-900 min-h-screen"},A={class:"w-full px-2 sm:px-4 lg:px-6 space-y-6"},G={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-5"},H={class:"flex flex-col xl:flex-row gap-6 justify-between"},K={class:"flex flex-col gap-2"},P={class:"flex bg-slate-100 dark:bg-slate-700/50 p-1 rounded-lg self-start"},Z=["onClick"],J={class:"flex flex-col gap-2 min-w-[200px]"},Q=["value"],W={class:"flex flex-col gap-2"},X={class:"flex bg-slate-100 dark:bg-slate-700/50 p-1 rounded-lg self-start"},Y={class:"flex flex-col gap-2"},R={class:"flex gap-2"},ee={class:"bg-white dark:bg-slate-800 shadow-xl shadow-slate-200/50 dark:shadow-none rounded-3xl border border-slate-200 dark:border-slate-700 overflow-hidden"},te={key:0,class:"p-12 text-center text-slate-500 animate-pulse"},se={key:1,class:"overflow-x-auto"},le={class:"w-full divide-y divide-slate-200 dark:divide-slate-700 table-fixed"},re={class:"bg-slate-50 dark:bg-slate-900/50"},oe={key:0,class:"px-3 py-5 text-left text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider"},ae={key:1,class:"px-3 py-5 text-left text-xs font-bold text-rose-600 dark:text-rose-400 uppercase tracking-wider"},de={key:2,class:"px-3 py-5 text-left text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider"},ne={class:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800"},ie={class:"px-4 py-4 align-top"},ue={class:"flex items-center gap-3"},ce={class:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold border-2 border-white dark:border-slate-700 shadow-sm shrink-0"},xe={class:"overflow-hidden min-w-0"},be=["title"],pe={class:"text-[10px] text-slate-400 uppercase font-bold mt-0.5"},ke={key:0,class:"px-2 py-4 align-top bg-blue-50/30 dark:bg-blue-900/10 border-x border-slate-100 dark:border-slate-700/50"},fe={class:"mb-3 flex items-center justify-between px-1"},ge={class:"text-xs font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 px-2 py-0.5 rounded-full"},ve={class:"space-y-2"},_e={class:"flex items-start gap-1 w-full min-w-0"},he=["href","title"],me={key:0,class:"inline-block text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500 align-middle"},we={class:"mt-2 flex items-center justify-between text-[10px] text-slate-500"},ye={class:"flex items-center gap-1 bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded whitespace-nowrap shrink-0"},Te=["title"],Ce=["onClick"],je={key:1,class:"text-xs text-slate-400 italic text-center py-4"},$e={key:1,class:"px-2 py-4 align-top bg-rose-50/30 dark:bg-rose-900/10 border-r border-slate-100 dark:border-slate-700/50"},Se={class:"mb-3 flex items-center justify-between px-1"},De={class:"text-xs font-bold text-rose-600 bg-rose-100 dark:bg-rose-900/40 px-2 py-0.5 rounded-full"},Ve={class:"space-y-2"},Fe={class:"flex items-start gap-1 w-full min-w-0"},Be=["href","title"],Me={key:0,class:"inline-block text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500 align-middle"},Ne={class:"mt-1 flex flex-col gap-1 text-[10px]"},Ee={class:"font-bold text-rose-600 whitespace-nowrap"},Le=["title"],Ue=["onClick"],ze={key:1,class:"text-xs text-slate-400 italic text-center py-4"},Ie={key:2,class:"px-2 py-4 align-top"},Oe={class:"mb-3 flex items-center justify-between px-1"},qe={class:"text-xs font-bold text-emerald-600 bg-emerald-100 dark:bg-emerald-900/40 px-2 py-0.5 rounded-full"},Ae={class:"space-y-2"},Ge={class:"flex flex-col min-w-0 w-full"},He={class:"flex items-start w-full min-w-0"},Ke=["href","title"],Pe={key:0,class:"inline-block text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500 align-middle"},Ze=["title"],Je=["onClick"],Qe={key:1,class:"text-xs text-slate-400 italic text-center py-4"},We={class:"px-2 py-4 align-top text-center"},Xe={class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-bold text-xs border border-slate-200 dark:border-slate-600"},Ye={__name:"TaskSummary",props:{auth:Object},setup(Re){const v=x(!0),_=x([]),T=x([]),C=x(!1),c=x(new Set),u=x({mode:"my_tasks",user_id:""}),d=x({type:"all",columns:{in_work:!0,overdue:!0,completed:!0}}),h=async()=>{v.value=!0;try{const a={mode:u.value.mode,user_id:u.value.user_id||void 0},{data:s}=await E.get("/api/tasks/summary",{params:a});_.value=s.summary,C.value=s.is_owner,u.value.user_id||(T.value=s.users)}catch(a){console.error(a)}finally{v.value=!1}};$(()=>u.value.mode,()=>{u.value.user_id="",h()}),$(()=>u.value.user_id,h),B(h);const F=M(()=>_.value?_.value.map(a=>{const s=t=>d.value.type==="all"?!0:d.value.type==="task"?!t.is_subtask&&!t.task_id:d.value.type==="subtask"?t.is_subtask||t.task_id:!0;return{...a,filteredTasks:{in_work:a.tasks.in_work.filter(s),overdue:a.tasks.overdue.filter(s),completed:a.tasks.completed.filter(s)}}}):[]),j=a=>a?new Date(a).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}):"‚Äî",m=a=>{d.value.columns[a]=!d.value.columns[a]},g=(a,s)=>`${a}_${s}`,w=(a,s)=>{const t=g(a,s);c.value.has(t)?c.value.delete(t):c.value.add(t)},y=(a,s,t)=>{const l=g(s,t);return c.value.has(l)?a:a.slice(0,10)};return(a,s)=>(r(),o(b,null,[S(N(L),{title:"–°–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á"}),S(I,null,{header:D(()=>s[7]||(s[7]=[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-bold text-2xl text-slate-800 dark:text-white leading-tight flex items-center gap-2"}," üìä –°–≤–æ–¥–Ω—ã–π –ø—É–ª ")],-1)])),default:D(()=>[e("div",q,[e("div",A,[e("div",G,[e("div",H,[e("div",K,[s[8]||(s[8]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏",-1)),e("div",P,[(r(!0),o(b,null,k([{key:"my_tasks",label:"–ú–æ–∏ –∑–∞–¥–∞—á–∏"},{key:"author",label:"–Ø ‚Äî –ê–≤—Ç–æ—Ä"},{key:"owner",label:"–í—Å–µ –∑–∞–¥–∞—á–∏",show:C.value}],t=>V((r(),o("button",{key:t.key,onClick:l=>u.value.mode=t.key,class:p(["px-4 py-2 rounded-md text-sm font-bold transition-all duration-200",u.value.mode===t.key?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])},n(t.label),11,Z)),[[U,t.show!==!1]])),128))])]),e("div",J,[s[10]||(s[10]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),V(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value.user_id=t),class:"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm text-sm py-2.5"},[s[9]||(s[9]=e("option",{value:""},"–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",-1)),(r(!0),o(b,null,k(T.value,t=>(r(),o("option",{key:t.id,value:t.id},n(t.name),9,Q))),128))],512),[[z,u.value.user_id]])]),s[16]||(s[16]=e("div",{class:"w-px bg-slate-200 dark:bg-slate-700 hidden xl:block"},null,-1)),e("div",W,[s[11]||(s[11]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏",-1)),e("div",X,[e("button",{onClick:s[1]||(s[1]=t=>d.value.type="all"),class:p(["px-3 py-2 rounded-md text-sm font-bold transition",d.value.type==="all"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–í—Å–µ",2),e("button",{onClick:s[2]||(s[2]=t=>d.value.type="task"),class:p(["px-3 py-2 rounded-md text-sm font-bold transition",d.value.type==="task"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–ó–∞–¥–∞—á–∏",2),e("button",{onClick:s[3]||(s[3]=t=>d.value.type="subtask"),class:p(["px-3 py-2 rounded-md text-sm font-bold transition",d.value.type==="subtask"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–ü–æ–¥–∑–∞–¥–∞—á–∏",2)])]),e("div",Y,[s[15]||(s[15]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å",-1)),e("div",R,[e("button",{onClick:s[4]||(s[4]=t=>m("in_work")),class:p(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",d.value.columns.in_work?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-700 dark:text-blue-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},s[12]||(s[12]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),f(" –í —Ä–∞–±–æ—Ç–µ",-1)]),2),e("button",{onClick:s[5]||(s[5]=t=>m("overdue")),class:p(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",d.value.columns.overdue?"bg-rose-50 border-rose-200 text-rose-700 dark:bg-rose-900/30 dark:border-rose-700 dark:text-rose-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},s[13]||(s[13]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),f(" –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ",-1)]),2),e("button",{onClick:s[6]||(s[6]=t=>m("completed")),class:p(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",d.value.columns.completed?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:border-emerald-700 dark:text-emerald-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},s[14]||(s[14]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),f(" –ó–∞–≤–µ—Ä—à–µ–Ω–æ",-1)]),2)])])])]),e("div",ee,[v.value?(r(),o("div",te,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")):(r(),o("div",se,[e("table",le,[e("thead",re,[e("tr",null,[s[17]||(s[17]=e("th",{class:"px-4 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider w-52"}," –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ",-1)),d.value.columns.in_work?(r(),o("th",oe," –í —Ä–∞–±–æ—Ç–µ ")):i("",!0),d.value.columns.overdue?(r(),o("th",ae," –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ ")):i("",!0),d.value.columns.completed?(r(),o("th",de," –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ ")):i("",!0),s[18]||(s[18]=e("th",{class:"px-2 py-5 text-center text-xs font-bold text-slate-500 uppercase tracking-wider w-16"}," –í—Å–µ–≥–æ ",-1))])]),e("tbody",ne,[(r(!0),o(b,null,k(F.value,t=>(r(),o("tr",{key:t.user.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors"},[e("td",ie,[e("div",ue,[e("div",ce,n(t.user.name.charAt(0)),1),e("div",xe,[e("div",{class:"text-sm font-bold text-slate-900 dark:text-white leading-tight truncate",title:t.user.name},n(t.user.name),9,be),e("div",pe,"ID: "+n(t.user.id),1)])])]),d.value.columns.in_work?(r(),o("td",ke,[e("div",fe,[e("span",ge,n(t.filteredTasks.in_work.length),1)]),e("div",ve,[(r(!0),o(b,null,k(y(t.filteredTasks.in_work,t.user.id,"in_work"),l=>(r(),o("div",{key:l.id+(l.is_subtask?"s":"t"),class:"group relative bg-white dark:bg-slate-700 p-2.5 rounded-xl border border-blue-100 dark:border-slate-600 hover:shadow-md hover:border-blue-300 transition-all duration-200 w-full max-w-full"},[e("div",_e,[e("a",{href:l.link,title:l.title,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30 text-sm flex-1 min-w-0"},[l.is_subtask?(r(),o("span",me," ‚Ü≥ ")):i("",!0),f(" "+n(l.title),1)],8,he)]),e("div",we,[e("span",ye," üìÖ "+n(j(l.due_date)),1),e("span",{class:"truncate max-w-[40%] opacity-75 ml-2",title:l.project_name},n(l.project_name),9,Te)])]))),128)),t.filteredTasks.in_work.length>10?(r(),o("button",{key:0,onClick:l=>w(t.user.id,"in_work"),class:"w-full py-2 text-xs font-bold text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors dashed-border mt-2"},n(c.value.has(g(t.user.id,"in_work"))?"–°–≤–µ—Ä–Ω—É—Ç—å":`–ï—â–µ (${t.filteredTasks.in_work.length-10})`),9,Ce)):i("",!0),t.filteredTasks.in_work.length===0?(r(),o("div",je,"–ü—É—Å—Ç–æ")):i("",!0)])])):i("",!0),d.value.columns.overdue?(r(),o("td",$e,[e("div",Se,[e("span",De,n(t.filteredTasks.overdue.length),1)]),e("div",Ve,[(r(!0),o(b,null,k(y(t.filteredTasks.overdue,t.user.id,"overdue"),l=>(r(),o("div",{key:l.id,class:"group bg-white dark:bg-slate-700 p-2.5 rounded-xl border-l-4 border-l-rose-500 border border-y-rose-100 border-r-rose-100 dark:border-slate-600 hover:shadow-md transition-all duration-200 w-full max-w-full"},[e("div",Fe,[e("a",{href:l.link,title:l.title,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30 text-sm flex-1 min-w-0"},[l.is_subtask?(r(),o("span",Me," ‚Ü≥ ")):i("",!0),f(" "+n(l.title),1)],8,Be)]),e("div",Ne,[e("div",Ee,"–û–ø–æ–∑–¥–∞–Ω–∏–µ! –°—Ä–æ–∫: "+n(j(l.due_date)),1),e("div",{class:"text-slate-400 truncate w-full",title:l.project_name},n(l.project_name),9,Le)])]))),128)),t.filteredTasks.overdue.length>10?(r(),o("button",{key:0,onClick:l=>w(t.user.id,"overdue"),class:"w-full py-2 text-xs font-bold text-rose-600 dark:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors dashed-border mt-2"},n(c.value.has(g(t.user.id,"overdue"))?"–°–≤–µ—Ä–Ω—É—Ç—å":`–ï—â–µ (${t.filteredTasks.overdue.length-10})`),9,Ue)):i("",!0),t.filteredTasks.overdue.length===0?(r(),o("div",ze,"–ù–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–∫")):i("",!0)])])):i("",!0),d.value.columns.completed?(r(),o("td",Ie,[e("div",Oe,[e("span",qe,n(t.filteredTasks.completed.length),1)]),e("div",Ae,[(r(!0),o(b,null,k(y(t.filteredTasks.completed,t.user.id,"completed"),l=>(r(),o("div",{key:l.id,class:"group flex items-center justify-between bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700 hover:bg-white dark:hover:bg-slate-700 transition-colors w-full max-w-full"},[e("div",Ge,[e("div",He,[e("a",{href:l.link,title:l.title,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30 text-sm flex-1 min-w-0"},[l.is_subtask?(r(),o("span",Pe," ‚Ü≥ ")):i("",!0),f(" "+n(l.title),1)],8,Ke)]),e("span",{class:"text-[9px] text-slate-400 truncate mt-0.5",title:l.project_name},n(l.project_name),9,Ze)]),s[19]||(s[19]=e("div",{class:"text-emerald-500 ml-1 shrink-0"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))]))),128)),t.filteredTasks.completed.length>10?(r(),o("button",{key:0,onClick:l=>w(t.user.id,"completed"),class:"w-full py-2 text-xs font-bold text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg transition-colors dashed-border mt-2"},n(c.value.has(g(t.user.id,"completed"))?"–°–≤–µ—Ä–Ω—É—Ç—å":`–ï—â–µ (${t.filteredTasks.completed.length-10})`),9,Je)):i("",!0),t.filteredTasks.completed.length===0?(r(),o("div",Qe,"–ù–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö")):i("",!0)])])):i("",!0),e("td",We,[e("span",Xe,n(t.filteredTasks.in_work.length+t.filteredTasks.overdue.length+t.filteredTasks.completed.length),1)])]))),128))])])]))])])])]),_:1})],64))}},rt=O(Ye,[["__scopeId","data-v-fb348875"]]);export{rt as default};
