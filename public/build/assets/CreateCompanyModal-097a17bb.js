import{r as i,o as u,c as m,a as t,g as f,h as g,v as k,E as p,t as r,d as c,f as y}from"./app-e92293fe.js";const w={class:"fixed inset-0 z-[100] grid place-items-center bg-slate-950/60 backdrop-blur-sm p-4"},h={class:"bg-white dark:bg-slate-900 w-full max-w-md p-8 rounded-[2rem] border dark:border-slate-800 shadow-2xl animate-in slide-in-from-bottom duration-300"},_={key:0,class:"text-red-500 text-sm mt-2 ml-1 font-medium"},C={class:"relative group"},B={class:"text-sm text-slate-400"},D={key:0,class:"text-red-500 text-sm mt-2 ml-1 font-medium"},M={class:"flex gap-4 pt-4"},V=["disabled"],F={__name:"CreateCompanyModal",emits:["close","created"],setup(z,{emit:b}){const n=b,s=i({name:"",logo:null}),o=i(!1),a=i({}),v=l=>s.value.logo=l.target.files[0],x=async()=>{o.value=!0,a.value={};const l=new FormData;l.append("name",s.value.name),s.value.logo&&l.append("logo",s.value.logo);try{await y.post("/api/companies",l,{headers:{"Content-Type":"multipart/form-data"}}),n("created"),n("close")}catch(e){e.response&&e.response.status===422?a.value=e.response.data.errors:alert("Произошла неизвестная ошибка")}finally{o.value=!1}};return(l,e)=>(u(),m("div",w,[t("div",h,[e[5]||(e[5]=t("h3",{class:"text-2xl font-black text-slate-800 dark:text-white mb-6"},"Новая компания",-1)),t("form",{onSubmit:f(x,["prevent"]),class:"space-y-6"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 tracking-widest"},"Название организации",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>s.value.name=d),required:"",class:p([{"border-red-500 focus:ring-red-500/20":a.value.name},"w-full px-5 py-4 rounded-2xl border dark:bg-slate-800 dark:border-slate-700 outline-none focus:ring-4 focus:ring-indigo-500/10 text-slate-800 dark:text-white transition-colors"]),placeholder:"Напр: Apple Inc.",onInput:e[1]||(e[1]=d=>a.value.name=null)},null,34),[[k,s.value.name]]),a.value.name?(u(),m("div",_,r(a.value.name[0]),1)):c("",!0)]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 tracking-widest"},"Логотип (опционально)",-1)),t("div",C,[t("input",{type:"file",onChange:v,class:"absolute inset-0 opacity-0 cursor-pointer"},null,32),t("div",{class:p([{"border-red-500":a.value.logo},"w-full py-10 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl text-center group-hover:border-indigo-500 transition"])},[t("span",B,r(s.value.logo?s.value.logo.name:"Нажмите или перетащите файл"),1)],2)]),a.value.logo?(u(),m("div",D,r(a.value.logo[0]),1)):c("",!0)]),t("div",M,[t("button",{type:"button",onClick:e[2]||(e[2]=d=>n("close")),class:"flex-1 py-4 text-sm font-bold text-slate-400"},"Отмена"),t("button",{type:"submit",disabled:o.value||!s.value.name,class:"flex-1 py-4 text-sm font-bold bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-2xl hover:scale-105 transition disabled:opacity-50"},r(o.value?"Создание...":"Создать"),9,V)])],32)])]))}};export{F as default};
