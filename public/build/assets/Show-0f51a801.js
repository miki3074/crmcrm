import{Q as qe,m as n,k as $,p as He,o as a,f as r,a as je,u as Te,w as Ee,F as m,l as b,Z as Le,b as t,t as o,d as v,n as Ce,g,s as f,e as L,h as x,v as c,q as I}from"./app-c9c78806.js";import{_ as Ie}from"./AuthenticatedLayout-8486ea7b.js";import"./ApplicationLogo-fc5faccf.js";import"./_plugin-vue_export-helper-c27b6911.js";const Oe={class:"relative overflow-hidden"},Pe={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-white"},Re={class:"flex items-start gap-4"},Ae={class:"flex-1"},Qe={class:"text-2xl sm:text-3xl font-semibold"},Ze={class:"mt-2 flex flex-wrap items-center gap-2 text-sm"},Ge={class:"px-2 py-1 rounded-full bg-white/20"},Je={class:"px-2 py-1 rounded-full bg-white/20"},Ke={class:"px-2 py-1 rounded-full bg-white/20"},We={class:"px-2 py-1 rounded-full bg-white/20"},Xe={key:1,class:"px-2 py-1 rounded-full bg-white/20"},Ye={class:"flex items-center gap-2"},et={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},st={class:"lg:col-span-2"},lt={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},at={class:"flex items-center justify-between mb-3"},rt={class:"text-sm text-gray-500 dark:text-gray-400"},ot={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},dt={key:1,class:"text-center py-10"},it={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},nt=["onClick"],ut={class:"flex items-start justify-between gap-3"},gt={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},pt={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},vt={class:"flex items-center gap-2"},xt={class:"flex items-center gap-2"},bt={class:"flex items-center gap-2"},yt={key:0,class:"mt-3 pt-3 border-t"},mt={class:"flex flex-wrap gap-2"},ft=["href"],ct={class:"space-y-4"},kt={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},wt={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},ht={class:"flex justify-between"},_t={class:"font-medium text-gray-900 dark:text-white"},jt={class:"flex justify-between"},Ct={class:"font-medium"},$t={class:"flex justify-between"},zt={class:"font-medium"},Mt={class:"flex justify-between"},Vt={class:"font-medium"},St={class:"flex justify-between"},Ut={class:"font-medium"},Bt={class:"mt-4"},Dt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line"},Nt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8 pb-10"},Ft={key:0,class:"flex gap-2 items-center mb-6"},qt=["value"],Ht=["disabled"],Tt={key:1,class:"text-red-600 mb-4"},Et={key:2,class:"space-y-3"},Lt={class:"flex justify-between items-center"},It=["href"],Ot={class:"text-sm text-gray-500 dark:text-gray-400"},Pt={class:"text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},Rt={key:3,class:"text-gray-500 dark:text-gray-400"},At={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Qt={class:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Zt={class:"flex items-center justify-between"},Gt={key:0,class:"mt-3 text-sm text-rose-600"},Jt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Kt=["value"],Wt=["value"],Xt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Yt={class:"flex justify-end gap-2 pt-2"},es=["disabled"],ts={key:0},ss={key:1},ls={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},as={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},rs={class:"flex items-center justify-between"},os={class:"flex justify-end gap-2"},ds={key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},is={class:"relative w-full max-w-xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},ns={class:"flex items-center justify-between"},us={class:"flex justify-end gap-2"},gs={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},ps={class:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl dark:bg-gray-900"},vs={key:0,class:"mt-2 text-sm text-rose-600"},xs={class:"flex justify-end gap-2 mt-4"},bs=["disabled"],ws={__name:"Show",setup(ys){var Y,ee;const{props:O}=qe(),y=O.id,P=n(!0),d=n(null),z=n([]),k=n(!1),w=n(!1),h=n(!1),B=n(!1),M=n(""),D=n({budget:""}),N=n({description:""}),i=n({title:"",executor_id:"",responsible_id:"",priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null}),$e=((Y=O.auth)==null?void 0:Y.roles)||[],_=(ee=O.auth)==null?void 0:ee.user,V=$(()=>$e.includes("admin")),S=$(()=>{var l,e;return((e=(l=d.value)==null?void 0:l.company)==null?void 0:e.user_id)===(_==null?void 0:_.id)}),R=$(()=>{var l;return((l=d.value)==null?void 0:l.manager_id)===(_==null?void 0:_.id)}),A=$(()=>V.value||S.value||R.value),J=$(()=>V.value||S.value),K=$(()=>V.value||S.value||R.value),W=(l,e)=>{if(!l||!e)return"—";const u=new Date(l),p=new Date(u);return p.setDate(u.getDate()+Number(e)),Math.ceil((p-new Date)/(1e3*60*60*24))},ze=l=>l==="—"?"bg-gray-100 text-gray-600 ring-1 ring-gray-200":l>7?"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200":l>=0?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-rose-100 text-rose-700 ring-1 ring-rose-200",Me=l=>l==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":l==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",j=async()=>{P.value=!0;try{const{data:l}=await b.get(`/api/projects/${y}`);d.value=l,D.value.budget=(l==null?void 0:l.budget)??"",N.value.description=(l==null?void 0:l.description)??"";const e=await b.get(`/api/projects/${y}/employees`);z.value=e.data}finally{P.value=!1}},Ve=async()=>{const{data:l}=await b.get(`/api/projects/${y}/employees`);z.value=l},X=async()=>{if(!A.value)return alert("Недостаточно прав для создания задачи.");M.value="",await Ve(),k.value=!0},Se=l=>{i.value.files=l.target.files},Ue=async()=>{var e,u;M.value="",B.value=!0;const l=new FormData;if(l.append("title",i.value.title),l.append("executor_id",i.value.executor_id),l.append("responsible_id",i.value.responsible_id),l.append("priority",i.value.priority),l.append("start_date",i.value.start_date),l.append("due_date",i.value.due_date),l.append("project_id",y),l.append("company_id",d.value.company.id),i.value.files)for(let p=0;p<i.value.files.length;p++)l.append("files[]",i.value.files[p]);try{await b.get("/sanctum/csrf-cookie"),await b.post("/api/tasks",l,{headers:{"Content-Type":"multipart/form-data"}}),k.value=!1,i.value={title:"",executor_id:"",responsible_id:"",priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null},await j()}catch(p){M.value=((u=(e=p==null?void 0:p.response)==null?void 0:e.data)==null?void 0:u.message)||"Не удалось создать задачу"}finally{B.value=!1}},Be=async()=>{await b.patch(`/api/projects/${y}/budget`,{budget:D.value.budget}),w.value=!1,await j()},De=async()=>{await b.patch(`/api/projects/${y}/description`,{description:N.value.description}),h.value=!1,await j()},C=n({title:"",responsible_id:null}),Q=n(!1),F=n(""),Ne=async()=>{var l,e;F.value="",Q.value=!0;try{await b.get("/sanctum/csrf-cookie"),await b.post(`/api/projects/${y}/subprojects`,C.value),C.value={title:"",responsible_id:null},await j()}catch(u){F.value=((e=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:e.message)||"Не удалось создать подпроект"}finally{Q.value=!1}},q=n(!1),Z=n({name:""}),H=n(""),T=n(!1),Fe=async()=>{var l,e;T.value=!0,H.value="";try{await b.patch(`/api/projects/${y}/name`,{name:Z.value.name}),q.value=!1,await j()}catch(u){H.value=((e=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:e.message)||"Ошибка при обновлении названия"}finally{T.value=!1}};return He(j),(l,e)=>{var u;return a(),r(m,null,[je(Te(Le),{title:(u=d.value)!=null&&u.name?`Проект — ${d.value.name}`:"Проект"},null,8,["title"]),je(Ie,null,{default:Ee(()=>{var p,G,te,se,le,ae,re,oe,de,ie,ne,ue,ge,pe,ve,xe,be,ye,me,fe,ce,ke;return[t("div",Oe,[e[33]||(e[33]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-fuchsia-600 opacity-90"},null,-1)),t("div",Pe,[t("div",Re,[t("div",Ae,[t("h1",Qe,o(((p=d.value)==null?void 0:p.name)??"Загрузка…"),1),t("div",Ze,[t("span",Ge,[e[25]||(e[25]=v(" Компания: ",-1)),t("b",null,o(((te=(G=d.value)==null?void 0:G.company)==null?void 0:te.name)??"—"),1)]),t("span",Je,[e[26]||(e[26]=v(" Руководитель: ",-1)),t("b",null,o(((le=(se=d.value)==null?void 0:se.manager)==null?void 0:le.name)??"—"),1)]),t("span",Ke,[e[27]||(e[27]=v(" Старт: ",-1)),t("b",null,o(((ae=d.value)==null?void 0:ae.start_date)??"—"),1)]),t("span",We,[e[28]||(e[28]=v(" Длительность: ",-1)),t("b",null,o(((re=d.value)==null?void 0:re.duration_days)??"—"),1),e[29]||(e[29]=v(" дн. ",-1))]),d.value?(a(),r("span",{key:0,class:Ce(["px-2 py-1 rounded-full bg-white text-gray-900",ze(W(d.value.start_date,d.value.duration_days))])},[e[30]||(e[30]=v(" Осталось: ",-1)),t("b",null,o(W(d.value.start_date,d.value.duration_days)),1),e[31]||(e[31]=v(" дн. ",-1))],2)):g("",!0),(oe=d.value)!=null&&oe.budget?(a(),r("span",Xe,[e[32]||(e[32]=v(" Бюджет: ",-1)),t("b",null,o(Number(d.value.budget).toLocaleString("ru-RU"))+" ₽",1)])):g("",!0)])]),t("div",Ye,[J.value?(a(),r("button",{key:0,onClick:e[0]||(e[0]=s=>w.value=!0),class:"rounded-xl bg-amber-400/90 hover:bg-amber-400 text-gray-900 px-4 py-2 font-medium"}," Бюджет ")):g("",!0),K.value?(a(),r("button",{key:1,onClick:e[1]||(e[1]=s=>h.value=!0),class:"rounded-xl bg-white text-gray-900 hover:bg-white/90 px-4 py-2 font-medium"}," Описание ")):g("",!0),A.value?(a(),r("button",{key:2,onClick:X,class:"rounded-xl bg-emerald-400/95 hover:bg-emerald-400 text-gray-900 px-4 py-2 font-medium"}," + Задача ")):g("",!0),V.value||S.value?(a(),r("button",{key:3,onClick:e[2]||(e[2]=s=>q.value=!0),class:"rounded-xl bg-blue-400/95 hover:bg-blue-500 text-white px-4 py-2 font-medium"}," Изменить ")):g("",!0)])])])]),t("div",et,[t("div",tt,[t("div",st,[t("div",lt,[t("div",at,[e[34]||(e[34]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Задачи проекта",-1)),t("div",rt," Всего: "+o(((ie=(de=d.value)==null?void 0:de.tasks)==null?void 0:ie.length)||0),1)]),P.value?(a(),r("div",ot,[(a(),r(m,null,f(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[35]||(e[35]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(ue=(ne=d.value)==null?void 0:ne.tasks)!=null&&ue.length?(a(),r("div",it,[(a(!0),r(m,null,f(d.value.tasks,s=>{var U,we,he,_e;return a(),r("div",{key:s.id,class:"group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",onClick:E=>l.$inertia.visit(`/tasks/${s.id}`)},[t("div",ut,[t("h3",gt,o(s.title),1),t("span",{class:Ce(["px-2 py-1 text-xs rounded-full ring-1",Me(s.priority)])},o(s.priority==="high"?"Высокая":s.priority==="medium"?"Средняя":"Обычная"),3)]),t("div",pt,[t("div",vt,[e[38]||(e[38]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h5V6H7v5zm0 7h5v-5H7v5zm7 0h5v-5h-5v5zM14 6v5h5V6h-5z"})],-1)),t("span",null,"С "+o(s.start_date)+" по "+o(s.due_date),1)]),t("div",xt,[e[41]||(e[41]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 12c2.2 0 4-1.79 4-4s-1.8-4-4-4-4 1.79-4 4 1.8 4 4 4zm0 2c-3.33 0-10 1.67-10 5v3h20v-3c0-3.33-6.67-5-10-5z"})],-1)),t("span",null,[e[39]||(e[39]=v("От: ",-1)),t("b",null,o(((U=s.creator)==null?void 0:U.name)??"—"),1),e[40]||(e[40]=v(" → Кому: ",-1)),t("b",null,o(((we=s.executor)==null?void 0:we.name)??"—"),1)])]),t("div",bt,[e[43]||(e[43]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2l4 7H8l4-7zm0 20l-4-7h8l-4 7zM2 12l7-4v8l-7-4zm20 0l-7 4V8l7 4z"})],-1)),t("span",null,[e[42]||(e[42]=v("Ответственный: ",-1)),t("b",null,o(((he=s.responsible)==null?void 0:he.name)??"—"),1)])])]),(_e=s.files)!=null&&_e.length?(a(),r("div",yt,[e[45]||(e[45]=t("div",{class:"text-xs font-medium text-gray-500 mb-1"},"Файлы:",-1)),t("div",mt,[(a(!0),r(m,null,f(s.files,E=>(a(),r("a",{key:E.id,href:`/storage/${E.file_path}`,target:"_blank",class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100",onClick:e[3]||(e[3]=L(()=>{},["stop"]))},[e[44]||(e[44]=t("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),v(" "+o(E.file_path.split("/").pop()),1)],8,ft))),128))])])):g("",!0)],8,nt)}),128))])):(a(),r("div",dt,[e[36]||(e[36]=t("div",{class:"mx-auto w-14 h-14 rounded-2xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-gray-500 dark:text-gray-300",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h10v2H7zM7 7h10v2H7zM7 15h7v2H7z"})])],-1)),e[37]||(e[37]=t("p",{class:"mt-3 text-gray-700 dark:text-gray-300"},"Задач пока нет.",-1)),A.value?(a(),r("button",{key:0,onClick:X,class:"mt-4 rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700"}," Создать задачу ")):g("",!0)]))])]),t("div",ct,[t("div",kt,[e[52]||(e[52]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Кратко о проекте",-1)),t("dl",wt,[t("div",ht,[e[46]||(e[46]=t("dt",null,"Компания",-1)),t("dd",_t,o(((pe=(ge=d.value)==null?void 0:ge.company)==null?void 0:pe.name)??"—"),1)]),t("div",jt,[e[47]||(e[47]=t("dt",null,"Инициатор",-1)),t("dd",Ct,o(((xe=(ve=d.value)==null?void 0:ve.initiator)==null?void 0:xe.name)??"—"),1)]),t("div",$t,[e[48]||(e[48]=t("dt",null,"Старт",-1)),t("dd",zt,o(((be=d.value)==null?void 0:be.start_date)??"—"),1)]),t("div",Mt,[e[49]||(e[49]=t("dt",null,"Длительность",-1)),t("dd",Vt,o(((ye=d.value)==null?void 0:ye.duration_days)??"—")+" дн.",1)]),t("div",St,[e[50]||(e[50]=t("dt",null,"Бюджет",-1)),t("dd",Ut,o((me=d.value)!=null&&me.budget?Number(d.value.budget).toLocaleString("ru-RU")+" ₽":"—"),1)])]),t("div",Bt,[e[51]||(e[51]=t("div",{class:"text-xs font-semibold text-gray-500 mb-1"},"Описание",-1)),t("p",Dt,o(((fe=d.value)==null?void 0:fe.description)||"Описание не задано."),1)])])])])]),t("div",Nt,[e[54]||(e[54]=t("h2",{class:"text-lg font-bold mb-4",style:{color:"aliceblue"}},[v("Подпроекты "),t("span",{style:{color:"red"}},"(доработка) ")],-1)),V.value||S.value||R.value?(a(),r("div",Ft,[x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>C.value.title=s),type:"text",placeholder:"Название подпроекта",class:"border p-2 rounded flex-1 dark:bg-gray-800 dark:text-white"},null,512),[[c,C.value.title]]),x(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>C.value.responsible_id=s),class:"border p-2 rounded dark:bg-gray-800 dark:text-white"},[e[53]||(e[53]=t("option",{value:null},"--Без ответственного--",-1)),(a(!0),r(m,null,f(z.value,s=>(a(),r("option",{key:s.id,value:s.id},o(s.name),9,qt))),128))],512),[[I,C.value.responsible_id]]),t("button",{disabled:"",onClick:Ne,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},o(Q.value?"Создаём...":"Добавить подпроект"),9,Ht)])):g("",!0),F.value?(a(),r("p",Tt,o(F.value),1)):g("",!0),(ke=(ce=d.value)==null?void 0:ce.subprojects)!=null&&ke.length?(a(),r("ul",Et,[(a(!0),r(m,null,f(d.value.subprojects,s=>{var U;return a(),r("li",{key:s.id,class:"p-4 border rounded bg-white dark:bg-gray-800 shadow"},[t("div",Lt,[t("div",null,[t("a",{href:`/subprojects/${s.id}`,class:"text-blue-600 underline font-medium"},o(s.title),9,It),t("p",Ot," Ответственный: "+o(((U=s.responsible)==null?void 0:U.name)??"не назначен"),1)]),t("span",Pt,o(s.tasks_count??0)+" задач ",1)])])}),128))])):(a(),r("p",Rt,"Подпроектов пока нет"))]),k.value?(a(),r("div",At,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[6]||(e[6]=s=>k.value=!1)}),t("div",Qt,[t("div",Zt,[e[55]||(e[55]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Создание задачи",-1)),t("button",{onClick:e[7]||(e[7]=s=>k.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),M.value?(a(),r("p",Gt,o(M.value),1)):g("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:L(Ue,["prevent"])},[t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Название",-1)),x(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[c,i.value.title]])]),t("div",Jt,[t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Исполнитель",-1)),x(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.executor_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[57]||(e[57]=t("option",{disabled:"",value:""},"Выберите сотрудника",-1)),(a(!0),r(m,null,f(z.value,s=>(a(),r("option",{key:s.id,value:s.id},o(s.name),9,Kt))),128))],512),[[I,i.value.executor_id]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Ответственный",-1)),x(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>i.value.responsible_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[59]||(e[59]=t("option",{disabled:"",value:""},"Выберите сотрудника",-1)),(a(!0),r(m,null,f(z.value,s=>(a(),r("option",{key:s.id,value:s.id},o(s.name),9,Wt))),128))],512),[[I,i.value.responsible_id]])])]),t("div",Xt,[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Приоритет",-1)),x(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>i.value.priority=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},e[61]||(e[61]=[t("option",{value:"low"},"Обычная",-1),t("option",{value:"medium"},"Средняя",-1),t("option",{value:"high"},"Высокая",-1)]),512),[[I,i.value.priority]])]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Начало",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=s=>i.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[c,i.value.start_date]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Окончание",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[13]||(e[13]=s=>i.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[c,i.value.due_date]])])]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Файлы (pdf, excel, word)",-1)),t("input",{type:"file",multiple:"",onChange:Se,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},null,32)]),t("div",Yt,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>k.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),t("button",{type:"submit",disabled:B.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[B.value?(a(),r("span",ss,"Сохраняю…")):(a(),r("span",ts,"Создать"))],8,es)])],32)])])):g("",!0),w.value&&J.value?(a(),r("div",ls,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[15]||(e[15]=s=>w.value=!1)}),t("div",as,[t("div",rs,[e[66]||(e[66]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Установить бюджет",-1)),t("button",{onClick:e[16]||(e[16]=s=>w.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),t("form",{class:"mt-4 space-y-4",onSubmit:L(Be,["prevent"])},[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Сумма (₽)",-1)),x(t("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[17]||(e[17]=s=>D.value.budget=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[c,D.value.budget]])]),t("div",os,[t("button",{type:"button",onClick:e[18]||(e[18]=s=>w.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),e[68]||(e[68]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-amber-600 text-white hover:bg-amber-700"},"Сохранить",-1))])],32)])])):g("",!0),h.value&&K.value?(a(),r("div",ds,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[19]||(e[19]=s=>h.value=!1)}),t("div",is,[t("div",ns,[e[69]||(e[69]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Описание проекта",-1)),t("button",{onClick:e[20]||(e[20]=s=>h.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),t("form",{class:"mt-4 space-y-4",onSubmit:L(De,["prevent"])},[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Описание",-1)),x(t("textarea",{rows:"6","onUpdate:modelValue":e[21]||(e[21]=s=>N.value.description=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[c,N.value.description]])]),t("div",us,[t("button",{type:"button",onClick:e[22]||(e[22]=s=>h.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),e[71]||(e[71]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700"},"Сохранить",-1))])],32)])])):g("",!0),q.value?(a(),r("div",gs,[t("div",ps,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"Изменить название проекта",-1)),x(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>Z.value.name=s),type:"text",class:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800 dark:text-white"},null,512),[[c,Z.value.name]]),H.value?(a(),r("p",vs,o(H.value),1)):g("",!0),t("div",xs,[t("button",{onClick:e[24]||(e[24]=s=>q.value=!1),class:"px-4 py-2 rounded bg-gray-500 text-white"},"Отмена"),t("button",{onClick:Fe,disabled:T.value,class:"px-4 py-2 rounded bg-blue-600 text-white"},o(T.value?"Сохраняю…":"Сохранить"),9,bs)])])])):g("",!0)]}),_:1})],64)}}};export{ws as default};
