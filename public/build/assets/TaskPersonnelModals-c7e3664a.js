import{h as f,o as l,a,b as t,t as i,w as x,P as c,F as r,d as u,g as b,l as w,f as h}from"./app-76fc43c1.js";const p={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},$={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},C={class:"font-bold mb-4 dark:text-white"},j=["value"],I=["value"],V={class:"flex justify-end gap-2"},E={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},z={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},U={class:"font-bold mb-4 dark:text-white"},B={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},M=["value"],N={class:"flex justify-end gap-2"},A={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},D={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},F=["value"],O={class:"flex justify-end gap-2"},P={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},R={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-4xl shadow-xl"},S={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},T={class:"font-bold mb-2 capitalize dark:text-gray-300"},W={class:"text-sm dark:text-white"},L=["onClick"],q={class:"flex justify-end mt-4"},J={__name:"TaskPersonnelModals",props:{modals:Object,task:Object,employees:Array},emits:["close","change","add","remove"],setup(d,{emit:y}){const g=y,o=f({oldId:"",newId:"",ids:[],singleId:null}),v=n=>g("change",{type:n,...o.value}),k=n=>g("add",{type:n,ids:o.value.ids,singleId:o.value.singleId});return(n,s)=>(l(),a(r,null,[d.modals.executor||d.modals.responsible?(l(),a("div",p,[t("div",$,[t("h3",C,"Сменить "+i(d.modals.executor?"Исполнителя":"Ответственного"),1),s[11]||(s[11]=t("label",{class:"text-xs text-gray-500"},"Кого заменить",-1)),x(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.oldId=e),class:"w-full border rounded p-2 mb-3 dark:bg-gray-700 dark:text-white"},[(l(!0),a(r,null,u(d.modals.executor?d.task.executors:d.task.responsibles,e=>(l(),a("option",{key:e.id,value:e.id},i(e.name),9,j))),128))],512),[[c,o.value.oldId]]),s[12]||(s[12]=t("label",{class:"text-xs text-gray-500"},"На кого",-1)),x(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.newId=e),class:"w-full border rounded p-2 mb-4 dark:bg-gray-700 dark:text-white"},[(l(!0),a(r,null,u(d.employees,e=>(l(),a("option",{key:e.id,value:e.id},i(e.name),9,I))),128))],512),[[c,o.value.newId]]),t("div",V,[t("button",{onClick:s[2]||(s[2]=e=>n.$emit("close",d.modals.executor?"executor":"responsible")),class:"px-3 py-2 bg-gray-200 rounded"},"Отмена"),t("button",{onClick:s[3]||(s[3]=e=>v(d.modals.executor?"executor":"responsible")),class:"px-3 py-2 bg-blue-600 text-white rounded"},"Сохранить")])])])):b("",!0),d.modals.addExecutor||d.modals.addResponsible?(l(),a("div",E,[t("div",z,[t("h3",U,"Добавить "+i(d.modals.addExecutor?"Исполнителей":"Ответственных"),1),t("div",B,[(l(!0),a(r,null,u(d.employees,e=>(l(),a("label",{key:e.id,class:"flex items-center gap-2 dark:text-white"},[x(t("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":s[4]||(s[4]=m=>o.value.ids=m)},null,8,M),[[w,o.value.ids]]),h(" "+i(e.name),1)]))),128))]),t("div",N,[t("button",{onClick:s[5]||(s[5]=e=>n.$emit("close",d.modals.addExecutor?"addExecutor":"addResponsible")),class:"px-3 py-2 bg-gray-200 rounded"},"Отмена"),t("button",{onClick:s[6]||(s[6]=e=>k(d.modals.addExecutor?"executor":"responsible")),class:"px-3 py-2 bg-emerald-600 text-white rounded"},"Добавить")])])])):b("",!0),d.modals.addWatcher?(l(),a("div",A,[t("div",D,[s[13]||(s[13]=t("h3",{class:"font-bold mb-4 dark:text-white"},"Добавить Наблюдателя",-1)),x(t("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>o.value.singleId=e),class:"w-full border rounded p-2 mb-4 dark:bg-gray-700 dark:text-white"},[(l(!0),a(r,null,u(d.employees,e=>(l(),a("option",{key:e.id,value:e.id},i(e.name),9,F))),128))],512),[[c,o.value.singleId]]),t("div",O,[t("button",{onClick:s[8]||(s[8]=e=>n.$emit("close","addWatcher")),class:"px-3 py-2 bg-gray-200 rounded"},"Отмена"),t("button",{onClick:s[9]||(s[9]=e=>k("watcher")),class:"px-3 py-2 bg-purple-600 text-white rounded"},"Добавить")])])])):b("",!0),d.modals.manage?(l(),a("div",P,[t("div",R,[s[14]||(s[14]=t("h3",{class:"font-bold mb-4 dark:text-white"},"Управление участниками",-1)),t("div",S,[(l(),a(r,null,u(["executors","responsibles","watcherstask"],e=>t("div",{key:e},[t("h4",T,i(e==="watcherstask"?"Наблюдатели":e),1),(l(!0),a(r,null,u(d.task[e],m=>(l(),a("div",{key:m.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-1"},[t("span",W,i(m.name),1),t("button",{onClick:G=>n.$emit("remove",{role:e,id:m.id}),class:"text-red-500 text-xs"},"Удалить",8,L)]))),128))])),64))]),t("div",q,[t("button",{onClick:s[10]||(s[10]=e=>n.$emit("close","manage")),class:"px-4 py-2 bg-gray-500 text-white rounded"},"Закрыть")])])])):b("",!0)],64))}};export{J as default};
