import{Q as et,r as u,m as j,q as tt,o as l,f as d,a as Ee,u as st,w as at,F as f,i as b,Z as lt,b as t,t as o,d as x,x as c,g as p,n as te,e as Z,j as m,v as U,k as Fe,s as D}from"./app-6b36569a.js";import{_ as dt}from"./AuthenticatedLayout-b3e85e9f.js";import"./ApplicationLogo-55f42791.js";import"./_plugin-vue_export-helper-c27b6911.js";const rt={class:"relative overflow-hidden"},ot={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-white"},it={class:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between"},nt={class:"flex-1"},ut={class:"text-2xl sm:text-3xl font-semibold"},gt={class:"mt-3 flex flex-wrap items-center gap-2 text-sm"},pt={class:"px-2 py-1 rounded-full bg-white/20"},vt={key:0,class:"px-2 py-1 rounded-full bg-white/20"},xt={key:1,class:"px-2 py-1 rounded-full bg-white/20"},bt={class:"px-2 py-1 rounded-full bg-white/20"},mt={class:"px-2 py-1 rounded-full bg-white/20"},yt={key:3,class:"px-2 py-1 rounded-full bg-white/20"},ft={class:"flex flex-col sm:items-end gap-3"},ct={class:"flex flex-wrap justify-end gap-2"},wt={class:"flex flex-wrap justify-end gap-2 text-sm"},kt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},ht={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},_t={class:"lg:col-span-2"},jt={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ct={class:"flex items-center justify-between mb-3"},Mt={class:"text-sm text-gray-500 dark:text-gray-400"},$t={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},zt={key:1,class:"text-center py-10"},Vt={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ut=["onClick"],Bt={class:"flex items-start justify-between gap-3"},Dt={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},St={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},Nt={class:"flex items-center gap-2"},Et={class:"flex items-center gap-2"},Ft={key:0},Ht={key:1},Tt={class:"flex items-center gap-2"},qt={key:0},Lt={key:1},Rt={key:0,class:"mt-3 pt-3 border-t"},Wt={class:"flex flex-wrap gap-2"},At=["href"],It={class:"space-y-4"},Ot={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Pt={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},Qt={class:"flex justify-between"},Zt={class:"font-medium text-gray-900 dark:text-white"},Gt={class:"flex justify-between"},Jt={class:"font-medium"},Kt={class:"flex justify-between"},Xt={class:"font-medium"},Yt={class:"flex justify-between"},es={class:"font-medium"},ts={class:"flex justify-between"},ss={class:"font-medium"},as={class:"mt-4"},ls={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line"},ds={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},rs={class:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},os={class:"flex items-center justify-between"},is={key:0,class:"mt-3 text-sm text-rose-600"},ns={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},us={class:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-xl bg-white dark:bg-gray-700"},gs=["id","value"],ps=["for"],vs={class:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-xl bg-white dark:bg-gray-700"},xs=["id","value"],bs=["for"],ms={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ys={class:"flex justify-end gap-2 pt-2"},fs=["disabled"],cs={key:0},ws={key:1},ks={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},hs={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},_s={class:"flex items-center justify-between"},js={class:"flex justify-end gap-2"},Cs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ms={class:"relative w-full max-w-xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},$s={class:"flex items-center justify-between"},zs={class:"flex justify-end gap-2"},Vs={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},Us={class:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl dark:bg-gray-900"},Bs={key:0,class:"mt-2 text-sm text-rose-600"},Ds={class:"flex justify-end gap-2 mt-4"},Ss=["disabled"],Ns={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Es={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md"},Fs=["value"],Hs={key:0,class:"text-red-500 text-sm mt-2"},Ts={class:"flex justify-end gap-2 mt-5"},qs=["disabled"],Ls={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Rs={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md"},Ws=["value"],As=["value"],Is={key:0,class:"text-red-500 text-sm mt-2"},Os={class:"flex justify-end gap-2 mt-5"},Ps=["disabled"],Qs={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Zs={class:"bg-white dark:bg-gray-800 p-6 rounded-xl w-full max-w-md"},Gs=["value"],Js={class:"flex justify-end gap-2"},sa={__name:"Show",setup(Ks){var re,oe;const{props:G}=et(),y=G.id,J=u(!0),r=u(null),k=u([]),C=u(!1),M=u(!1),$=u(!1),S=u(!1),B=u(""),N=u({budget:""}),E=u({description:""}),v=u({title:"",executor_ids:[],responsible_ids:[],priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null}),He=((re=G.auth)==null?void 0:re.roles)||[],n=(oe=G.auth)==null?void 0:oe.user;j(()=>He.includes("admin"));const Te=j(()=>{var a,e;return((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)===(n==null?void 0:n.id)});j(()=>{var a,e;return(e=(a=r.value)==null?void 0:a.managers)==null?void 0:e.some(i=>i.id===(n==null?void 0:n.id))});const K=j(()=>{var a,e,i,g;return(n==null?void 0:n.id)===((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)||((g=(i=r.value)==null?void 0:i.managers)==null?void 0:g.some(w=>w.id===(n==null?void 0:n.id)))}),qe=j(()=>{var a,e,i,g;return(n==null?void 0:n.id)===((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)||((g=(i=r.value)==null?void 0:i.managers)==null?void 0:g.some(w=>w.id===(n==null?void 0:n.id)))}),se=j(()=>{var a,e;return(n==null?void 0:n.id)===((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)}),ae=j(()=>{var a,e,i,g;return(n==null?void 0:n.id)===((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)||((g=(i=r.value)==null?void 0:i.managers)==null?void 0:g.some(w=>w.id===(n==null?void 0:n.id)))}),X=j(()=>{var a,e;return(n==null?void 0:n.id)===((e=(a=r.value)==null?void 0:a.company)==null?void 0:e.user_id)}),le=(a,e)=>{if(!a||!e)return"‚Äî";const i=new Date(a),g=new Date(i);return g.setDate(i.getDate()+Number(e)),Math.ceil((g-new Date)/(1e3*60*60*24))},Le=a=>a==="‚Äî"?"bg-gray-100 text-gray-600 ring-1 ring-gray-200":a>7?"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200":a>=0?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-rose-100 text-rose-700 ring-1 ring-rose-200",Re=a=>a==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":a==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",h=async()=>{J.value=!0;try{const{data:a}=await b.get(`/api/projects/${y}`);r.value=a,N.value.budget=(a==null?void 0:a.budget)??"",E.value.description=(a==null?void 0:a.description)??"";const e=await b.get(`/api/projects/${y}/employees`);k.value=e.data}finally{J.value=!1}},Y=async()=>{const{data:a}=await b.get(`/api/projects/${y}/employees`);k.value=a},de=async()=>{if(!K.value)return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏.");B.value="",await Y(),C.value=!0},We=a=>{v.value.files=a.target.files},Ae=async()=>{var e,i;B.value="",S.value=!0;const a=new FormData;if(a.append("title",v.value.title),v.value.executor_ids.forEach(g=>a.append("executor_ids[]",g)),v.value.responsible_ids.forEach(g=>a.append("responsible_ids[]",g)),a.append("priority",v.value.priority),a.append("start_date",v.value.start_date),a.append("due_date",v.value.due_date),a.append("project_id",y),a.append("company_id",r.value.company.id),v.value.files)for(let g=0;g<v.value.files.length;g++)a.append("files[]",v.value.files[g]);try{await b.get("/sanctum/csrf-cookie"),await b.post("/api/tasks",a,{headers:{"Content-Type":"multipart/form-data"}}),C.value=!1,v.value={title:"",executor_id:"",responsible_id:"",priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null},await h()}catch(g){B.value=((i=(e=g==null?void 0:g.response)==null?void 0:e.data)==null?void 0:i.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É"}finally{S.value=!1}},Ie=async()=>{await b.patch(`/api/projects/${y}/budget`,{budget:N.value.budget}),M.value=!1,await h()},Oe=async()=>{await b.patch(`/api/projects/${y}/description`,{description:E.value.description}),$.value=!1,await h()};u({title:"",responsible_id:null}),u(!1),u("");const F=u(!1),ee=u({name:""}),H=u(""),T=u(!1),Pe=async()=>{var a,e;T.value=!0,H.value="";try{await b.patch(`/api/projects/${y}/name`,{name:ee.value.name}),F.value=!1,await h()}catch(i){H.value=((e=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è"}finally{T.value=!1}},q=u(!1),L=u({user_id:null}),R=u(""),W=u(!1),Qe=async()=>{await Y(),q.value=!0},Ze=async()=>{var a,e;R.value="",W.value=!0;try{await b.post(`/api/projects/${y}/add-manager`,L.value),q.value=!1,L.value={user_id:null},await h()}catch(i){R.value=((e=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è"}finally{W.value=!1}},A=u(!1),z=u({old_manager_id:null,new_manager_id:null}),I=u(""),O=u(!1),Ge=async()=>{await Y(),A.value=!0},Je=async()=>{var a,e;I.value="",O.value=!0;try{await b.post(`/api/projects/${y}/replace-manager`,z.value),A.value=!1,z.value={old_manager_id:null,new_manager_id:null},await h()}catch(i){I.value=((e=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è"}finally{O.value=!1}},Ke=async()=>{var a,e;if(confirm("–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø–æ–¥–∑–∞–¥–∞—á–∏?"))try{await b.delete(`/api/projects/${y}`,{withCredentials:!0}),alert("–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω."),window.location.href="/"}catch(i){alert(((e=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞")}},P=u(!1),Q=u(null),Xe=async()=>{const{data:a}=await b.get(`/api/projects/${y}/employees`);k.value=a.filter(e=>e.id!==r.value.company.user_id),P.value=!0},Ye=async()=>{Q.value&&(await b.post(`/api/projects/${y}/watchers`,{user_id:Q.value}),P.value=!1,await h())};return tt(h),(a,e)=>{var i;return l(),d(f,null,[Ee(st(lt),{title:(i=r.value)!=null&&i.name?`–ü—Ä–æ–µ–∫—Ç ‚Äî ${r.value.name}`:"–ü—Ä–æ–µ–∫—Ç"},null,8,["title"]),Ee(dt,null,{default:at(()=>{var g,w,ie,ne,ue,ge,pe,ve,xe,be,me,ye,fe,ce,we,ke,he,_e,je,Ce,Me,$e,ze,Ve,Ue,Be;return[t("div",rt,[e[41]||(e[41]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-fuchsia-600 opacity-90"},null,-1)),t("div",ot,[t("div",it,[t("div",nt,[t("h1",ut,o(((g=r.value)==null?void 0:g.name)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),t("div",gt,[t("span",pt,[e[30]||(e[30]=x(" –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),t("b",null,o(((ie=(w=r.value)==null?void 0:w.company)==null?void 0:ie.name)??"‚Äî"),1)]),(l(!0),d(f,null,c(((ne=r.value)==null?void 0:ne.managers)||[],s=>(l(),d("span",{key:s.id,class:"px-2 py-1 rounded-full bg-white/20"},[e[31]||(e[31]=x(" –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å: ",-1)),t("b",null,o(s.name),1)]))),128)),(ge=(ue=r.value)==null?void 0:ue.managers)!=null&&ge.length?p("",!0):(l(),d("span",vt,e[32]||(e[32]=[x(" –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏: ",-1),t("b",null,"‚Äî",-1)]))),(l(!0),d(f,null,c(((pe=r.value)==null?void 0:pe.watchers)||[],s=>(l(),d("span",{key:s.id,class:"px-2 py-1 rounded-full bg-white/20"},[e[33]||(e[33]=x(" –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å: ",-1)),t("b",null,o(s.name),1)]))),128)),(xe=(ve=r.value)==null?void 0:ve.watchers)!=null&&xe.length?p("",!0):(l(),d("span",xt,e[34]||(e[34]=[x(" –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1),t("b",null,"‚Äî",-1)]))),t("span",bt,[e[35]||(e[35]=x(" –°—Ç–∞—Ä—Ç: ",-1)),t("b",null,o(((be=r.value)==null?void 0:be.start_date)??"‚Äî"),1)]),t("span",mt,[e[36]||(e[36]=x(" –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ",-1)),t("b",null,o(((me=r.value)==null?void 0:me.duration_days)??"‚Äî"),1),e[37]||(e[37]=x(" –¥–Ω. ",-1))]),r.value?(l(),d("span",{key:2,class:te(["px-2 py-1 rounded-full bg-white text-gray-900",Le(le(r.value.start_date,r.value.duration_days))])},[e[38]||(e[38]=x(" –û—Å—Ç–∞–ª–æ—Å—å: ",-1)),t("b",null,o(le(r.value.start_date,r.value.duration_days)),1),e[39]||(e[39]=x(" –¥–Ω. ",-1))],2)):p("",!0),(ye=r.value)!=null&&ye.budget?(l(),d("span",yt,[e[40]||(e[40]=x(" –ë—é–¥–∂–µ—Ç: ",-1)),t("b",null,o(Number(r.value.budget).toLocaleString("ru-RU"))+" ‚ÇΩ",1)])):p("",!0)])]),t("div",ft,[t("div",ct,[K.value?(l(),d("button",{key:0,onClick:de,class:"rounded-xl bg-emerald-400 hover:bg-emerald-500 text-gray-900 px-4 py-2 font-medium shadow-sm"}," + –ó–∞–¥–∞—á–∞ ")):p("",!0),qe.value?(l(),d("button",{key:1,onClick:e[0]||(e[0]=s=>F.value=!0),class:"rounded-xl bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 font-medium shadow-sm"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ ")):p("",!0),Te.value?(l(),d("button",{key:2,onClick:Ke,class:"rounded-xl bg-rose-500 hover:bg-rose-600 text-white px-4 py-2 font-medium shadow-sm"}," üóë –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç ")):p("",!0)]),t("div",wt,[se.value?(l(),d("button",{key:0,onClick:e[1]||(e[1]=s=>M.value=!0),class:"rounded-xl bg-amber-400/90 hover:bg-amber-500 text-gray-900 px-3 py-1.5"}," üí∞ –ë—é–¥–∂–µ—Ç ")):p("",!0),ae.value?(l(),d("button",{key:1,onClick:e[2]||(e[2]=s=>$.value=!0),class:"rounded-xl bg-white/90 hover:bg-white text-gray-900 px-3 py-1.5"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ ")):p("",!0),X.value?(l(),d("button",{key:2,onClick:Qe,class:"rounded-xl bg-emerald-500/90 hover:bg-emerald-600 text-white px-3 py-1.5"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è ")):p("",!0),X.value&&(((ce=(fe=r.value)==null?void 0:fe.managers)==null?void 0:ce.length)||0)>0?(l(),d("button",{key:3,onClick:Ge,class:"rounded-xl bg-amber-500/90 hover:bg-amber-600 text-white px-3 py-1.5"}," üîÑ –ò–∑–º–µ–Ω–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è ")):p("",!0),X.value?(l(),d("button",{key:4,onClick:Xe,class:"rounded-xl bg-emerald-500/90 hover:bg-emerald-600 text-white px-4 py-2 font-medium"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è ")):p("",!0)])])])])]),t("div",kt,[t("div",ht,[t("div",_t,[t("div",jt,[t("div",Ct,[e[42]||(e[42]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞",-1)),t("div",Mt," –í—Å–µ–≥–æ: "+o(((ke=(we=r.value)==null?void 0:we.tasks)==null?void 0:ke.length)||0),1)]),J.value?(l(),d("div",$t,[(l(),d(f,null,c(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[43]||(e[43]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(_e=(he=r.value)==null?void 0:he.tasks)!=null&&_e.length?(l(),d("div",Vt,[(l(!0),d(f,null,c(r.value.tasks,s=>{var V,De,Se,Ne;return l(),d("div",{key:s.id,onClick:_=>a.$inertia.visit(`/tasks/${s.id}`),class:te(["group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",[s.progress===100?"border-emerald-500 ring-1 ring-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":s.progress>=50?"border-amber-400 ring-1 ring-amber-300 bg-amber-50 dark:bg-amber-900/20":"border-gray-400 ring-1 ring-gray-300 bg-gray-50 dark:bg-rose-900/20"]])},[t("div",Bt,[t("h3",Dt,o(s.title),1),t("span",{class:te(["px-2 py-1 text-xs rounded-full ring-1",Re(s.priority)])},o(s.priority==="high"?"–í—ã—Å–æ–∫–∞—è":s.priority==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è"),3)]),t("div",St,[t("div",Nt,[e[46]||(e[46]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h5V6H7v5zm0 7h5v-5H7v5zm7 0h5v-5h-5v5zM14 6v5h5V6h-5z"})],-1)),t("span",null,"–° "+o(s.start_date)+" –ø–æ "+o(s.due_date),1)]),t("div",Et,[e[49]||(e[49]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 12c2.2 0 4-1.79 4-4s-1.8-4-4-4-4 1.79-4 4 1.8 4 4 4zm0 2c-3.33 0-10 1.67-10 5v3h20v-3c0-3.33-6.67-5-10-5z"})],-1)),t("span",null,[e[47]||(e[47]=x(" –û—Ç: ",-1)),t("b",null,o(((V=s.creator)==null?void 0:V.name)??"‚Äî"),1),e[48]||(e[48]=x(" ‚Üí –ö–æ–º—É: ",-1)),(De=s.executors)!=null&&De.length?(l(),d("b",Ft,o(s.executors.map(_=>_.name).join(", ")),1)):(l(),d("b",Ht,"‚Äî"))])]),t("div",Tt,[e[51]||(e[51]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2l4 7H8l4-7zm0 20l-4-7h8l-4 7zM2 12l7-4v8l-7-4zm20 0l-7 4V8l7 4z"})],-1)),t("span",null,[e[50]||(e[50]=x(" –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ: ",-1)),(Se=s.responsibles)!=null&&Se.length?(l(),d("b",qt,o(s.responsibles.map(_=>_.name).join(", ")),1)):(l(),d("b",Lt,"‚Äî"))]),e[52]||(e[52]=x()),e[53]||(e[53]=t("br",null,null,-1))]),t("span",null,"–≤—ã–ø–æ–ª–Ω–µ–Ω–æ: "+o(s.progress)+"%",1)]),(Ne=s.files)!=null&&Ne.length?(l(),d("div",Rt,[e[55]||(e[55]=t("div",{class:"text-xs font-medium text-gray-500 mb-1"},"–§–∞–π–ª—ã:",-1)),t("div",Wt,[(l(!0),d(f,null,c(s.files,_=>(l(),d("a",{key:_.id,href:`/storage/${_.file_path}`,target:"_blank",class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100",onClick:e[3]||(e[3]=Z(()=>{},["stop"]))},[e[54]||(e[54]=t("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),x(" "+o(_.file_path.split("/").pop()),1)],8,At))),128))])])):p("",!0)],10,Ut)}),128))])):(l(),d("div",zt,[e[44]||(e[44]=t("div",{class:"mx-auto w-14 h-14 rounded-2xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-gray-500 dark:text-gray-300",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h10v2H7zM7 7h10v2H7zM7 15h7v2H7z"})])],-1)),e[45]||(e[45]=t("p",{class:"mt-3 text-gray-700 dark:text-gray-300"},"–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç.",-1)),K.value?(l(),d("button",{key:0,onClick:de,class:"mt-4 rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700"}," –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É ")):p("",!0)]))])]),t("div",It,[t("div",Ot,[e[62]||(e[62]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –ø—Ä–æ–µ–∫—Ç–µ",-1)),t("dl",Pt,[t("div",Qt,[e[56]||(e[56]=t("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),t("dd",Zt,o(((Ce=(je=r.value)==null?void 0:je.company)==null?void 0:Ce.name)??"‚Äî"),1)]),t("div",Gt,[e[57]||(e[57]=t("dt",null,"–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä",-1)),t("dd",Jt,o((($e=(Me=r.value)==null?void 0:Me.initiator)==null?void 0:$e.name)??"‚Äî"),1)]),t("div",Kt,[e[58]||(e[58]=t("dt",null,"–°—Ç–∞—Ä—Ç",-1)),t("dd",Xt,o(((ze=r.value)==null?void 0:ze.start_date)??"‚Äî"),1)]),t("div",Yt,[e[59]||(e[59]=t("dt",null,"–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",-1)),t("dd",es,o(((Ve=r.value)==null?void 0:Ve.duration_days)??"‚Äî")+" –¥–Ω.",1)]),t("div",ts,[e[60]||(e[60]=t("dt",null,"–ë—é–¥–∂–µ—Ç",-1)),t("dd",ss,o((Ue=r.value)!=null&&Ue.budget?Number(r.value.budget).toLocaleString("ru-RU")+" ‚ÇΩ":"‚Äî"),1)])]),t("div",as,[e[61]||(e[61]=t("div",{class:"text-xs font-semibold text-gray-500 mb-1"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",ls,o(((Be=r.value)==null?void 0:Be.description)||"–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –∑–∞–¥–∞–Ω–æ."),1)])])])])]),C.value?(l(),d("div",ds,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>C.value=!1)}),t("div",rs,[t("div",os,[e[63]||(e[63]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏",-1)),t("button",{onClick:e[5]||(e[5]=s=>C.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),B.value?(l(),d("p",is,o(B.value),1)):p("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:Z(Ae,["prevent"])},[t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>v.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[U,v.value.title]])]),t("div",ns,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),t("div",us,[(l(!0),d(f,null,c(k.value,s=>(l(),d("div",{key:s.id,class:"flex items-center space-x-2"},[m(t("input",{type:"checkbox",id:`executor-${s.id}`,value:s.id,"onUpdate:modelValue":e[7]||(e[7]=V=>v.value.executor_ids=V),class:"h-4 w-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"},null,8,gs),[[Fe,v.value.executor_ids]]),t("label",{for:`executor-${s.id}`,class:"text-sm text-gray-700 dark:text-gray-300"},o(s.name),9,ps)]))),128))])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),t("div",vs,[(l(!0),d(f,null,c(k.value,s=>(l(),d("div",{key:s.id,class:"flex items-center space-x-2"},[m(t("input",{type:"checkbox",id:`responsible-${s.id}`,value:s.id,"onUpdate:modelValue":e[8]||(e[8]=V=>v.value.responsible_ids=V),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,xs),[[Fe,v.value.responsible_ids]]),t("label",{for:`responsible-${s.id}`,class:"text-sm text-gray-700 dark:text-gray-300"},o(s.name),9,bs)]))),128))])])]),t("div",ms,[t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),m(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>v.value.priority=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},e[67]||(e[67]=[t("option",{value:"low"},"–û–±—ã—á–Ω–∞—è",-1),t("option",{value:"medium"},"–°—Ä–µ–¥–Ω—è—è",-1),t("option",{value:"high"},"–í—ã—Å–æ–∫–∞—è",-1)]),512),[[D,v.value.priority]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>v.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[U,v.value.start_date]])]),t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=s=>v.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[U,v.value.due_date]])])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–§–∞–π–ª—ã (pdf, excel, word)",-1)),t("input",{type:"file",multiple:"",onChange:We,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},null,32)]),t("div",ys,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>C.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{type:"submit",disabled:S.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[S.value?(l(),d("span",ws,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),d("span",cs,"–°–æ–∑–¥–∞—Ç—å"))],8,fs)])],32)])])):p("",!0),M.value&&se.value?(l(),d("div",ks,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[13]||(e[13]=s=>M.value=!1)}),t("div",hs,[t("div",_s,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—é–¥–∂–µ—Ç",-1)),t("button",{onClick:e[14]||(e[14]=s=>M.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),t("form",{class:"mt-4 space-y-4",onSubmit:Z(Ie,["prevent"])},[t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–°—É–º–º–∞ (‚ÇΩ)",-1)),m(t("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[15]||(e[15]=s=>N.value.budget=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[U,N.value.budget]])]),t("div",js,[t("button",{type:"button",onClick:e[16]||(e[16]=s=>M.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),e[74]||(e[74]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-amber-600 text-white hover:bg-amber-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):p("",!0),$.value&&ae.value?(l(),d("div",Cs,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[17]||(e[17]=s=>$.value=!1)}),t("div",Ms,[t("div",$s,[e[75]||(e[75]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",-1)),t("button",{onClick:e[18]||(e[18]=s=>$.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),t("form",{class:"mt-4 space-y-4",onSubmit:Z(Oe,["prevent"])},[t("div",null,[e[76]||(e[76]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),m(t("textarea",{rows:"6","onUpdate:modelValue":e[19]||(e[19]=s=>E.value.description=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[U,E.value.description]])]),t("div",zs,[t("button",{type:"button",onClick:e[20]||(e[20]=s=>$.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),e[77]||(e[77]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):p("",!0),F.value?(l(),d("div",Vs,[t("div",Us,[e[78]||(e[78]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",-1)),m(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>ee.value.name=s),type:"text",class:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800 dark:text-white"},null,512),[[U,ee.value.name]]),H.value?(l(),d("p",Bs,o(H.value),1)):p("",!0),t("div",Ds,[t("button",{onClick:e[22]||(e[22]=s=>F.value=!1),class:"px-4 py-2 rounded bg-gray-500 text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Pe,disabled:T.value,class:"px-4 py-2 rounded bg-blue-600 text-white"},o(T.value?"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),9,Ss)])])])):p("",!0),q.value?(l(),d("dialog",Ns,[t("div",Es,[e[80]||(e[80]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"–î–æ–±–∞–≤–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",-1)),e[81]||(e[81]=t("label",{class:"block text-sm mb-2 text-gray-700 dark:text-gray-300"},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:",-1)),m(t("select",{"onUpdate:modelValue":e[23]||(e[23]=s=>L.value.user_id=s),class:"w-full border rounded-md px-3 py-2 bg-gray-50 dark:bg-gray-700 dark:text-white"},[e[79]||(e[79]=t("option",{disabled:"",value:""},"-- –í—ã–±–µ—Ä–∏—Ç–µ --",-1)),(l(!0),d(f,null,c(k.value,s=>(l(),d("option",{key:s.id,value:s.id},o(s.name)+" ‚Äî "+o(s.email),9,Fs))),128))],512),[[D,L.value.user_id]]),R.value?(l(),d("p",Hs,o(R.value),1)):p("",!0),t("div",Ts,[t("button",{onClick:e[24]||(e[24]=s=>q.value=!1),class:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Ze,disabled:W.value,class:"px-4 py-2 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50"},o(W.value?"–î–æ–±–∞–≤–ª—è–µ–º...":"–î–æ–±–∞–≤–∏—Ç—å"),9,qs)])])])):p("",!0),A.value?(l(),d("dialog",Ls,[t("div",Rs,[e[84]||(e[84]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"–ò–∑–º–µ–Ω–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",-1)),e[85]||(e[85]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–¢–µ–∫—É—â–∏–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:",-1)),m(t("select",{"onUpdate:modelValue":e[25]||(e[25]=s=>z.value.old_manager_id=s),class:"w-full border rounded-md px-3 py-2 bg-gray-50 dark:bg-gray-700 dark:text-white mb-3"},[e[82]||(e[82]=t("option",{disabled:"",value:""},"-- –í—ã–±–µ—Ä–∏—Ç–µ --",-1)),(l(!0),d(f,null,c(r.value.managers,s=>(l(),d("option",{key:s.id,value:s.id},o(s.name),9,Ws))),128))],512),[[D,z.value.old_manager_id]]),e[86]||(e[86]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–æ–≤—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:",-1)),m(t("select",{"onUpdate:modelValue":e[26]||(e[26]=s=>z.value.new_manager_id=s),class:"w-full border rounded-md px-3 py-2 bg-gray-50 dark:bg-gray-700 dark:text-white"},[e[83]||(e[83]=t("option",{disabled:"",value:""},"-- –í—ã–±–µ—Ä–∏—Ç–µ --",-1)),(l(!0),d(f,null,c(k.value,s=>(l(),d("option",{key:s.id,value:s.id},o(s.name)+" ‚Äî "+o(s.email),9,As))),128))],512),[[D,z.value.new_manager_id]]),I.value?(l(),d("p",Is,o(I.value),1)):p("",!0),t("div",Os,[t("button",{onClick:e[27]||(e[27]=s=>A.value=!1),class:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Je,disabled:O.value,class:"px-4 py-2 rounded-md bg-amber-600 text-white hover:bg-amber-700 disabled:opacity-50"},o(O.value?"–°–æ—Ö—Ä–∞–Ω—è–µ–º...":"–ò–∑–º–µ–Ω–∏—Ç—å"),9,Ps)])])])):p("",!0),P.value?(l(),d("div",Qs,[t("div",Zs,[e[88]||(e[88]=t("h2",{class:"text-lg font-semibold mb-3"},"–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),m(t("select",{"onUpdate:modelValue":e[28]||(e[28]=s=>Q.value=s),class:"w-full border rounded p-2 mb-4"},[e[87]||(e[87]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),d(f,null,c(k.value,s=>(l(),d("option",{key:s.id,value:s.id},o(s.name),9,Gs))),128))],512),[[D,Q.value]]),t("div",Js,[t("button",{onClick:e[29]||(e[29]=s=>P.value=!1),class:"px-3 py-1 rounded bg-gray-200 dark:bg-gray-700"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Ye,class:"px-3 py-1 rounded bg-emerald-600 text-white"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):p("",!0)]}),_:1})],64)}}};export{sa as default};
