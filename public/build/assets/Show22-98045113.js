import{V as Ke,r as c,j as M,x as Le,o as r,c as d,k as Y,u as ge,H as xe,F as y,f as m,Z as Qe,a as t,t as u,E as me,b as We,d as p,e as h,h as w,K as ee,v as F,i as te}from"./app-34d1bdb8.js";import{_ as Ze}from"./AuthenticatedLayout-ac28c3bb.js";import{_ as Ge,S as Je}from"./SubtaskChecklist-a9b34cd1.js";import"./ApplicationLogo-3143801a.js";import"./_plugin-vue_export-helper-c27b6911.js";const Xe={class:"flex items-center justify-between gap-3"},Ye={class:"text-xl font-bold text-gray-800 dark:text-gray-200"},et={key:0,class:"flex items-center gap-2"},tt={class:"inline-flex items-center gap-2 text-sm px-3 py-1 rounded-full ring-1 ring-gray-200 dark:ring-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},st={key:4,class:"px-3 py-1.5 rounded-md bg-emerald-100 text-emerald-700 text-sm dark:bg-emerald-900/30 dark:text-emerald-300"},at={class:"max-w-4xl mx-auto py-8 px-4"},lt={key:0,class:"grid gap-6"},ot={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},rt={class:"grid sm:grid-cols-2 gap-4 text-sm"},dt={class:"font-medium text-gray-900 dark:text-white"},nt={class:"font-medium text-gray-900 dark:text-white"},it={class:"font-medium text-gray-900 dark:text-white"},ut={key:0,class:"flex flex-wrap gap-2 mt-4"},ct={key:0,class:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},pt={style:{"word-break":"break-all"},class:"whitespace-pre-line"},vt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},gt={class:"flex items-center justify-between mb-3"},xt={class:"text-sm text-gray-500 dark:text-gray-400"},mt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},bt={class:"font-medium text-gray-900 dark:text-white"},yt={class:"font-medium text-gray-900 dark:text-white"},kt={class:"flex mt-2 space-x-1 select-none"},ft=["title","onClick"],ht={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},wt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 mt-6"},_t={class:"flex items-center justify-between mb-3"},Ct={key:0},jt={key:0,class:"space-y-2"},$t=["href"],Et=["onClick"],Ut={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Mt={key:1,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},St={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Vt=["value"],It=["value"],Rt={key:0,class:"text-rose-600 text-sm mt-2"},zt={class:"flex justify-end gap-2 mt-4"},Dt={key:2,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Ft={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Pt={class:"space-y-4"},At={class:"max-h-40 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Nt=["value"],Tt={class:"max-h-40 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Bt=["value"],Ot={key:0,class:"text-rose-600 text-sm mt-3"},qt={class:"flex justify-end gap-2 mt-5"},Ht=["disabled"],Kt={key:0},Lt={key:1},Qt={key:3,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Wt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Zt=["value"],Gt=["value"],Jt={key:0,class:"text-rose-600 text-sm mt-2"},Xt={class:"flex justify-end gap-2 mt-4"},Yt={key:4,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},es={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},ts={class:"max-h-60 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},ss=["value"],as={class:"flex justify-end gap-2 mt-4"},ls={key:5,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},os={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},rs={class:"max-h-60 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},ds=["value"],ns={class:"flex justify-end gap-2 mt-4"},is={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},us={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-3xl shadow-xl"},cs={key:0,class:"text-sm text-rose-600 mb-3"},ps={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},vs={class:"space-y-2"},gs=["onClick"],xs={key:0,class:"text-sm text-gray-500"},ms={class:"space-y-2"},bs=["onClick"],ys={key:0,class:"text-sm text-gray-500"},ks={class:"flex justify-end mt-6"},fs={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 mt-6"},hs={class:"flex items-center justify-between mb-3"},ws={key:0,class:"space-y-2"},_s={class:"font-medium"},Cs={class:"text-xs text-gray-500 ml-2"},js=["href"],$s={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Es={"data-v-585ee726":"",class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Us={key:7,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Ms={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Ss={class:"space-y-4"},Vs={key:0,class:"text-rose-600 text-sm mt-3"},Is={class:"flex justify-end gap-2 mt-5"},Rs=["disabled"],zs={key:0},Ds={key:1},Fs={key:8,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Ps={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl w-full max-w-lg"},As={class:"mt-4 flex justify-end gap-2"},Ns={key:1,class:"text-gray-600 dark:text-gray-300"},Qs={__name:"Show22",setup(Ts){var ne;const{props:ae}=Ke(),k=ae.id,s=c(null),i=(ne=ae.auth)==null?void 0:ne.user,C=async()=>{const{data:l}=await m.get(`/api/subtasks/${k}`);s.value=l},I=M(()=>{var b,U;if(!s.value||!i)return!1;const l=((b=s.value.task)==null?void 0:b.project)||{},e=(s.value.executors||[]).some(g=>g.id===i.id),o=(s.value.responsibles||[]).some(g=>g.id===i.id),n=(l.executors||[]).some(g=>g.id===i.id),v=(l.managers||[]).some(g=>g.id===i.id),x=((U=l.company)==null?void 0:U.user_id)===i.id,_=s.value.creator_id===i.id;return e||o||n||v||x||_}),le=M(()=>s.value?I.value&&s.value.progress===100&&!s.value.completed:!1),be=async l=>{if(!I.value)return;const{data:e}=await m.patch(`/api/subtasks/${k}/progress`,{progress:l});s.value.progress=e.progress},ye=async()=>{if(!le.value||!confirm("–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É?"))return;const{data:l}=await m.patch(`/api/subtasks/${k}/complete`);s.value.completed=l.completed,s.value.completed_at=l.completed_at},ke=async l=>{var e,o;if(confirm("–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É?"))try{await m.delete(`/api/subtasks/${l}`,{withCredentials:!0}),alert("–ü–æ–¥–∑–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞"),window.history.back()}catch(n){alert(((o=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:o.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏")}},fe=l=>{var o,n,v,x,_;const e=i==null?void 0:i.id;return e?e===l.creator_id||e===((v=(n=(o=l.task)==null?void 0:o.project)==null?void 0:n.company)==null?void 0:v.user_id)||(((_=(x=l.task)==null?void 0:x.project)==null?void 0:_.managers)||[]).some(b=>b.id===e):!1},P=c(!1),A=c(!1),N=c(!1),T=c(!1),E=c([]);c(null);const j=c([]),he=M(()=>{var l,e,o,n,v,x,_;return!s.value||!i?!1:i.id===((o=(e=(l=s.value.task)==null?void 0:l.project)==null?void 0:e.company)==null?void 0:o.user_id)||(((v=(n=s.value.task)==null?void 0:n.project)==null?void 0:v.managers)||[]).some(b=>b.id===i.id)||(((_=(x=s.value.task)==null?void 0:x.project)==null?void 0:_.executors)||[]).some(b=>b.id===i.id)}),R=async()=>{const{data:l}=await m.get(`/api/projects/${s.value.task.project.id}/employees`);E.value=l},we=async()=>{await R(),P.value=!0},_e=async()=>{await R(),A.value=!0},Ce=async()=>{await R(),N.value=!0},je=async()=>{await R(),T.value=!0},$e=async()=>{var l,e;if(!j.value.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.");try{await m.post(`/api/subtasks/${k}/executors/add`,{user_ids:j.value}),await C(),N.value=!1,j.value=[]}catch(o){alert(((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π")}},Ee=async()=>{var l,e;if(!j.value.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.");try{await m.post(`/api/subtasks/${k}/responsibles/add`,{user_ids:j.value}),await C(),T.value=!1,j.value=[]}catch(o){alert(((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö")}},B=c(null),O=c(null),q=c(null),H=c(null),z=c(""),D=c(""),Ue=M(()=>{if(!E.value.length||!s.value)return[];const l=(s.value.executors||[]).map(e=>e.id);return E.value.filter(e=>!l.includes(e.id))}),Me=M(()=>{if(!E.value.length||!s.value)return[];const l=(s.value.responsibles||[]).map(e=>e.id);return E.value.filter(e=>!l.includes(e.id))}),Se=async()=>{var l,e;if(z.value="",!B.value||!O.value){z.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await m.patch(`/api/subtasks/${k}/executor/change`,{replace_user_id:B.value,user_id:O.value}),P.value=!1,await C()}catch(o){z.value=((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Ve=async()=>{var l,e;if(D.value="",!q.value||!H.value){D.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await m.patch(`/api/subtasks/${k}/responsible/change`,{replace_user_id:q.value,user_id:H.value}),A.value=!1,await C()}catch(o){D.value=((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},se=c(!1),V=c(""),Ie=async l=>{var e,o;V.value="";try{await m.delete(`/api/subtasks/${k}/executors`,{data:{user_id:l}}),await C()}catch(n){V.value=((o=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:o.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Re=async l=>{var e,o;V.value="";try{await m.delete(`/api/subtasks/${k}/responsibles`,{data:{user_id:l}}),await C()}catch(n){V.value=((o=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:o.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},K=c(!1),L=c(!1),Q=c(""),S=c({title:"",due_date:""}),ze=()=>{s.value&&(S.value.title=s.value.title,S.value.due_date=s.value.due_date,K.value=!0)},De=async()=>{var l,e;Q.value="",L.value=!0;try{await m.patch(`/api/subtasks/${k}/update`,S.value),await C(),K.value=!1}catch(o){Q.value=((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{L.value=!1}},oe=M(()=>{var e,o;if(!s.value||!i)return!1;const l=(e=s.value.task)==null?void 0:e.project;return i.id===s.value.creator_id||i.id===((o=l==null?void 0:l.company)==null?void 0:o.user_id)||((l==null?void 0:l.managers)||[]).some(n=>n.id===i.id)||((l==null?void 0:l.executors)||[]).some(n=>n.id===i.id)}),re=M(()=>{var e,o;if(!s.value||!i)return!1;const l=((e=s.value.task)==null?void 0:e.project)||{};return i.id===s.value.creator_id||(s.value.executors||[]).some(n=>n.id===i.id)||(s.value.responsibles||[]).some(n=>n.id===i.id)||(l.executors||[]).some(n=>n.id===i.id)||(l.managers||[]).some(n=>n.id===i.id)||((o=l.company)==null?void 0:o.user_id)===i.id}),Fe=c(null),Pe=async l=>{var n,v;const e=l.target.files[0];if(!e)return;const o=new FormData;o.append("file",e);try{await m.post(`/api/subtasks/${k}/files`,o,{headers:{"Content-Type":"multipart/form-data"}}),await C()}catch(x){alert(((v=(n=x==null?void 0:x.response)==null?void 0:n.data)==null?void 0:v.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞")}},Ae=async l=>{var e,o;if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?"))try{await m.delete(`/api/subtask-files/${l}`),await C()}catch(n){alert(((o=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:o.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞")}},W=c(!1),Z=c(!1),G=c(""),$=c({title:"",due_date:"",executor_ids:[],responsible_ids:[]}),Ne=async()=>{await R(),W.value=!0},Te=async()=>{var l,e;if(s.value){G.value="",Z.value=!0;try{await m.post(`/api/subtasks/${k}/children`,$.value),await C(),W.value=!1,$.value={title:"",due_date:"",executor_ids:[],responsible_ids:[]}}catch(o){G.value=((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{Z.value=!1}}},Be=({type:l,comment:e,id:o})=>{if(s.value.comments||(s.value.comments=[]),l==="add"&&s.value.comments.push(e),l==="update"){const n=s.value.comments.findIndex(v=>v.id===e.id);n!==-1&&(s.value.comments[n]=e)}l==="delete"&&(s.value.comments=s.value.comments.filter(n=>n.id!==o))},de=M(()=>{var b,U;if(!s.value||!i)return!1;const l=((b=s.value.task)==null?void 0:b.project)||{},e=s.value.creator_id===i.id,o=(l.managers||[]).some(g=>g.id===i.id),n=(l.executors||[]).some(g=>g.id===i.id),v=((U=l.company)==null?void 0:U.user_id)===i.id,x=(s.value.executors||[]).some(g=>g.id===i.id),_=(s.value.responsibles||[]).some(g=>g.id===i.id);return e||o||n||v||x||_}),Oe=l=>{if(s.value.checklist||(s.value.checklist=[]),l.type==="add"&&s.value.checklist.push(l.item),l.type==="toggle"){const e=s.value.checklist.find(o=>o.id===l.id);e&&(e.completed=l.completed)}l.type==="delete"&&(s.value.checklist=s.value.checklist.filter(e=>e.id!==l.id))},J=c(!1),X=c(""),qe=()=>{X.value=s.value.description||"",J.value=!0},He=async()=>{var l,e;try{const{data:o}=await m.patch(`/api/subtasks/${k}/description`,{description:X.value});s.value.description=o.description,J.value=!1}catch(o){alert(((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}};return Le(C),(l,e)=>(r(),d(y,null,[Y(ge(Qe),{title:"–ü–æ–¥–∑–∞–¥–∞—á–∞"}),Y(Ze,null,{header:xe(()=>{var o,n;return[t("div",Xe,[t("h2",Ye," –ü–æ–¥–∑–∞–¥–∞—á–∞: "+u(((o=s.value)==null?void 0:o.title)??"–ó–∞–≥—Ä—É–∑–∫–∞..."),1),s.value?(r(),d("div",et,[t("span",tt,[t("span",{class:me(["w-2 h-2 rounded-full",{"bg-red-500":(s.value.progress??0)<30,"bg-amber-500":(s.value.progress??0)>=30&&(s.value.progress??0)<70,"bg-green-500":(s.value.progress??0)>=70}])},null,2),We(" "+u(s.value.progress??0)+"% ",1)]),le.value?(r(),d("button",{key:0,onClick:ye,class:"px-3 py-1.5 rounded-md bg-emerald-600 text-white text-sm hover:bg-emerald-700"}," –ó–∞–≤–µ—Ä—à–∏—Ç—å ")):p("",!0),oe.value?(r(),d("button",{key:1,onClick:ze,class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ")):p("",!0),ge(i).id===s.value.creator_id?(r(),d("button",{key:2,onClick:qe,class:"px-3 py-1 bg-indigo-600 text-white rounded-lg mt-3"}," ‚úè –û–ø–∏—Å–∞–Ω–∏–µ ")):p("",!0),fe(s.value)?(r(),d("button",{key:3,onClick:e[0]||(e[0]=v=>ke(s.value.id)),class:"px-3 py-1 bg-rose-600 hover:bg-rose-700 text-white text-sm rounded-md"}," üóë –£–¥–∞–ª–∏—Ç—å ")):s.value.completed?(r(),d("span",st," –ó–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Ä¢ "+u(((n=s.value.completed_at)==null?void 0:n.slice(0,16))??""),1)):p("",!0)])):p("",!0)])]}),default:xe(()=>{var o,n,v,x,_,b,U,g,ie,ue,ce,pe,ve;return[t("div",at,[s.value?(r(),d("div",lt,[t("div",ot,[t("div",rt,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–ê–≤—Ç–æ—Ä",-1)),t("p",dt,u((o=s.value.creator)==null?void 0:o.name),1),e[25]||(e[25]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-4"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("p",nt,u((n=s.value.executors)!=null&&n.length?s.value.executors.map(a=>a.name).join(", "):"‚Äî"),1),e[26]||(e[26]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-4"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("p",it,u((v=s.value.responsibles)!=null&&v.length?s.value.responsibles.map(a=>a.name).join(", "):"‚Äî"),1)]),he.value?(r(),d("div",ut,[t("button",{onClick:we,class:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:_e,class:"px-3 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:Ce,class:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-white rounded-md"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:je,class:"px-3 py-1 bg-amber-500 hover:bg-amber-600 text-white rounded-md"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:e[1]||(e[1]=a=>se.value=!0),class:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg"}," üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")])):p("",!0)])]),s.value.description?(r(),d("div",ct,[e[27]||(e[27]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",pt,u(s.value.description),1)])):p("",!0),t("div",vt,[t("div",gt,[e[28]||(e[28]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),t("span",xt,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+u(s.value.progress??0)+"%",1)]),t("div",mt,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("p",bt,u(s.value.start_date),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("p",yt,u(s.value.due_date),1)])]),t("div",kt,[(r(),d(y,null,h(10,a=>{var f;return t("div",{key:a,title:a*10+"%",onClick:Bs=>I.value?be(a*10):null,class:me(["h-4 sm:h-5 flex-1 rounded transition",{"cursor-pointer hover:opacity-80":I.value,"bg-green-600":(s.value.progress??0)>=a*10,"bg-gray-200 dark:bg-gray-700":(s.value.progress??0)<a*10,"pointer-events-none opacity-60":(f=s.value)==null?void 0:f.completed}])},null,10,ft)}),64))]),I.value?p("",!0):(r(),d("p",ht," –ò–∑–º–µ–Ω—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∏ –∞–≤—Ç–æ—Ä –ø–æ–¥–∑–∞–¥–∞—á–∏. "))]),t("div",wt,[t("div",_t,[e[31]||(e[31]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"üìé –§–∞–π–ª—ã –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),re.value?(r(),d("div",Ct,[t("input",{type:"file",onChange:Pe,class:"hidden",ref_key:"fileInput",ref:Fe},null,544),t("button",{onClick:e[2]||(e[2]=a=>l.$refs.fileInput.click()),class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm"}," ‚¨ÜÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª ")])):p("",!0)]),(x=s.value.files)!=null&&x.length?(r(),d("ul",jt,[(r(!0),d(y,null,h(s.value.files,a=>(r(),d("li",{key:a.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("a",{href:`/api/subtask-files/${a.id}/download`,class:"text-blue-600 dark:text-blue-400 hover:underline"},u(a.filename),9,$t),re.value?(r(),d("button",{key:0,onClick:f=>Ae(a.id),class:"text-rose-500 hover:text-rose-700 text-sm"}," ‚ùå ",8,Et)):p("",!0)]))),128))])):(r(),d("p",Ut,"–ù–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"))]),P.value?(r(),d("div",Mt,[t("div",St,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è ",-1)),e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>B.value=a),class:"w-full border rounded-lg p-2 mb-4 dark:bg-gray-700 dark:text-white"},[e[32]||(e[32]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(r(!0),d(y,null,h(((_=s.value)==null?void 0:_.executors)||[],a=>(r(),d("option",{key:a.id,value:a.id},u(a.name),9,Vt))),128))],512),[[ee,B.value]]),e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),w(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>O.value=a),class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},[e[33]||(e[33]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(r(!0),d(y,null,h(Ue.value,a=>(r(),d("option",{key:a.id,value:a.id},u(a.name)+" ("+u(a.email)+") ",9,It))),128))],512),[[ee,O.value]]),z.value?(r(),d("p",Rt,u(z.value),1)):p("",!0),t("div",zt,[t("button",{onClick:e[5]||(e[5]=a=>P.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Se,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ")])])])):p("",!0),W.value?(r(),d("div",Dt,[t("div",Ft,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," ‚ûï –ù–æ–≤–∞—è –¥–æ—á–µ—Ä–Ω—è—è –ø–æ–¥–∑–∞–¥–∞—á–∞ ",-1)),t("div",Pt,[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞–∑–≤–∞–Ω–∏–µ ",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>$.value.title=a),type:"text",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏"},null,512),[[F,$.value.title]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è ",-1)),w(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>$.value.due_date=a),type:"date",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},null,512),[[F,$.value.due_date]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ ",-1)),t("div",At,[(r(!0),d(y,null,h(E.value,a=>(r(),d("label",{key:a.id,class:"flex items-center gap-2 py-1"},[w(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=f=>$.value.executor_ids=f),value:a.id},null,8,Nt),[[te,$.value.executor_ids]]),t("span",null,u(a.name)+" ("+u(a.email)+")",1)]))),128))])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ ",-1)),t("div",Tt,[(r(!0),d(y,null,h(E.value,a=>(r(),d("label",{key:a.id,class:"flex items-center gap-2 py-1"},[w(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=f=>$.value.responsible_ids=f),value:a.id},null,8,Bt),[[te,$.value.responsible_ids]]),t("span",null,u(a.name)+" ("+u(a.email)+")",1)]))),128))])])]),G.value?(r(),d("p",Ot,u(G.value),1)):p("",!0),t("div",qt,[t("button",{onClick:e[10]||(e[10]=a=>W.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Te,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg",disabled:Z.value},[Z.value?(r(),d("span",Lt,"–°–æ–∑–¥–∞—é...")):(r(),d("span",Kt,"–°–æ–∑–¥–∞—Ç—å"))],8,Ht)])])])):p("",!0),A.value?(r(),d("div",Qt,[t("div",Wt,[e[44]||(e[44]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ ",-1)),e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),w(t("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>q.value=a),class:"w-full border rounded-lg p-2 mb-4 dark:bg-gray-700 dark:text-white"},[e[42]||(e[42]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(r(!0),d(y,null,h(((b=s.value)==null?void 0:b.responsibles)||[],a=>(r(),d("option",{key:a.id,value:a.id},u(a.name),9,Zt))),128))],512),[[ee,q.value]]),e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),w(t("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>H.value=a),class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},[e[43]||(e[43]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(r(!0),d(y,null,h(Me.value,a=>(r(),d("option",{key:a.id,value:a.id},u(a.name)+" ("+u(a.email)+") ",9,Gt))),128))],512),[[ee,H.value]]),D.value?(r(),d("p",Jt,u(D.value),1)):p("",!0),t("div",Xt,[t("button",{onClick:e[13]||(e[13]=a=>A.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Ve,class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ")])])])):p("",!0),N.value?(r(),d("div",Yt,[t("div",es,[e[47]||(e[47]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π ",-1)),t("div",ts,[(r(!0),d(y,null,h(E.value,a=>(r(),d("label",{key:a.id,class:"flex items-center gap-2 py-1"},[w(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=f=>j.value=f),value:a.id},null,8,ss),[[te,j.value]]),t("span",null,u(a.name)+" ("+u(a.email)+")",1)]))),128))]),t("div",as,[t("button",{onClick:e[15]||(e[15]=a=>N.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:$e,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg"}," –î–æ–±–∞–≤–∏—Ç—å ")])])])):p("",!0),T.value?(r(),d("div",ls,[t("div",os,[e[48]||(e[48]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö ",-1)),t("div",rs,[(r(!0),d(y,null,h(E.value,a=>(r(),d("label",{key:a.id,class:"flex items-center gap-2 py-1"},[w(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=f=>j.value=f),value:a.id},null,8,ds),[[te,j.value]]),t("span",null,u(a.name)+" ("+u(a.email)+")",1)]))),128))]),t("div",ns,[t("button",{onClick:e[17]||(e[17]=a=>T.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Ee,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg"}," –î–æ–±–∞–≤–∏—Ç—å ")])])])):p("",!0),se.value?(r(),d("div",is,[t("div",us,[e[51]||(e[51]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ",-1)),V.value?(r(),d("p",cs,u(V.value),1)):p("",!0),t("div",ps,[t("div",null,[e[49]||(e[49]=t("h4",{class:"text-gray-800 dark:text-gray-200 font-medium mb-2"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),t("ul",vs,[(r(!0),d(y,null,h(((U=s.value)==null?void 0:U.executors)||[],a=>(r(),d("li",{key:a.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("span",null,u(a.name),1),t("button",{onClick:f=>Ie(a.id),class:"text-rose-500 hover:text-rose-700",title:"–£–¥–∞–ª–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}," ‚ùå ",8,gs)]))),128)),(ie=(g=s.value)==null?void 0:g.executors)!=null&&ie.length?p("",!0):(r(),d("li",xs,"–ù–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π"))])]),t("div",null,[e[50]||(e[50]=t("h4",{class:"text-gray-800 dark:text-gray-200 font-medium mb-2"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),t("ul",ms,[(r(!0),d(y,null,h(((ue=s.value)==null?void 0:ue.responsibles)||[],a=>(r(),d("li",{key:a.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("span",null,u(a.name),1),t("button",{onClick:f=>Re(a.id),class:"text-rose-500 hover:text-rose-700",title:"–£–¥–∞–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}," ‚ùå ",8,bs)]))),128)),(pe=(ce=s.value)==null?void 0:ce.responsibles)!=null&&pe.length?p("",!0):(r(),d("li",ys,"–ù–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö"))])])]),t("div",ks,[t("button",{onClick:e[18]||(e[18]=a=>se.value=!1),class:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):p("",!0),t("div",fs,[t("div",hs,[e[52]||(e[52]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"üß© –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),oe.value?(r(),d("button",{key:0,onClick:Ne,class:"px-3 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded-md text-sm"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ")):p("",!0)]),(ve=s.value.children)!=null&&ve.length?(r(),d("ul",ws,[(r(!0),d(y,null,h(s.value.children,a=>(r(),d("li",{key:a.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("div",null,[t("span",_s,u(a.title),1),t("span",Cs,u(a.progress??0)+"%",1)]),t("a",{href:`/subtasks/${a.id}`,class:"text-blue-600 dark:text-blue-400 hover:underline text-sm"}," –û—Ç–∫—Ä—ã—Ç—å ‚Üí ",8,js)]))),128))])):(r(),d("p",$s,"–ù–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ–¥–∑–∞–¥–∞—á"))]),t("div",Es,[Y(Ge,{"subtask-id":s.value.id,checklist:s.value.checklist,executors:s.value.executors,responsibles:s.value.responsibles,"can-write":de.value,onUpdated:Oe},null,8,["subtask-id","checklist","executors","responsibles","can-write"]),Y(Je,{"subtask-id":s.value.id,comments:s.value.comments,"can-write":de.value,members:[...s.value.executors??[],...s.value.responsibles??[]],onUpdated:Be},null,8,["subtask-id","comments","can-write","members"])]),K.value?(r(),d("div",Us,[t("div",Ms,[e[55]||(e[55]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ",-1)),t("div",Ss,[t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞–∑–≤–∞–Ω–∏–µ ",-1)),w(t("input",{required:"","onUpdate:modelValue":e[19]||(e[19]=a=>S.value.title=a),type:"text",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"},null,512),[[F,S.value.title]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è ",-1)),w(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>S.value.due_date=a),type:"date",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},null,512),[[F,S.value.due_date]])])]),Q.value?(r(),d("p",Vs,u(Q.value),1)):p("",!0),t("div",Is,[t("button",{onClick:e[21]||(e[21]=a=>K.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:De,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",disabled:L.value},[L.value?(r(),d("span",Ds,"–°–æ—Ö—Ä–∞–Ω—è—é...")):(r(),d("span",zs,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,Rs)])])])):p("",!0),J.value?(r(),d("div",Fs,[t("div",Ps,[e[56]||(e[56]=t("h3",{class:"text-lg font-semibold mb-3"},"–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),w(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>X.value=a),class:"w-full border rounded-lg px-3 py-2 dark:bg-gray-700 dark:text-white",rows:"6",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."},null,512),[[F,X.value]]),t("div",As,[t("button",{onClick:e[23]||(e[23]=a=>J.value=!1),class:"px-4 py-2 bg-gray-500 text-white rounded-lg"}," –ó–∞–∫—Ä—ã—Ç—å "),t("button",{onClick:He,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ")])])])):p("",!0)])):(r(),d("div",Ns,"–ó–∞–≥—Ä—É–∑–∫–∞..."))])]}),_:1})],64))}};export{Qs as default};
