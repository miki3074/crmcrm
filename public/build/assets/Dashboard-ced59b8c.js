import{V as E,j as N,r as d,x as D,o as s,c as u,k as a,u as i,H as I,F,f as M,Z as A,a as t,N as v,d as r,L as p,E as V,b as B,t as R,I as H}from"./app-2097a917.js";import{_ as K}from"./AuthenticatedLayout-9323830d.js";import b from"./StatCard-bbab1a7b.js";import L from"./TelegramBinding-3dcd21b8.js";import O from"./CompanySection-9e5db086.js";import P from"./ProjectsSummary-8b6ed7b5.js";import h from"./TasksSummary-9c0a3c29.js";import Q from"./SubtasksSection-7bd81c0c.js";import W from"./SearchOverlay-835d9bb4.js";import Z from"./CreateCompanyModal-7224e950.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-fb32f1dc.js";const G={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},J={class:"bg-white dark:bg-slate-900 rounded-3xl max-w-xl w-full mx-4 shadow-2xl border border-slate-200 dark:border-slate-800"},U={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center"},X={class:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex justify-between items-center"},Y={class:"mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10"},ee={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},te={class:"space-y-12"},se={class:"grid grid-cols-1 lg:grid-cols-[7fr_3fr] gap-8 items-start"},ae={class:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden"},le={class:"flex items-center border-b border-slate-100 dark:border-slate-800"},oe={key:0,class:"ml-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 px-2 py-0.5 rounded-full text-xs"},re={key:1,class:"absolute bottom-0 left-0 w-full h-[2px] bg-indigo-600 dark:bg-indigo-400"},ie={key:0,class:"ml-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full text-xs"},ne={key:1,class:"absolute bottom-0 left-0 w-full h-[2px] bg-indigo-600 dark:bg-indigo-400"},de={class:"p-6 min-h-[300px]"},ue={key:"tasks"},me={key:"subtasks"},ve={class:"h-full"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={__name:"Dashboard",setup(pe){var $,C;const{props:g}=E(),c=N(()=>{var n,e;return(e=(n=g.auth)==null?void 0:n.roles)==null?void 0:e.includes("admin")}),T=(C=($=g.auth)==null?void 0:$.user)==null?void 0:C.id,x=d([]),o=d({managing_projects:[],all_tasks:[],all_subtasks:[],due_today:[],overdue:[]}),w=d(!0);d("");const f=d(!1),_=d(!1),y=async()=>{w.value=!0;try{const[n,e]=await Promise.all([M.get("/api/companies"),M.get("/api/dashboard/summary")]);x.value=n.data,o.value=e.data}catch(n){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…",n)}finally{w.value=!1}},m=d("tasks");N(()=>g.summary.managing_projects&&g.summary.managing_projects.length>0),D(y);const z=()=>{f.value=!0},k=d(!1);return D(()=>{sessionStorage.getItem("welcome_modal_shown")||(k.value=!0,sessionStorage.setItem("welcome_modal_shown","true"))}),(n,e)=>(s(),u(F,null,[a(i(A),{title:"Ð Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÑ‚Ð¾Ð»"}),a(K,null,{default:I(()=>{var j,S;return[k.value?(s(),u("div",G,[t("div",J,[t("div",U,[e[13]||(e[13]=t("h2",{class:"text-lg font-bold"}," âš ï¸ Ð’Ð°Ð¶Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ ",-1)),t("button",{onClick:e[0]||(e[0]=l=>k.value=!1),class:"text-slate-400 hover:text-slate-600 dark:hover:text-white text-xl"}," âœ• ")]),e[14]||(e[14]=t("div",{class:"px-6 py-5 space-y-4 text-sm text-slate-600 dark:text-slate-300"},[t("p",null," ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ ÑÑ‚Ð¾Ð»Ð°. "),t("p",null," Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½ÑƒÑ‚ Ñ‚Ñ€ÑƒÐ´Ð½Ð¾ÑÑ‚Ð¸ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸ÐµÐ¹, Ð²Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ð¿Ñ€ÐµÐ¶Ð½ÐµÐ¼Ñƒ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÑƒ. "),t("p",{class:"text-xs text-slate-500 dark:text-slate-400"}," ÐœÑ‹ Ð±ÑƒÐ´ÐµÐ¼ Ñ€Ð°Ð´Ñ‹ Ð²Ð°ÑˆÐµÐ¹ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ²ÑÐ·Ð¸ â€” Ð¾Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ð°Ð¼ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð»ÑƒÑ‡ÑˆÐµ. ")],-1)),t("div",X,[t("button",{onClick:e[1]||(e[1]=l=>i(v).visit("/dashboardold")),class:"px-5 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold text-sm"}," ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° ÑÑ‚Ð°Ñ€ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ "),t("button",{onClick:e[2]||(e[2]=l=>k.value=!1),class:"px-4 py-2 rounded-xl bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 text-sm font-semibold"}," ÐŸÐ¾Ð½ÑÑ‚Ð½Ð¾ ")])])])):r("",!0),t("div",Y,[a(L,{user:i(g).auth.user},null,8,["user"]),t("div",ee,[a(b,{title:"ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ",icon:"ðŸ“…",color:"purple",onClick:e[3]||(e[3]=l=>i(v).visit("/calendar"))}),a(b,{title:"Ð¥Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ",icon:"ðŸ“‚",color:"blue",onClick:e[4]||(e[4]=l=>i(v).visit("/file-storage"))}),c.value?(s(),p(b,{key:0,title:"Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸",icon:"ðŸ‘¥",color:"indigo",onClick:e[5]||(e[5]=l=>i(v).visit("/employees"))})):r("",!0),c.value?(s(),p(b,{key:1,title:"ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹",icon:"ðŸ¤",color:"orange",onClick:e[6]||(e[6]=l=>i(v).visit("/clients"))})):r("",!0),a(b,{title:"Ð¡Ñ…ÐµÐ¼Ð°",icon:"ðŸ—ºï¸",color:"emerald",onClick:e[7]||(e[7]=l=>i(v).visit("/mapdiagram"))}),c.value?(s(),p(b,{key:2,title:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",icon:"âž•",color:"rose",onClick:e[8]||(e[8]=l=>_.value=!0)})):r("",!0)]),t("div",{class:"relative group"},[t("div",{onClick:z,class:"w-full flex items-center gap-3 px-5 py-4 bg-white/50 dark:bg-slate-900/50 backdrop-blur-xl border border-slate-200 dark:border-slate-800 rounded-2xl cursor-text hover:border-slate-300 dark:hover:border-slate-700 transition-all shadow-sm"},e[15]||(e[15]=[t("span",{class:"text-slate-400 text-xl"},"ðŸ”",-1),t("span",{class:"text-slate-400 flex-1"},"ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑÐ¼, Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ð¼ Ð¸Ð»Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð°Ð¼...",-1),t("kbd",{class:"hidden sm:inline-block px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs text-slate-500 border border-slate-200 dark:border-slate-700"},"âŒ˜K",-1)]))]),t("div",te,[a(O,{companies:x.value,"user-id":i(T),"is-admin":c.value,onRefresh:y},null,8,["companies","user-id","is-admin"]),t("div",se,[t("div",ae,[t("div",le,[t("button",{onClick:e[9]||(e[9]=l=>m.value="tasks"),class:V(["flex-1 py-4 text-sm font-bold transition-all relative outline-none",m.value==="tasks"?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50"])},[e[16]||(e[16]=B(" âœ… ÐœÐ¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸ ",-1)),(j=o.value.all_tasks)!=null&&j.length?(s(),u("span",oe,R(o.value.all_tasks.length),1)):r("",!0),m.value==="tasks"?(s(),u("div",re)):r("",!0)],2),e[18]||(e[18]=t("div",{class:"w-[1px] h-6 bg-slate-200 dark:bg-slate-700"},null,-1)),t("button",{onClick:e[10]||(e[10]=l=>m.value="subtasks"),class:V(["flex-1 py-4 text-sm font-bold transition-all relative outline-none",m.value==="subtasks"?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50"])},[e[17]||(e[17]=B(" ðŸ“‹ ÐŸÐ¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸ ",-1)),(S=o.value.all_subtasks)!=null&&S.length?(s(),u("span",ie,R(o.value.all_subtasks.length),1)):r("",!0),m.value==="subtasks"?(s(),u("div",ne)):r("",!0)],2)]),t("div",de,[a(H,{name:"fade",mode:"out-in"},{default:I(()=>[m.value==="tasks"?(s(),u("div",ue,[a(h,{tasks:o.value.all_tasks},null,8,["tasks"])])):(s(),u("div",me,[a(Q,{subtasks:o.value.all_subtasks},null,8,["subtasks"])]))]),_:1})])]),t("div",ve,[a(P,{projects:o.value.managing_projects},null,8,["projects"])])]),t("div",be,[a(h,{tasks:o.value.due_today,title:"ðŸ”” Ð¡Ñ€Ð¾ÐºÐ¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ",compact:""},null,8,["tasks"]),a(h,{tasks:o.value.overdue,title:"âš ï¸ ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾",compact:"",variant:"danger"},null,8,["tasks"])])])]),f.value?(s(),p(W,{key:1,onClose:e[11]||(e[11]=l=>f.value=!1),companies:x.value,summary:o.value},null,8,["companies","summary"])):r("",!0),_.value?(s(),p(Z,{key:2,onClose:e[12]||(e[12]=l=>_.value=!1),onCreated:y})):r("",!0)]}),_:1})],64))}},Ne=q(ge,[["__scopeId","data-v-d2e2243d"]]);export{Ne as default};
