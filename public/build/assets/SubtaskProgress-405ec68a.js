import{c as x,o as c,a as u,b as s,t as n,F as k,d as f,H as h,j as v}from"./app-6e35b499.js";const y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},_={class:"flex items-center justify-between mb-3"},w={class:"text-sm text-gray-500"},C={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-2"},B={class:"font-medium dark:text-white"},P={class:"font-medium dark:text-white"},j={class:"flex mt-2 space-x-1 select-none"},E=["onClick"],S={__name:"SubtaskProgress",props:["subtask","user"],emits:["refresh"],setup(a,{emit:g}){const d=a,m=g,o=x(()=>{const{subtask:e,user:t}=d;if(!e||!t)return!1;const r=e.creator_id===t.id,l=(e.executors||[]).some(i=>i.id===t.id),p=(e.responsibles||[]).some(i=>i.id===t.id);return r||l||p}),b=async e=>{o.value&&(await v.patch(`/api/subtasks/${d.subtask.id}/progress`,{progress:e}),m("refresh"))};return(e,t)=>(c(),u("div",y,[s("div",_,[t[0]||(t[0]=s("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"Прогресс подзадачи",-1)),s("span",w,"Выполнено "+n(a.subtask.progress??0)+"%",1)]),s("div",C,[s("div",null,[t[1]||(t[1]=s("p",{class:"text-gray-500 text-sm"},"Начало",-1)),s("p",B,n(a.subtask.start_date),1)]),s("div",null,[t[2]||(t[2]=s("p",{class:"text-gray-500 text-sm"},"Окончание",-1)),s("p",P,n(a.subtask.due_date),1)])]),s("div",j,[(c(),u(k,null,f(10,r=>s("div",{key:r,onClick:l=>o.value?b(r*10):null,class:h(["h-4 sm:h-5 flex-1 rounded transition",{"cursor-pointer hover:opacity-80":o.value,"bg-green-600":(a.subtask.progress??0)>=r*10,"bg-gray-200 dark:bg-gray-700":(a.subtask.progress??0)<r*10}])},null,10,E)),64))])]))}};export{S as default};
