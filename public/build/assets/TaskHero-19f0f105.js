import{c as m,h as R,o,a as n,b as t,f as b,t as l,H as E,g as i,m as V,M as W,O as F,F as O}from"./app-e2bfa4e1.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const A={class:"group relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mb-8 transition-all hover:shadow-2xl"},G={class:"p-6 sm:p-8"},I={class:"flex flex-col xl:flex-row gap-8"},U={class:"flex-1 min-w-0"},X={class:"flex flex-wrap items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4 font-medium"},q={class:"flex items-center gap-1"},J={class:"flex items-center gap-1"},K={class:"mb-6"},P={class:"flex flex-wrap items-start gap-3 mb-2"},Q={class:"text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight break-words hyphens-auto max-w-full"},Y={class:"flex flex-wrap gap-2 mt-3"},Z={class:"mr-1.5"},_={key:0,class:"badge bg-indigo-50 text-indigo-700 ring-1 ring-indigo-500/20"},ee={key:0,class:"relative group/desc"},te={class:"pl-4 border-l-4 border-gray-200 dark:border-gray-600 py-1"},se={class:"text-gray-600 dark:text-gray-300 whitespace-pre-line text-base leading-relaxed"},re={class:"w-full xl:w-80 flex flex-col gap-5 flex-shrink-0"},ae={key:0},oe={key:2,class:"p-3 bg-amber-50 text-amber-700 rounded-xl border border-amber-200 text-sm font-medium flex gap-2"},ne={key:3,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-100 dark:border-gray-600 text-center"},ie={class:"text-xs text-gray-500"},le={class:"grid grid-cols-2 gap-2"},de={key:1,class:"bg-gray-50 dark:bg-gray-700/30 rounded-xl p-4 border border-gray-100 dark:border-gray-700/50"},ge={class:"space-y-2"},be={class:"grid grid-cols-2 gap-2"},ce={class:"grid grid-cols-2 gap-2"},me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ue={class:"relative bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col max-h-[85vh]"},ke={class:"flex justify-between items-center px-6 py-4 border-b border-gray-100 dark:border-gray-700"},xe={class:"p-6 overflow-y-auto custom-scrollbar"},ye={class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 whitespace-pre-line leading-relaxed"},ve={class:"px-6 py-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-750 rounded-b-2xl flex justify-end"},H=140,pe={__name:"TaskHero",props:{task:Object,perms:Object},emits:["edit","delete","description","back","finish","changeExecutor","changeResponsible","addExecutor","addResponsible","addWatcher","manageMembers","startWork"],setup(r,{emit:fe}){const d=r,L=s=>s==="high"?"bg-rose-50 text-rose-600 ring-rose-500/20":s==="medium"?"bg-amber-50 text-amber-600 ring-amber-500/20":"bg-emerald-50 text-emerald-600 ring-emerald-500/20",N=s=>s==="high"?"Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ":s==="medium"?"Ð¡Ñ€ÐµÐ´Ð½ÑÑ":"ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ",c=m(()=>{var s,e;return(s=d.task)!=null&&s.completed?{text:"Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°",icon:"âœ…",class:"bg-emerald-100 text-emerald-700 ring-emerald-600/20"}:((e=d.task)==null?void 0:e.status)==="in_work"?{text:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",icon:"âš™ï¸",class:"bg-sky-100 text-sky-700 ring-sky-600/20"}:{text:"ÐÐ¾Ð²Ð°Ñ",icon:"ðŸ†•",class:"bg-gray-100 text-gray-600 ring-gray-500/20"}}),g=R(!1),u=m(()=>{var s,e;return((e=(s=d.task)==null?void 0:s.description)==null?void 0:e.length)>H}),z=m(()=>{var s;return(s=d.task)!=null&&s.description?u.value?d.task.description.slice(0,H)+"â€¦":d.task.description:""});return(s,e)=>{var k,x,y,v,p,f,h,w,$,C,M,j,B,D,T;return o(),n(O,null,[t("div",A,[e[24]||(e[24]=t("div",{class:"h-2 w-full bg-gradient-to-r from-sky-500 via-indigo-500 to-fuchsia-500"},null,-1)),t("div",G,[t("div",I,[t("div",U,[t("div",X,[t("button",{onClick:e[0]||(e[0]=a=>s.$emit("back")),class:"hover:text-indigo-600 transition flex items-center gap-1"},e[16]||(e[16]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),b(" ÐÐ°Ð·Ð°Ð´ ",-1)])),e[17]||(e[17]=t("span",{class:"text-gray-300"},"/",-1)),t("span",q," ðŸ“ "+l(((x=(k=r.task)==null?void 0:k.project)==null?void 0:x.name)||"Ð‘ÐµÐ· Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°"),1),e[18]||(e[18]=t("span",{class:"text-gray-300"},"/",-1)),t("span",J," ðŸ‘¤ "+l(((v=(y=r.task)==null?void 0:y.creator)==null?void 0:v.name)||"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹"),1)]),t("div",K,[t("div",P,[t("h1",Q,l(((p=r.task)==null?void 0:p.title)||"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..."),1)]),t("div",Y,[t("span",{class:E(["badge ring-1",c.value.class])},[t("span",Z,l(c.value.icon),1),b(" "+l(c.value.text),1)],2),t("span",{class:E(["badge ring-1",L((f=r.task)==null?void 0:f.priority)])}," âš¡ "+l(N((h=r.task)==null?void 0:h.priority)),3),(w=r.task)!=null&&w.is_watcher?(o(),n("span",_," ðŸ‘ Ð’Ñ‹ Ð½Ð°Ð±Ð»ÑŽÐ´Ð°Ñ‚ÐµÐ»ÑŒ ")):i("",!0)])]),($=r.task)!=null&&$.description?(o(),n("div",ee,[t("div",te,[e[20]||(e[20]=t("h3",{class:"text-xs font-bold uppercase text-gray-400 mb-2 tracking-wider"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),t("p",se,l(z.value),1),u.value?(o(),n("button",{key:0,onClick:e[1]||(e[1]=a=>g.value=!0),class:"mt-2 text-sm font-semibold text-indigo-600 hover:text-indigo-500 hover:underline transition-colors flex items-center gap-1"},e[19]||(e[19]=[b(" Ð§Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ ",-1),t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]))):i("",!0)])])):i("",!0)]),t("div",re,[r.perms.canManageTask?(o(),n("div",ae,[!((C=r.task)!=null&&C.completed)&&((M=r.task)==null?void 0:M.status)==="new"?(o(),n("button",{key:0,onClick:e[2]||(e[2]=a=>s.$emit("startWork",r.task.id)),class:"main-btn bg-gradient-to-r from-sky-500 to-blue-600 shadow-sky-200 dark:shadow-none hover:shadow-sky-300"}," ðŸš€ Ð’Ð·ÑÑ‚ÑŒ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ")):r.perms.canFinish&&!((j=r.task)!=null&&j.completed)?(o(),n("button",{key:1,onClick:e[3]||(e[3]=a=>s.$emit("finish")),class:"main-btn bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-200 dark:shadow-none hover:shadow-emerald-300"}," âœ… Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ ")):((B=r.task)==null?void 0:B.progress)===100&&!((D=r.task)!=null&&D.completed)?(o(),n("div",oe,e[21]||(e[21]=[b(" âš ï¸ ",-1),t("span",null,"ÐÐµÐ»ÑŒÐ·Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ: Ð·Ð°ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸.",-1)]))):i("",!0),(T=r.task)!=null&&T.completed?(o(),n("div",ne,[e[22]||(e[22]=t("div",{class:"text-emerald-600 font-bold mb-1"},"Ð—Ð°Ð´Ð°Ñ‡Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð°",-1)),t("div",ie,l(new Date(r.task.completed_at).toLocaleDateString()),1)])):i("",!0)])):i("",!0),t("div",le,[r.perms.canUpdate?(o(),n("button",{key:0,onClick:e[4]||(e[4]=a=>s.$emit("edit")),class:"btn-secondary text-blue-600 bg-blue-50 hover:bg-blue-100"}," âœï¸ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ")):i("",!0),r.perms.canDelete?(o(),n("button",{key:1,onClick:e[5]||(e[5]=a=>s.$emit("delete")),class:"btn-secondary text-rose-600 bg-rose-50 hover:bg-rose-100"}," ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ")):i("",!0),t("button",{onClick:e[6]||(e[6]=a=>s.$emit("description")),class:"col-span-2 btn-secondary text-gray-600 bg-gray-50 hover:bg-gray-100"}," ðŸ“ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ ")]),r.perms.canManageMembers?(o(),n("div",de,[e[23]||(e[23]=t("h4",{class:"text-xs font-bold uppercase text-gray-400 mb-3 tracking-wider flex items-center gap-2"},[t("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})]),b(" Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ ")],-1)),t("div",ge,[t("div",be,[t("button",{onClick:e[7]||(e[7]=a=>s.$emit("changeExecutor")),class:"btn-xs bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 shadow-sm border border-gray-200 dark:border-gray-600 hover:border-blue-400"},"ðŸ‘· Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð˜ÑÐ¿."),t("button",{onClick:e[8]||(e[8]=a=>s.$emit("changeResponsible")),class:"btn-xs bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 shadow-sm border border-gray-200 dark:border-gray-600 hover:border-indigo-400"},"ðŸ‘¨â€ðŸ’¼ Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÐžÑ‚Ð².")]),t("div",ce,[t("button",{onClick:e[9]||(e[9]=a=>s.$emit("addExecutor")),class:"btn-xs text-emerald-600 bg-emerald-50 hover:bg-emerald-100"},"âž• Ð˜ÑÐ¿."),t("button",{onClick:e[10]||(e[10]=a=>s.$emit("addResponsible")),class:"btn-xs text-teal-600 bg-teal-50 hover:bg-teal-100"},"âž• ÐžÑ‚Ð².")]),t("button",{onClick:e[11]||(e[11]=a=>s.$emit("addWatcher")),class:"w-full btn-xs text-purple-600 bg-purple-50 hover:bg-purple-100"},"ðŸ‘ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð°Ð±Ð»ÑŽÐ´Ð°Ñ‚ÐµÐ»Ñ"),t("button",{onClick:e[12]||(e[12]=a=>s.$emit("manageMembers")),class:"w-full btn-xs text-gray-600 bg-gray-100 hover:bg-gray-200 mt-1"},"âš™ï¸ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð°Ð¼Ð¸")])])):i("",!0)])])])]),V(F,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:W(()=>[g.value?(o(),n("div",me,[t("div",{class:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:e[13]||(e[13]=a=>g.value=!1)}),t("div",ue,[t("div",ke,[e[26]||(e[26]=t("h3",{class:"font-bold text-lg text-gray-800 dark:text-white"},"ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),t("button",{onClick:e[14]||(e[14]=a=>g.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition bg-gray-100 dark:bg-gray-700 rounded-full p-1"},e[25]||(e[25]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",xe,[t("div",ye,l(r.task.description),1)]),t("div",ve,[t("button",{onClick:e[15]||(e[15]=a=>g.value=!1),class:"px-5 py-2.5 rounded-xl bg-white border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition shadow-sm"}," Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ ")])])])):i("",!0)]),_:1})],64)}}},$e=S(pe,[["__scopeId","data-v-8329cf24"]]);export{$e as default};
