import{r as n,o as a,c as o,a as e,d as u,t as k,h as p,v as m,F as f,f as v}from"./app-7fd3e59a.js";const h={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 relative group"},y={class:"flex justify-between items-start mb-2"},w={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg whitespace-pre-line break-words dark:text-white"},_={key:1,class:"text-gray-400 text-sm italic"},C={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},j={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl w-full max-w-lg"},B={class:"mt-4 flex justify-end gap-2"},V={__name:"SubtaskDescription",props:["subtask","user"],emits:["refresh"],setup(s,{emit:c}){const l=s,b=c,i=n(!1),r=n(""),x=()=>{r.value=l.subtask.description||"",i.value=!0},g=async()=>{await v.patch(`/api/subtasks/${l.subtask.id}/description`,{description:r.value}),b("refresh"),i.value=!1};return(D,t)=>(a(),o(f,null,[e("div",h,[e("div",y,[t[2]||(t[2]=e("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"Описание",-1)),s.user.id===s.subtask.creator_id?(a(),o("button",{key:0,onClick:x,class:"text-blue-500 text-sm hover:underline"},"✏ Редактировать")):u("",!0)]),s.subtask.description?(a(),o("div",w,k(s.subtask.description),1)):(a(),o("p",_,"Нет описания"))]),i.value?(a(),o("div",C,[e("div",j,[t[3]||(t[3]=e("h3",{class:"text-lg font-semibold mb-3 dark:text-white"},"Описание подзадачи",-1)),p(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d),class:"w-full border rounded-lg px-3 py-2 h-40 dark:bg-gray-700 dark:text-white"},null,512),[[m,r.value]]),e("div",B,[e("button",{onClick:t[1]||(t[1]=d=>i.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"},"Закрыть"),e("button",{onClick:g,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg"},"Сохранить")])])])):u("",!0)],64))}};export{V as default};
