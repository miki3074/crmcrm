import{h as j,c as y,o as r,a as s,b as e,f as k,t as n,g,F as c,d as f,H as p,u as B,N as M,J as V}from"./app-9a2dd688.js";const N={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 h-auto flex flex-col"},$={class:"flex justify-between items-center mb-5"},D={class:"font-bold text-gray-900 dark:text-white flex items-center gap-2"},S={class:"text-xs text-gray-400 font-normal bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full"},z={key:0,class:"flex-1 flex flex-col items-center justify-center py-8 text-gray-400 border-2 border-dashed border-gray-100 dark:border-gray-700 rounded-xl"},H={key:1},A={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4"},F=["onClick"],L={class:"flex justify-between items-start mb-3"},T={class:"text-sm font-semibold text-gray-800 dark:text-gray-200 line-clamp-2 group-hover:text-blue-600 transition-colors pr-2 h-10 leading-5"},U={class:"mb-4"},E={class:"h-1.5 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},I={class:"flex items-center justify-between pt-2 border-t border-gray-50 dark:border-gray-700 mt-auto"},J={class:"flex -space-x-2 overflow-hidden pl-1"},P=["title"],R={key:0,class:"inline-block h-6 w-6 rounded-full ring-2 ring-white dark:ring-gray-800 bg-gray-100 flex items-center justify-center text-[9px] font-bold text-gray-500"},q={key:1,class:"text-[10px] text-gray-400"},G={class:"text-[10px] text-gray-400 flex items-center gap-1"},K={key:0,class:"flex justify-center pt-2 border-t border-gray-100 dark:border-gray-700"},O={key:0},Q={key:1},X={__name:"TaskSubtasks",props:{subtasks:Array,loading:Boolean,canCreate:Boolean},emits:["create"],setup(l){const d=l,i=j(!1),m=y(()=>d.subtasks?i.value?d.subtasks:d.subtasks.slice(0,4):[]),v=y(()=>{var o;return((o=d.subtasks)==null?void 0:o.length)>4}),w=o=>o===100?"bg-emerald-500":o>=50?"bg-amber-400":"bg-blue-500",_=o=>o?o.split(" ").map(t=>t[0]).join("").slice(0,2).toUpperCase():"?",C=o=>o?new Date(o).toLocaleDateString("ru-RU",{day:"numeric",month:"short"}):"—";return(o,t)=>{var b,x;return r(),s("div",N,[e("div",$,[e("h3",D,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)),t[3]||(t[3]=k(" Подзадачи ",-1)),e("span",S,n(((b=l.subtasks)==null?void 0:b.length)||0),1)]),l.canCreate?(r(),s("button",{key:0,onClick:t[0]||(t[0]=a=>o.$emit("create")),class:"group flex items-center gap-1 text-xs bg-emerald-50 text-emerald-600 px-3 py-1.5 rounded-lg font-bold hover:bg-emerald-100 transition"},t[4]||(t[4]=[e("span",{class:"text-lg leading-none mb-0.5"},"+",-1),k(" Добавить ",-1)]))):g("",!0)]),(x=l.subtasks)!=null&&x.length?(r(),s("div",H,[e("div",A,[(r(!0),s(c,null,f(m.value,a=>{var h;return r(),s("div",{key:a.id,onClick:u=>B(M).visit(`/subtasks/${a.id}`),class:"group relative bg-white dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-md transition-all cursor-pointer flex flex-col justify-between"},[e("div",L,[e("h4",T,n(a.title),1),t[6]||(t[6]=e("div",{class:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},[e("svg",{class:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))]),e("div",U,[e("div",E,[e("div",{class:p(["h-full rounded-full transition-all duration-500",w(a.progress)]),style:V({width:a.progress+"%"})},null,6)])]),e("div",I,[e("div",J,[(h=a.executors)!=null&&h.length?(r(),s(c,{key:0},[(r(!0),s(c,null,f(a.executors.slice(0,2),u=>(r(),s("div",{key:u.id,class:"inline-block h-6 w-6 rounded-full ring-2 ring-white dark:ring-gray-800 bg-gray-200 flex items-center justify-center text-[9px] font-bold text-gray-600",title:u.name},n(_(u.name)),9,P))),128)),a.executors.length>2?(r(),s("div",R," +"+n(a.executors.length-2),1)):g("",!0)],64)):(r(),s("span",q,"Нет исп."))]),e("div",G,[e("span",null,n(C(a.due_date)),1)])])],8,F)}),128))]),v.value?(r(),s("div",K,[e("button",{onClick:t[1]||(t[1]=a=>i.value=!i.value),class:"text-xs font-medium text-gray-500 hover:text-blue-600 flex items-center gap-1 transition-colors px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},[i.value?(r(),s("span",Q,"Свернуть")):(r(),s("span",O,"Показать еще ("+n(l.subtasks.length-4)+")",1)),(r(),s("svg",{class:p([{"rotate-180":i.value},"w-3 h-3 transition-transform duration-300"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])):g("",!0)])):(r(),s("div",z,t[5]||(t[5]=[e("svg",{class:"w-10 h-10 mb-2 opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",{class:"text-sm"},"Нет подзадач",-1)])))])}}};export{X as default};
