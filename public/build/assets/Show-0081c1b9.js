import{Q as Ve,r as p,m as k,q as Be,o,f as d,a as me,u as De,w as Se,F as w,i as f,Z as Ue,b as t,t as r,d as v,x as $,g as x,n as ye,e as H,j as m,v as z,k as fe,s as Ne}from"./app-562a7a64.js";import{_ as Ee}from"./AuthenticatedLayout-df9aad9a.js";import"./ApplicationLogo-71dd096f.js";import"./_plugin-vue_export-helper-c27b6911.js";const Fe={class:"relative overflow-hidden"},He={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-white"},Te={class:"flex items-start gap-4"},qe={class:"flex-1"},Le={class:"text-2xl sm:text-3xl font-semibold"},Ie={class:"mt-2 flex flex-wrap items-center gap-2 text-sm"},Oe={class:"px-2 py-1 rounded-full bg-white/20"},Re={key:0,class:"px-2 py-1 rounded-full bg-white/20"},Pe={class:"px-2 py-1 rounded-full bg-white/20"},Qe={class:"px-2 py-1 rounded-full bg-white/20"},Ze={key:2,class:"px-2 py-1 rounded-full bg-white/20"},Ae={class:"flex items-center gap-2"},Ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},Je={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ke={class:"lg:col-span-2"},We={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Xe={class:"flex items-center justify-between mb-3"},Ye={class:"text-sm text-gray-500 dark:text-gray-400"},et={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},tt={key:1,class:"text-center py-10"},st={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},lt=["onClick"],at={class:"flex items-start justify-between gap-3"},ot={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},dt={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},it={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},nt={key:0},ut={key:1},gt={class:"flex items-center gap-2"},pt={key:0},xt={key:1},vt={key:0,class:"mt-3 pt-3 border-t"},bt={class:"flex flex-wrap gap-2"},mt=["href"],yt={class:"space-y-4"},ft={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ct={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},kt={class:"flex justify-between"},wt={class:"font-medium text-gray-900 dark:text-white"},ht={class:"flex justify-between"},_t={class:"font-medium"},jt={class:"flex justify-between"},Ct={class:"font-medium"},$t={class:"flex justify-between"},zt={class:"font-medium"},Mt={class:"flex justify-between"},Vt={class:"font-medium"},Bt={class:"mt-4"},Dt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line"},St={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ut={class:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Nt={class:"flex items-center justify-between"},Et={key:0,class:"mt-3 text-sm text-rose-600"},Ft={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ht={class:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-xl bg-white dark:bg-gray-700"},Tt=["id","value"],qt=["for"],Lt={class:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-xl bg-white dark:bg-gray-700"},It=["id","value"],Ot=["for"],Rt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Pt={class:"flex justify-end gap-2 pt-2"},Qt=["disabled"],Zt={key:0},At={key:1},Gt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Jt={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Kt={class:"flex items-center justify-between"},Wt={class:"flex justify-end gap-2"},Xt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Yt={class:"relative w-full max-w-xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},es={class:"flex items-center justify-between"},ts={class:"flex justify-end gap-2"},ss={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},ls={class:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl dark:bg-gray-900"},as={key:0,class:"mt-2 text-sm text-rose-600"},os={class:"flex justify-end gap-2 mt-4"},ds=["disabled"],ps={__name:"Show",setup(is){var Z,A;const{props:T}=Ve(),c=T.id,q=p(!0),a=p(null),B=p([]),h=p(!1),_=p(!1),j=p(!1),D=p(!1),M=p(""),S=p({budget:""}),U=p({description:""}),u=p({title:"",executor_ids:[],responsible_ids:[],priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null}),ce=((Z=T.auth)==null?void 0:Z.roles)||[],i=(A=T.auth)==null?void 0:A.user;k(()=>ce.includes("admin")),k(()=>{var l,e;return((e=(l=a.value)==null?void 0:l.company)==null?void 0:e.user_id)===(i==null?void 0:i.id)}),k(()=>{var l,e;return(e=(l=a.value)==null?void 0:l.managers)==null?void 0:e.some(g=>g.id===(i==null?void 0:i.id))});const L=k(()=>{var l,e,g,n;return(i==null?void 0:i.id)===((e=(l=a.value)==null?void 0:l.company)==null?void 0:e.user_id)||((n=(g=a.value)==null?void 0:g.managers)==null?void 0:n.some(b=>b.id===(i==null?void 0:i.id)))}),ke=k(()=>{var l,e,g,n;return(i==null?void 0:i.id)===((e=(l=a.value)==null?void 0:l.company)==null?void 0:e.user_id)||((n=(g=a.value)==null?void 0:g.managers)==null?void 0:n.some(b=>b.id===(i==null?void 0:i.id)))}),O=k(()=>{var l,e;return(i==null?void 0:i.id)===((e=(l=a.value)==null?void 0:l.company)==null?void 0:e.user_id)}),R=k(()=>{var l,e,g,n;return(i==null?void 0:i.id)===((e=(l=a.value)==null?void 0:l.company)==null?void 0:e.user_id)||((n=(g=a.value)==null?void 0:g.managers)==null?void 0:n.some(b=>b.id===(i==null?void 0:i.id)))}),P=(l,e)=>{if(!l||!e)return"—";const g=new Date(l),n=new Date(g);return n.setDate(g.getDate()+Number(e)),Math.ceil((n-new Date)/(1e3*60*60*24))},we=l=>l==="—"?"bg-gray-100 text-gray-600 ring-1 ring-gray-200":l>7?"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200":l>=0?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-rose-100 text-rose-700 ring-1 ring-rose-200",he=l=>l==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":l==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",V=async()=>{q.value=!0;try{const{data:l}=await f.get(`/api/projects/${c}`);a.value=l,S.value.budget=(l==null?void 0:l.budget)??"",U.value.description=(l==null?void 0:l.description)??"";const e=await f.get(`/api/projects/${c}/employees`);B.value=e.data}finally{q.value=!1}},_e=async()=>{const{data:l}=await f.get(`/api/projects/${c}/employees`);B.value=l},Q=async()=>{if(!L.value)return alert("Недостаточно прав для создания задачи.");M.value="",await _e(),h.value=!0},je=l=>{u.value.files=l.target.files},Ce=async()=>{var e,g;M.value="",D.value=!0;const l=new FormData;if(l.append("title",u.value.title),u.value.executor_ids.forEach(n=>l.append("executor_ids[]",n)),u.value.responsible_ids.forEach(n=>l.append("responsible_ids[]",n)),l.append("priority",u.value.priority),l.append("start_date",u.value.start_date),l.append("due_date",u.value.due_date),l.append("project_id",c),l.append("company_id",a.value.company.id),u.value.files)for(let n=0;n<u.value.files.length;n++)l.append("files[]",u.value.files[n]);try{await f.get("/sanctum/csrf-cookie"),await f.post("/api/tasks",l,{headers:{"Content-Type":"multipart/form-data"}}),h.value=!1,u.value={title:"",executor_id:"",responsible_id:"",priority:"low",start_date:new Date().toISOString().slice(0,10),due_date:"",files:null},await V()}catch(n){M.value=((g=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:g.message)||"Не удалось создать задачу"}finally{D.value=!1}},$e=async()=>{await f.patch(`/api/projects/${c}/budget`,{budget:S.value.budget}),_.value=!1,await V()},ze=async()=>{await f.patch(`/api/projects/${c}/description`,{description:U.value.description}),j.value=!1,await V()};p({title:"",responsible_id:null}),p(!1),p("");const N=p(!1),I=p({name:""}),E=p(""),F=p(!1),Me=async()=>{var l,e;F.value=!0,E.value="";try{await f.patch(`/api/projects/${c}/name`,{name:I.value.name}),N.value=!1,await V()}catch(g){E.value=((e=(l=g==null?void 0:g.response)==null?void 0:l.data)==null?void 0:e.message)||"Ошибка при обновлении названия"}finally{F.value=!1}};return Be(V),(l,e)=>{var g;return o(),d(w,null,[me(De(Ue),{title:(g=a.value)!=null&&g.name?`Проект — ${a.value.name}`:"Проект"},null,8,["title"]),me(Ee,null,{default:Se(()=>{var n,b,G,J,K,W,X,Y,ee,te,se,le,ae,oe,de,ie,re,ne,ue,ge,pe;return[t("div",Fe,[e[32]||(e[32]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-fuchsia-600 opacity-90"},null,-1)),t("div",He,[t("div",Te,[t("div",qe,[t("h1",Le,r(((n=a.value)==null?void 0:n.name)??"Загрузка…"),1),t("div",Ie,[t("span",Oe,[e[23]||(e[23]=v(" Компания: ",-1)),t("b",null,r(((G=(b=a.value)==null?void 0:b.company)==null?void 0:G.name)??"—"),1)]),(o(!0),d(w,null,$(((J=a.value)==null?void 0:J.managers)||[],s=>(o(),d("span",{key:s.id,class:"px-2 py-1 rounded-full bg-white/20 inline-block"},[e[24]||(e[24]=v(" Руководитель: ",-1)),t("b",null,r(s.name),1)]))),128)),(W=(K=a.value)==null?void 0:K.managers)!=null&&W.length?x("",!0):(o(),d("span",Re,e[25]||(e[25]=[v(" Руководители: ",-1),t("b",null,"—",-1)]))),t("span",Pe,[e[26]||(e[26]=v(" Старт: ",-1)),t("b",null,r(((X=a.value)==null?void 0:X.start_date)??"—"),1)]),t("span",Qe,[e[27]||(e[27]=v(" Длительность: ",-1)),t("b",null,r(((Y=a.value)==null?void 0:Y.duration_days)??"—"),1),e[28]||(e[28]=v(" дн. ",-1))]),a.value?(o(),d("span",{key:1,class:ye(["px-2 py-1 rounded-full bg-white text-gray-900",we(P(a.value.start_date,a.value.duration_days))])},[e[29]||(e[29]=v(" Осталось: ",-1)),t("b",null,r(P(a.value.start_date,a.value.duration_days)),1),e[30]||(e[30]=v(" дн. ",-1))],2)):x("",!0),(ee=a.value)!=null&&ee.budget?(o(),d("span",Ze,[e[31]||(e[31]=v(" Бюджет: ",-1)),t("b",null,r(Number(a.value.budget).toLocaleString("ru-RU"))+" ₽",1)])):x("",!0)])]),t("div",Ae,[O.value?(o(),d("button",{key:0,onClick:e[0]||(e[0]=s=>_.value=!0),class:"rounded-xl bg-amber-400/90 hover:bg-amber-400 text-gray-900 px-4 py-2 font-medium"}," Бюджет ")):x("",!0),R.value?(o(),d("button",{key:1,onClick:e[1]||(e[1]=s=>j.value=!0),class:"rounded-xl bg-white text-gray-900 hover:bg-white/90 px-4 py-2 font-medium"}," Описание ")):x("",!0),L.value?(o(),d("button",{key:2,onClick:Q,class:"rounded-xl bg-emerald-400/95 hover:bg-emerald-400 text-gray-900 px-4 py-2 font-medium"}," + Задача ")):x("",!0),ke.value?(o(),d("button",{key:3,onClick:e[2]||(e[2]=s=>N.value=!0),class:"rounded-xl bg-blue-400/95 hover:bg-blue-500 text-white px-4 py-2 font-medium"}," Изменить ")):x("",!0)])])])]),t("div",Ge,[t("div",Je,[t("div",Ke,[t("div",We,[t("div",Xe,[e[33]||(e[33]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Задачи проекта",-1)),t("div",Ye," Всего: "+r(((se=(te=a.value)==null?void 0:te.tasks)==null?void 0:se.length)||0),1)]),q.value?(o(),d("div",et,[(o(),d(w,null,$(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[34]||(e[34]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(ae=(le=a.value)==null?void 0:le.tasks)!=null&&ae.length?(o(),d("div",st,[(o(!0),d(w,null,$(a.value.tasks,s=>{var C,xe,ve,be;return o(),d("div",{key:s.id,class:"group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",onClick:y=>l.$inertia.visit(`/tasks/${s.id}`)},[t("div",at,[t("h3",ot,r(s.title),1),t("span",{class:ye(["px-2 py-1 text-xs rounded-full ring-1",he(s.priority)])},r(s.priority==="high"?"Высокая":s.priority==="medium"?"Средняя":"Обычная"),3)]),t("div",dt,[t("div",it,[e[37]||(e[37]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h5V6H7v5zm0 7h5v-5H7v5zm7 0h5v-5h-5v5zM14 6v5h5V6h-5z"})],-1)),t("span",null,"С "+r(s.start_date)+" по "+r(s.due_date),1)]),t("div",rt,[e[40]||(e[40]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 12c2.2 0 4-1.79 4-4s-1.8-4-4-4-4 1.79-4 4 1.8 4 4 4zm0 2c-3.33 0-10 1.67-10 5v3h20v-3c0-3.33-6.67-5-10-5z"})],-1)),t("span",null,[e[38]||(e[38]=v(" От: ",-1)),t("b",null,r(((C=s.creator)==null?void 0:C.name)??"—"),1),e[39]||(e[39]=v(" → Кому: ",-1)),(xe=s.executors)!=null&&xe.length?(o(),d("b",nt,r(s.executors.map(y=>y.name).join(", ")),1)):(o(),d("b",ut,"—"))])]),t("div",gt,[e[42]||(e[42]=t("svg",{class:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2l4 7H8l4-7zm0 20l-4-7h8l-4 7zM2 12l7-4v8l-7-4zm20 0l-7 4V8l7 4z"})],-1)),t("span",null,[e[41]||(e[41]=v(" Ответственные: ",-1)),(ve=s.responsibles)!=null&&ve.length?(o(),d("b",pt,r(s.responsibles.map(y=>y.name).join(", ")),1)):(o(),d("b",xt,"—"))])])]),(be=s.files)!=null&&be.length?(o(),d("div",vt,[e[44]||(e[44]=t("div",{class:"text-xs font-medium text-gray-500 mb-1"},"Файлы:",-1)),t("div",bt,[(o(!0),d(w,null,$(s.files,y=>(o(),d("a",{key:y.id,href:`/storage/${y.file_path}`,target:"_blank",class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100",onClick:e[3]||(e[3]=H(()=>{},["stop"]))},[e[43]||(e[43]=t("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),v(" "+r(y.file_path.split("/").pop()),1)],8,mt))),128))])])):x("",!0)],8,lt)}),128))])):(o(),d("div",tt,[e[35]||(e[35]=t("div",{class:"mx-auto w-14 h-14 rounded-2xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-gray-500 dark:text-gray-300",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 11h10v2H7zM7 7h10v2H7zM7 15h7v2H7z"})])],-1)),e[36]||(e[36]=t("p",{class:"mt-3 text-gray-700 dark:text-gray-300"},"Задач пока нет.",-1)),L.value?(o(),d("button",{key:0,onClick:Q,class:"mt-4 rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700"}," Создать задачу ")):x("",!0)]))])]),t("div",yt,[t("div",ft,[e[51]||(e[51]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Кратко о проекте",-1)),t("dl",ct,[t("div",kt,[e[45]||(e[45]=t("dt",null,"Компания",-1)),t("dd",wt,r(((de=(oe=a.value)==null?void 0:oe.company)==null?void 0:de.name)??"—"),1)]),t("div",ht,[e[46]||(e[46]=t("dt",null,"Инициатор",-1)),t("dd",_t,r(((re=(ie=a.value)==null?void 0:ie.initiator)==null?void 0:re.name)??"—"),1)]),t("div",jt,[e[47]||(e[47]=t("dt",null,"Старт",-1)),t("dd",Ct,r(((ne=a.value)==null?void 0:ne.start_date)??"—"),1)]),t("div",$t,[e[48]||(e[48]=t("dt",null,"Длительность",-1)),t("dd",zt,r(((ue=a.value)==null?void 0:ue.duration_days)??"—")+" дн.",1)]),t("div",Mt,[e[49]||(e[49]=t("dt",null,"Бюджет",-1)),t("dd",Vt,r((ge=a.value)!=null&&ge.budget?Number(a.value.budget).toLocaleString("ru-RU")+" ₽":"—"),1)])]),t("div",Bt,[e[50]||(e[50]=t("div",{class:"text-xs font-semibold text-gray-500 mb-1"},"Описание",-1)),t("p",Dt,r(((pe=a.value)==null?void 0:pe.description)||"Описание не задано."),1)])])])])]),h.value?(o(),d("div",St,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>h.value=!1)}),t("div",Ut,[t("div",Nt,[e[52]||(e[52]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Создание задачи",-1)),t("button",{onClick:e[5]||(e[5]=s=>h.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),M.value?(o(),d("p",Et,r(M.value),1)):x("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:H(Ce,["prevent"])},[t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Название",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>u.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[z,u.value.title]])]),t("div",Ft,[t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Исполнители",-1)),t("div",Ht,[(o(!0),d(w,null,$(B.value,s=>(o(),d("div",{key:s.id,class:"flex items-center space-x-2"},[m(t("input",{type:"checkbox",id:`executor-${s.id}`,value:s.id,"onUpdate:modelValue":e[7]||(e[7]=C=>u.value.executor_ids=C),class:"h-4 w-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"},null,8,Tt),[[fe,u.value.executor_ids]]),t("label",{for:`executor-${s.id}`,class:"text-sm text-gray-700 dark:text-gray-300"},r(s.name),9,qt)]))),128))])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Ответственные",-1)),t("div",Lt,[(o(!0),d(w,null,$(B.value,s=>(o(),d("div",{key:s.id,class:"flex items-center space-x-2"},[m(t("input",{type:"checkbox",id:`responsible-${s.id}`,value:s.id,"onUpdate:modelValue":e[8]||(e[8]=C=>u.value.responsible_ids=C),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,It),[[fe,u.value.responsible_ids]]),t("label",{for:`responsible-${s.id}`,class:"text-sm text-gray-700 dark:text-gray-300"},r(s.name),9,Ot)]))),128))])])]),t("div",Rt,[t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Приоритет",-1)),m(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>u.value.priority=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},e[56]||(e[56]=[t("option",{value:"low"},"Обычная",-1),t("option",{value:"medium"},"Средняя",-1),t("option",{value:"high"},"Высокая",-1)]),512),[[Ne,u.value.priority]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Начало",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>u.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[z,u.value.start_date]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Окончание",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=s=>u.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[z,u.value.due_date]])])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Файлы (pdf, excel, word)",-1)),t("input",{type:"file",multiple:"",onChange:je,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white"},null,32)]),t("div",Pt,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>h.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),t("button",{type:"submit",disabled:D.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[D.value?(o(),d("span",At,"Сохраняю…")):(o(),d("span",Zt,"Создать"))],8,Qt)])],32)])])):x("",!0),_.value&&O.value?(o(),d("div",Gt,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[13]||(e[13]=s=>_.value=!1)}),t("div",Jt,[t("div",Kt,[e[61]||(e[61]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Установить бюджет",-1)),t("button",{onClick:e[14]||(e[14]=s=>_.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),t("form",{class:"mt-4 space-y-4",onSubmit:H($e,["prevent"])},[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Сумма (₽)",-1)),m(t("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[15]||(e[15]=s=>S.value.budget=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[z,S.value.budget]])]),t("div",Wt,[t("button",{type:"button",onClick:e[16]||(e[16]=s=>_.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),e[63]||(e[63]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-amber-600 text-white hover:bg-amber-700"},"Сохранить",-1))])],32)])])):x("",!0),j.value&&R.value?(o(),d("div",Xt,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[17]||(e[17]=s=>j.value=!1)}),t("div",Yt,[t("div",es,[e[64]||(e[64]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Описание проекта",-1)),t("button",{onClick:e[18]||(e[18]=s=>j.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"✕")]),t("form",{class:"mt-4 space-y-4",onSubmit:H(ze,["prevent"])},[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"Описание",-1)),m(t("textarea",{rows:"6","onUpdate:modelValue":e[19]||(e[19]=s=>U.value.description=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[z,U.value.description]])]),t("div",ts,[t("button",{type:"button",onClick:e[20]||(e[20]=s=>j.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"Отмена"),e[66]||(e[66]=t("button",{type:"submit",class:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700"},"Сохранить",-1))])],32)])])):x("",!0),N.value?(o(),d("div",ss,[t("div",ls,[e[67]||(e[67]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"Изменить название проекта",-1)),m(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>I.value.name=s),type:"text",class:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800 dark:text-white"},null,512),[[z,I.value.name]]),E.value?(o(),d("p",as,r(E.value),1)):x("",!0),t("div",os,[t("button",{onClick:e[22]||(e[22]=s=>N.value=!1),class:"px-4 py-2 rounded bg-gray-500 text-white"},"Отмена"),t("button",{onClick:Me,disabled:F.value,class:"px-4 py-2 rounded bg-blue-600 text-white"},r(F.value?"Сохраняю…":"Сохранить"),9,ds)])])])):x("",!0)]}),_:1})],64)}}};export{ps as default};
