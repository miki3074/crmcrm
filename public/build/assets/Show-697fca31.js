import{r as u,q as ye,I as qt,o as l,f as o,b as t,F as m,s as k,t as d,g,j as w,v as R,i as b,n as N,x as L,k as me,d as $,Q as Lt,m as D,A as Ot,a as ce,w as Bt,y as Nt,e as xe}from"./app-6df86aac.js";import{_ as Wt}from"./AuthenticatedLayout-2937225d.js";import{_ as Ht}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-a575108c.js";const Zt={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5 mt-8"},Pt={class:"space-y-3 max-h-80 overflow-y-auto pr-1"},Kt={class:"flex-1"},Qt={class:"flex items-center gap-2"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white"},Jt={class:"text-xs text-gray-500"},Xt=["innerHTML"],Yt={key:0,class:"text-sm text-gray-500"},es={key:0,class:"mt-4"},ts={class:"mt-2 flex justify-end"},ss=["disabled"],as={key:1,class:"mt-3 text-xs text-gray-500"},ls={key:2,class:"absolute bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-lg w-64 mt-1 z-50"},os=["onClick"],rs={__name:"TaskChat",props:{taskId:{type:Number,required:!0},canChat:{type:Boolean,default:!0},members:{type:Array,default:()=>[]}},setup(F){const j=F,y=u([]),c=u(""),V=u(!1),a=u(""),x=u([]),A=u(0);let T=null;const O=async()=>{const{data:f}=await b.get(`/api/tasks/${j.taskId}/comments`,{withCredentials:!0});y.value=f},h=async()=>{c.value.trim()&&(await b.get("/sanctum/csrf-cookie"),await b.post(`/api/tasks/${j.taskId}/comments`,{body:c.value},{withCredentials:!0}),c.value="",await O())},v=f=>{const z=c.value,_=f.target.selectionStart;if(A.value=_,z[_-1]==="@"){V.value=!0,a.value="",x.value=j.members;return}if(V.value){const I=z.slice(0,_).match(/@([–∞-—è–ê-–Øa-zA-Z0-9_]*)$/);if(!I){V.value=!1;return}a.value=I[1].toLowerCase(),x.value=j.members.filter(pe=>pe.name.toLowerCase().includes(a.value))}},i=f=>{A.value;const z=c.value;c.value=z.replace(/@([–∞-—è–ê-–Øa-zA-Z0-9_]*)$/,"@"+f.name+" "),V.value=!1},S=f=>f.replace(/@([A-Za-z0-9_]+)/g,'<span class="text-indigo-600 font-semibold">@$1</span>');return ye(async()=>{await O(),T=setInterval(O,1e4)}),qt(()=>{T&&clearInterval(T)}),(f,z)=>(l(),o("div",Zt,[z[1]||(z[1]=t("div",{class:"mb-4 flex items-center justify-between"},[t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")],-1)),t("div",Pt,[(l(!0),o(m,null,k(y.value,_=>{var B;return l(),o("div",{key:_.id,class:"flex gap-3"},[t("div",Kt,[t("div",Qt,[t("div",Gt,d(((B=_.user)==null?void 0:B.name)??"‚Äî"),1),t("div",Jt,d(new Date(_.created_at).toLocaleString()),1)]),t("div",{class:"mt-1 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",innerHTML:S(_.body)},null,8,Xt)])])}),128)),y.value.length?g("",!0):(l(),o("div",Yt,"–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π."))]),F.canChat?(l(),o("div",es,[w(t("textarea",{"onUpdate:modelValue":z[0]||(z[0]=_=>c.value=_),rows:"2",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶",class:"w-full rounded-lg border bg-white/80 dark:bg-gray-700 px-3 py-2 text-sm dark:text-white relative",onInput:v,onClick:v,onKeyup:v},null,544),[[R,c.value]]),t("div",ts,[t("button",{onClick:h,disabled:!c.value.trim(),class:"px-4 py-2 rounded-lg bg-indigo-600 text-white disabled:opacity-40"},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,ss)])])):(l(),o("div",as," –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —á–∞—Ç–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. ")),V.value&&x.value.length?(l(),o("div",ls,[(l(!0),o(m,null,k(x.value,_=>(l(),o("div",{key:_.id,class:"px-3 py-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:B=>i(_)}," @"+d(_.name),9,os))),128))])):g("",!0)]))}},ns={class:"mt-6"},ds={key:0,class:"space-y-2"},is=["checked","onChange"],us={key:0,class:"text-sm text-gray-500"},vs={key:1,class:"text-gray-500"},cs={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},ps={class:"bg-white rounded p-6 w-96"},gs={key:0,class:"text-sm text-rose-600 mb-2"},bs=["value"],xs=["value"],ms=["value"],ys={class:"flex items-center gap-2 mb-2"},ks={class:"flex justify-end gap-2"},fs={__name:"TaskChecklists",props:{taskId:{type:Number,required:!0},executors:{type:Array,default:()=>[]},responsibles:{type:Array,default:()=>[]},creator:{type:Object,default:()=>null}},setup(F){const j=u(""),y=F,c=u([]),V=u(!1),a=u(!1),x=u({title:"",assigned_to:[],important:!1,files:[]}),A=async()=>{V.value=!0;try{const{data:h}=await b.get(`/api/tasks/${y.taskId}/checklists`);c.value=h}finally{V.value=!1}},T=async()=>{var v,i;j.value="";const h=new FormData;h.append("title",x.value.title),x.value.assigned_to&&h.append("assigned_to",x.value.assigned_to),h.append("important",x.value.important?1:0);for(let S of x.value.files)h.append("files[]",S);try{await b.post(`/api/tasks/${y.taskId}/checklists`,h,{headers:{"Content-Type":"multipart/form-data"}}),a.value=!1,x.value={title:"",assigned_to:"",important:!1,files:[]},await A()}catch(S){if(((v=S.response)==null?void 0:v.status)===422){const f=S.response.data;j.value=f.message||((i=Object.values(f.errors||{})[0])==null?void 0:i[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–Ω–∫—Ç–∞ —á–µ–∫-–ª–∏—Å—Ç–∞."}else j.value="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞."}},O=async h=>{await b.patch(`/api/checklists/${h.id}/toggle`),await A()};return ye(A),(h,v)=>(l(),o("div",ns,[v[10]||(v[10]=t("h3",{class:"text-lg font-semibold mb-2"},"–ß–µ–∫-–ª–∏—Å—Ç—ã",-1)),c.value.length?(l(),o("ul",ds,[(l(!0),o(m,null,k(c.value,i=>(l(),o("li",{key:i.id,class:"flex items-center gap-2"},[t("input",{type:"checkbox",checked:i.completed,onChange:S=>O(i)},null,40,is),t("span",{class:N({"font-bold text-red-600":i.important})},d(i.title),3),i.assignee?(l(),o("span",us,"("+d(i.assignee.name)+")",1)):g("",!0)]))),128))])):(l(),o("p",vs,"–ù–µ—Ç —á–µ–∫-–ª–∏—Å—Ç–æ–≤")),t("button",{class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded",onClick:v[0]||(v[0]=i=>a.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç "),a.value?(l(),o("div",cs,[t("div",ps,[v[8]||(v[8]=t("h4",{class:"text-lg font-semibold mb-2"},"–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞",-1)),j.value?(l(),o("p",gs,d(j.value),1)):g("",!0),w(t("input",{required:"","onUpdate:modelValue":v[1]||(v[1]=i=>x.value.title=i),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"w-full border mb-2 p-2"},null,512),[[R,x.value.title]]),v[9]||(v[9]=t("label",{class:"block text-sm"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":v[2]||(v[2]=i=>x.value.assigned_to=i),class:"w-full border mb-2 p-2"},[v[6]||(v[6]=t("option",{value:""},"‚Äî",-1)),(l(!0),o(m,null,k(F.executors,i=>(l(),o("option",{key:"exec-"+i.id,value:i.id},d(i.name),9,bs))),128)),(l(!0),o(m,null,k(F.responsibles,i=>(l(),o("option",{key:"resp-"+i.id,value:i.id},d(i.name),9,xs))),128)),F.creator?(l(),o("option",{key:0,value:F.creator.id},d(F.creator.name),9,ms)):g("",!0)],512),[[L,x.value.assigned_to]]),t("label",ys,[w(t("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=i=>x.value.important=i)},null,512),[[me,x.value.important]]),v[7]||(v[7]=$(" –í–∞–∂–Ω–æ ",-1))]),t("input",{type:"file",multiple:"",onChange:v[4]||(v[4]=i=>x.value.files=Array.from(i.target.files)),class:"mb-4"},null,32),t("div",ks,[t("button",{onClick:v[5]||(v[5]=i=>a.value=!1),class:"px-3 py-1 border"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:T,class:"px-3 py-1 bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0)]))}};const ws={class:"relative overflow-hidden rounded-b-3xl shadow-lg"},hs={class:"relative max-w-7xl mx-auto px-6 py-10 text-white"},_s={class:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-8"},$s={class:"flex-1 space-y-4"},Cs={class:"flex flex-wrap items-center gap-3"},js={class:"text-3xl sm:text-4xl font-bold tracking-tight"},Ms={key:0,class:"px-3 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"},Us={class:"flex flex-wrap items-center gap-2 text-sm font-medium"},Vs={class:"badge"},Is={class:"badge"},Es={class:"badge"},Ss={class:"badge"},As={class:"badge"},Ts={class:"badge"},zs={key:0,class:"bg-white/10 rounded-xl p-4 mt-4 backdrop-blur-sm"},Ds={class:"text-gray-100 whitespace-pre-line"},Fs={class:"flex flex-col gap-6 w-full sm:w-auto"},Rs={class:"flex flex-wrap justify-start sm:justify-end gap-2"},qs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},Ls={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Os={key:0,class:"text-sm text-rose-600 mb-3"},Bs={class:"flex justify-end gap-2"},Ns=["disabled"],Ws={key:0},Hs={key:1},Zs=["href"],Ps={key:0,class:"grid grid-cols-2 sm:grid-cols-2 gap-3 bg-white/10 dark:bg-white/5 rounded-2xl p-4 border border-white/20 backdrop-blur-sm shadow-sm"},Ks={key:1,class:"flex justify-end gap-2 mt-3"},Qs={key:1,class:"text-xs text-amber-200 max-w-xs text-right"},Gs={key:2,class:"text-sm text-emerald-200"},Js={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},Xs={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ys={class:"lg:col-span-2 space-y-4"},ea={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ta={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},sa={class:"text-sm font-medium text-gray-900 dark:text-white"},aa={class:"text-sm font-medium text-gray-900 dark:text-white"},la={class:"mt-2"},oa={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},ra={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},na={class:"flex mt-3 gap-1"},da=["onClick","title"],ia={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ua={key:0},va={key:1,class:"mt-4 grid grid-cols-2 gap-2"},ca={key:2,class:"mt-3"},pa={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},ga={key:1,class:"flex flex-wrap gap-2"},ba=["href"],xa=["onClick"],ma={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ya={class:"flex items-center justify-between mb-3"},ka={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},fa={key:1,class:"text-sm text-gray-600 dark:text-gray-300"},wa={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ha=["onClick"],_a={class:"flex items-start justify-between gap-3"},$a={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},Ca={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},ja={class:"space-y-4"},Ma={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ua={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},Va={class:"flex justify-between"},Ia={class:"font-medium"},Ea={class:"flex justify-between"},Sa={class:"font-medium"},Aa={class:"flex justify-between"},Ta={class:"font-medium"},za={class:"flex justify-between"},Da={class:"font-medium"},Fa={class:"flex justify-between"},Ra={class:"font-medium"},qa={class:"flex justify-between"},La={key:0,class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Oa={key:0,class:"space-y-4 mt-5"},Ba={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Na={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Wa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ha={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Za={class:"flex items-center justify-between"},Pa={key:0,class:"mt-3 text-sm text-rose-600"},Ka=["value"],Qa=["value"],Ga={class:"grid grid-cols-2 gap-4"},Ja={class:"flex justify-end gap-2"},Xa=["disabled"],Ya={key:0},el={key:1},tl={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},sl={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6"},al={class:"mb-3"},ll={class:"mb-3"},ol={class:"mb-3"},rl={class:"flex justify-end gap-2 mt-4"},nl={key:2,class:"fixed inset-0 flex items-center justify-center bg-black/50"},dl={class:"bg-white p-4 rounded w-96"},il=["value"],ul={class:"flex justify-end gap-2 mt-4"},vl={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},cl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},pl=["value"],gl=["value"],bl={key:0,class:"text-rose-600 text-sm mt-2"},xl={class:"mt-4 flex justify-end gap-2"},ml={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},yl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},kl=["value"],fl=["value"],wl={key:0,class:"text-rose-600 text-sm mt-2"},hl={class:"mt-4 flex justify-end gap-2"},_l={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},$l={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},Cl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},jl=["value"],Ml={class:"flex justify-end gap-2"},Ul={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Vl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},Il={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},El=["value"],Sl={class:"flex justify-end gap-2"},Al={key:7,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Tl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-4xl shadow-xl"},zl={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},Dl=["onClick"],Fl=["onClick"],Rl=["onClick"],ql={key:0,class:"mt-3 text-sm text-rose-600"},Ll={class:"flex justify-end mt-5"},Ol={key:8,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Bl={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-xl"},Nl={class:"flex justify-end gap-2 mt-4"},Wl=["disabled"],Hl={key:0},Zl={key:1},Pl={__name:"Show",setup(F){var he;const{props:j}=Lt(),y=j.id,c=(he=j.auth)==null?void 0:he.user,V=u(!0),a=u(null),x=u(!1),A=u(""),T=u(null),O=r=>{T.value=r.target.files},h=u(!1),v=u([]),i=u({title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""}),S=u(!1),f=u({title:"",start_date:"",due_date:""}),z=D(()=>{var r;return!a.value||!c?!1:(a.value.responsibles||[]).some(e=>e.id===c.id)||(((r=a.value.project)==null?void 0:r.managers)||[]).some(e=>e.id===c.id)||Q.value}),_=r=>r==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":r==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",B=r=>r==="high"?"–í—ã—Å–æ–∫–∞—è":r==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è",I=async()=>{V.value=!0;try{const{data:r}=await b.get(`/api/tasks/${y}`,{withCredentials:!0});a.value=r,f.value={title:r.title||"",start_date:r.start_date||"",due_date:r.due_date||""}}finally{V.value=!1}},pe=async()=>{var r,e;try{const{data:n}=await b.put(`/api/tasks/${y}`,f.value,{withCredentials:!0});a.value=n.task,S.value=!1}catch(n){alert(((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},dt=async r=>{try{const{data:e}=await b.patch(`/api/tasks/${y}/progress`,{progress:r},{withCredentials:!0});a.value.progress=e.progress}catch{alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.")}},it=async()=>{var e;if(!((e=T.value)!=null&&e.length))return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã");const r=new FormData;for(let n=0;n<T.value.length;n++)r.append("files[]",T.value[n]);try{await b.post(`/api/tasks/${y}/files`,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),T.value=null,await I()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤")}},ut=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,h.value=!0},vt=async()=>{var r,e;x.value=!0,A.value="";try{const n={title:i.value.title,executor_id:Array.isArray(i.value.executor_id)?i.value.executor_id:[i.value.executor_id],responsible_id:Array.isArray(i.value.responsible_id)?i.value.responsible_id:[i.value.responsible_id],start_date:i.value.start_date,due_date:i.value.due_date};await b.post(`/api/tasks/${y}/subtasks`,n),h.value=!1,await I()}catch(n){A.value=((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{x.value=!1}},Q=D(()=>{var r,e,n;return(n=(e=(r=a.value)==null?void 0:r.project)==null?void 0:e.executors)==null?void 0:n.some(p=>p.id===(c==null?void 0:c.id))}),ct=D(()=>{var r;return(((r=a.value)==null?void 0:r.subtasks)||[]).some(e=>!e.completed)}),pt=D(()=>{var r,e;return((r=a.value)==null?void 0:r.progress)===100&&!((e=a.value)!=null&&e.completed)&&!ct.value}),gt=async()=>{var r,e;try{const{data:n}=await b.patch(`/api/tasks/${y}/complete`,{},{withCredentials:!0});a.value=n.task}catch(n){const p=((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É";alert(p)}},bt=D(()=>{var e,n;const r=(n=(e=j.auth)==null?void 0:e.user)==null?void 0:n.id;return!r||!a.value?!1:(a.value.executors||[]).some(p=>p.id===r)||(a.value.responsibles||[]).some(p=>p.id===r)}),xt=D(()=>{var r,e,n;return!a.value||!c?!1:(a.value.executors||[]).some(p=>p.id===c.id)||(a.value.responsibles||[]).some(p=>p.id===c.id)||(((r=a.value.project)==null?void 0:r.executors)||[]).some(p=>p.id===c.id)||c.id===((n=(e=a.value.project)==null?void 0:e.company)==null?void 0:n.user_id)}),mt=D(()=>{var r,e,n;return!a.value||!c?!1:c.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((n=a.value.project)==null?void 0:n.managers)||[]).some(p=>p.id===c.id)||Q.value}),yt=D(()=>{var r,e,n;return!a.value||!c?!1:c.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((n=a.value.project)==null?void 0:n.managers)||[]).some(p=>p.id===c.id)||Q.value}),G=u(!1),J=u(!1),X=u(""),kt=async()=>{var r,e;X.value="",J.value=!0;try{await b.delete(`/api/tasks/${y}`,{withCredentials:!0}),G.value=!1,alert("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞."),window.history.back()}catch(n){X.value=((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏"}finally{J.value=!1}},Y=u(!1),ee=u(null),ft=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,Y.value=!0},wt=async()=>{var r,e;if(ee.value)try{const{data:n}=await b.post(`/api/tasks/${y}/watchers`,{user_id:ee.value},{withCredentials:!0});a.value.watchers=n.watchers,Y.value=!1}catch(n){alert(((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è")}},te=u(!1),se=u(!1),ke=u(null),fe=D(()=>{var r,e,n;return!a.value||!c?!1:c.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((n=a.value.project)==null?void 0:n.managers)||[]).some(p=>p.id===c.id)||Q.value}),we=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);v.value=r},ht=async()=>{await we(),ke.value=null,te.value=!0},_t=async()=>{await we(),ke.value=null,se.value=!0},ae=u(!1),le=u(!1),W=u([]),H=u([]),oe=u([]),$t=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);oe.value=r,ae.value=!0},Ct=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);oe.value=r,le.value=!0},jt=async()=>{W.value.length&&(await b.post(`/api/tasks/${y}/executors/add`,{user_ids:W.value}),await I(),ae.value=!1,W.value=[])},Mt=async()=>{H.value.length&&(await b.post(`/api/tasks/${y}/responsibles/add`,{user_ids:H.value}),await I(),le.value=!1,H.value=[])},ge=u(!1),q=u(""),Ut=async r=>{var e,n,p,M,U;q.value="";try{await b.delete(`/api/tasks/${y}/executors`,{data:{user_id:r}}),await I()}catch(C){q.value=((n=(e=C.response)==null?void 0:e.data)==null?void 0:n.message)||((U=Object.values(((M=(p=C.response)==null?void 0:p.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Vt=async r=>{var e,n,p,M,U;q.value="";try{await b.delete(`/api/tasks/${y}/responsibles`,{data:{user_id:r}}),await I()}catch(C){q.value=((n=(e=C.response)==null?void 0:e.data)==null?void 0:n.message)||((U=Object.values(((M=(p=C.response)==null?void 0:p.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},It=async r=>{var e,n,p,M,U;q.value="";try{await b.delete(`/api/tasks/${y}/watchers`,{data:{user_id:r}}),await I()}catch(C){q.value=((n=(e=C.response)==null?void 0:e.data)==null?void 0:n.message)||((U=Object.values(((M=(p=C.response)==null?void 0:p.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è"}},re=u(null),ne=u(null),de=u(null),ie=u(null),Z=u(""),P=u(""),Et=D(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.executors||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),St=D(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.responsibles||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),At=async()=>{var r,e;if(Z.value="",!re.value||!ne.value){Z.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${y}/executor`,{replace_user_id:re.value,user_id:ne.value}),await I(),te.value=!1}catch(n){Z.value=((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è."}},Tt=async()=>{var r,e;if(P.value="",!de.value||!ie.value){P.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${y}/responsible`,{replace_user_id:de.value,user_id:ie.value}),await I(),se.value=!1}catch(n){P.value=((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ."}},ue=u(!1),ve=u(!1),K=u({description:""}),zt=()=>{var r;K.value.description=((r=a.value)==null?void 0:r.description)||"",ue.value=!0},Dt=async()=>{var r,e;if(a.value){ve.value=!0;try{await b.patch(`/api/tasks/${a.value.id}/description`,{description:K.value.description}),a.value.description=K.value.description,ue.value=!1}catch(n){alert(((e=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è")}finally{ve.value=!1}}},Ft=async r=>{var e,n;if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?"))try{await b.delete(`/api/tasks/files/${r}`),a.value.files=a.value.files.filter(p=>p.id!==r)}catch(p){alert(((n=(e=p.response)==null?void 0:e.data)==null?void 0:n.message)||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞")}},Rt=r=>{var M,U;if(!c||!a.value)return!1;const e=r.user_id===c.id,n=(M=a.value.executors)==null?void 0:M.some(C=>C.id===c.id),p=(U=a.value.responsibles)==null?void 0:U.some(C=>C.id===c.id);return e||n||p};return ye(I),(r,e)=>{var p;const n=Ot("Head");return l(),o(m,null,[ce(n,{title:(p=a.value)!=null&&p.title?`–ó–∞–¥–∞—á–∞ ‚Äî ${a.value.title}`:"–ó–∞–¥–∞—á–∞"},null,8,["title"]),ce(Wt,null,{default:Bt(()=>{var M,U,C,_e,$e,Ce,je,Me,Ue,Ve,Ie,Ee,Se,Ae,Te,ze,De,Fe,Re,qe,Le,Oe,Be,Ne,We,He,Ze,Pe,Ke,Qe,Ge,Je,Xe,Ye,et,tt,st,at,lt,ot,rt,nt;return[t("div",ws,[e[46]||(e[46]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600"},null,-1)),t("div",hs,[t("div",_s,[t("div",$s,[t("div",Cs,[t("h1",js,d(((M=a.value)==null?void 0:M.title)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),(C=(U=a.value)==null?void 0:U.watcherstask)!=null&&C.some(s=>s.id===r.$page.props.auth.user.id)?(l(),o("span",Ms," üëÅ –í—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç–µ ")):g("",!0)]),t("div",Us,[t("span",Vs,[e[31]||(e[31]=$("üìÅ –ü—Ä–æ–µ–∫—Ç: ",-1)),t("b",null,d((($e=(_e=a.value)==null?void 0:_e.project)==null?void 0:$e.name)??"‚Äî"),1)]),t("span",Is,[e[32]||(e[32]=$("üè¢ –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),t("b",null,d(((Me=(je=(Ce=a.value)==null?void 0:Ce.project)==null?void 0:je.company)==null?void 0:Me.name)??"‚Äî"),1)]),t("span",Es,[e[33]||(e[33]=$("üë§ –û—Ç: ",-1)),t("b",null,d(((Ve=(Ue=a.value)==null?void 0:Ue.creator)==null?void 0:Ve.name)??"‚Äî"),1)]),t("span",Ss,[e[34]||(e[34]=$(" üë∑ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏: ",-1)),t("b",null,d((Ee=(Ie=a.value)==null?void 0:Ie.executors)!=null&&Ee.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",As,[e[35]||(e[35]=$(" üë®‚Äçüíº –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ: ",-1)),t("b",null,d((Ae=(Se=a.value)==null?void 0:Se.responsibles)!=null&&Ae.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Ts,[e[36]||(e[36]=$(" üëÅ –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1)),t("b",null,d((ze=(Te=a.value)==null?void 0:Te.watcherstask)!=null&&ze.length?a.value.watcherstask.map(s=>s.name).join(", "):"‚Äî"),1)]),a.value?(l(),o("span",{key:0,class:N(["badge bg-white text-gray-900 ring-1",_(a.value.priority)])},[e[37]||(e[37]=$(" ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ",-1)),t("b",null,d(B(a.value.priority)),1)],2)):g("",!0)]),(De=a.value)!=null&&De.description?(l(),o("div",zs,[e[38]||(e[38]=t("h3",{class:"text-base font-semibold mb-1"},"üìù –û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",Ds,d(a.value.description),1)])):g("",!0)]),t("div",Fs,[t("div",Rs,[yt.value?(l(),o("button",{key:0,onClick:e[0]||(e[0]=s=>S.value=!0),class:"btn-action bg-blue-600 hover:bg-blue-700 text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å ")):g("",!0),mt.value?(l(),o("button",{key:1,onClick:e[1]||(e[1]=s=>G.value=!0),class:"btn-action bg-rose-500 hover:bg-rose-600 text-white"}," üóë –£–¥–∞–ª–∏—Ç—å ")):g("",!0),G.value?(l(),o("div",qs,[t("div",Ls,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É? ",-1)),e[41]||(e[41]=$()),e[42]||(e[42]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},[$(" –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ "),t("span",{class:"font-semibold text-rose-600"},"–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ"),$("."),t("br"),$(" –ó–∞–¥–∞—á–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã. ")],-1)),e[43]||(e[43]=$()),X.value?(l(),o("p",Os,d(X.value),1)):g("",!0),e[44]||(e[44]=$()),t("div",Bs,[t("button",{style:{color:"gray"},onClick:e[2]||(e[2]=s=>G.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –û—Ç–º–µ–Ω–∞ "),e[39]||(e[39]=$()),t("button",{onClick:kt,class:"px-4 py-2 rounded-lg bg-rose-600 hover:bg-rose-700 text-white",disabled:J.value},[J.value?(l(),o("span",Hs,"–£–¥–∞–ª—è—é‚Ä¶")):(l(),o("span",Ws,"–£–¥–∞–ª–∏—Ç—å"))],8,Ns)])])])):g("",!0),t("button",{onClick:zt,class:"btn-action bg-indigo-500 hover:bg-indigo-600 text-white"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ "),(Re=(Fe=a.value)==null?void 0:Fe.project)!=null&&Re.id?(l(),o("a",{key:3,href:`/projects/${a.value.project.id}`,class:"btn-action bg-white hover:bg-gray-100 text-gray-900"}," üîô –ö –ø—Ä–æ–µ–∫—Ç—É ",8,Zs)):g("",!0)]),fe.value?(l(),o("div",Ps,[e[45]||(e[45]=t("h4",{class:"col-span-2 text-sm uppercase tracking-wide text-white/70 font-semibold mb-1"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ",-1)),t("button",{onClick:ht,class:"btn-grid bg-blue-500 hover:bg-blue-600"}," üë∑ –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:_t,class:"btn-grid bg-indigo-500 hover:bg-indigo-600"}," üë®‚Äçüíº –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:$t,class:"btn-grid bg-emerald-500 hover:bg-emerald-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:Ct,class:"btn-grid bg-teal-500 hover:bg-teal-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:ft,class:"btn-grid bg-purple-500 hover:bg-purple-600 col-span-2"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è "),fe.value?(l(),o("button",{key:0,onClick:e[3]||(e[3]=s=>ge.value=!0),class:"btn-grid bg-gray-500 hover:bg-purple-600 col-span-2"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")):g("",!0)])):g("",!0),bt.value?(l(),o("div",Ks,[pt.value?(l(),o("button",{key:0,onClick:gt,class:"btn-action bg-emerald-600 hover:bg-emerald-700 text-white"}," ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É ")):((qe=a.value)==null?void 0:qe.progress)===100&&!((Le=a.value)!=null&&Le.completed)?(l(),o("div",Qs," –ï—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É. ")):g("",!0),(Oe=a.value)!=null&&Oe.completed?(l(),o("div",Gs," ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ "+d(((Be=a.value)==null?void 0:Be.completed_at)||""),1)):g("",!0)])):g("",!0)])])])]),t("div",Js,[t("div",Xs,[t("div",Ys,[t("div",ea,[t("div",ta,[t("div",null,[e[47]||(e[47]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("div",sa,d(((Ne=a.value)==null?void 0:Ne.start_date)??"‚Äî"),1)]),t("div",null,[e[48]||(e[48]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("div",aa,d(((We=a.value)==null?void 0:We.due_date)??"‚Äî"),1)]),t("div",null,[e[49]||(e[49]=t("div",{class:"text-xs text-gray-500"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),t("div",la,[t("div",oa,[t("div",{class:"h-2 bg-emerald-500",style:Nt({width:(((He=a.value)==null?void 0:He.progress)||0)+"%"})},null,4)]),t("div",ra,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+d(((Ze=a.value)==null?void 0:Ze.progress)??0)+"%",1)]),t("div",na,[(l(),o(m,null,k(11,s=>{var E;return t("button",{key:s,onClick:be=>dt((s-1)*10),class:N(["flex-1 h-5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300",{"!bg-emerald-500":(((E=a.value)==null?void 0:E.progress)||0)>=(s-1)*10}]),title:`${(s-1)*10}%`},null,10,da)}),64))])])])]),t("div",ia,[xt.value?(l(),o("div",ua,[t("input",{type:"file",multiple:"",onChange:O,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"text-sm text-gray-600 dark:text-gray-300"},null,32),t("button",{onClick:it,class:"rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 mt-4"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å ")])):g("",!0),V.value?(l(),o("div",va,[(l(),o(m,null,k(4,s=>t("div",{key:s,class:"h-8 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"})),64))])):(l(),o("div",ca,[(Ke=(Pe=a.value)==null?void 0:Pe.files)!=null&&Ke.length?(l(),o("div",ga,[(l(!0),o(m,null,k(a.value.files,s=>(l(),o("a",{key:s.id,href:`/api/tasks/files/${s.id}`,class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100"},[$(d(s.file_path.split("/").pop())+" ",1),Rt(s)?(l(),o("button",{key:0,onClick:xe(E=>Ft(s.id),["prevent"]),class:"ml-1 text-red-500 hover:text-red-700"}," ‚úï ",8,xa)):g("",!0)],8,ba))),128))])):(l(),o("div",pa," –§–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã. "))]))]),t("div",ma,[t("div",ya,[e[50]||(e[50]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ü–æ–¥–∑–∞–¥–∞—á–∏",-1)),z.value?(l(),o("button",{key:0,onClick:ut,class:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700"}," + –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):g("",!0)]),V.value?(l(),o("div",ka,[(l(),o(m,null,k(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[51]||(e[51]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(Ge=(Qe=a.value)==null?void 0:Qe.subtasks)!=null&&Ge.length?(l(),o("div",wa,[(l(!0),o(m,null,k(a.value.subtasks,s=>{var E;return l(),o("div",{key:s.id,onClick:be=>r.$inertia.visit(`/subtasks/${s.id}`),class:N(["group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",[s.progress===100?"border-emerald-500 ring-1 ring-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":s.progress>=50?"border-amber-400 ring-1 ring-amber-300 bg-amber-50 dark:bg-amber-900/20":"border-gray-400 ring-1 ring-gray-300 bg-gray-50 dark:bg-rose-900/20"]])},[t("div",_a,[t("h3",$a,d(s.title),1),t("span",{class:N(["text-sm px-2 py-1 rounded-full",{"bg-emerald-100 text-emerald-700":s.progress===100,"bg-amber-100 text-amber-700":s.progress>=50&&s.progress<100,"bg-rose-100 text-rose-700":s.progress<50}])},d(s.progress??0)+"% ",3)]),t("div",Ca,[t("div",null,[e[52]||(e[52]=$(" –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: ",-1)),t("b",null,d(((E=s.executors)==null?void 0:E.map(be=>be.name).join(", "))||"‚Äî"),1)]),t("div",null,"–°—Ä–æ–∫–∏: "+d(s.start_date)+" ‚Äî "+d(s.due_date),1)])],10,ha)}),128))])):(l(),o("div",fa," –ü–æ–¥–∑–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. "))])]),t("div",ja,[t("div",Ma,[e[59]||(e[59]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ",-1)),t("dl",Ua,[t("div",Va,[e[53]||(e[53]=t("dt",null,"–ê–≤—Ç–æ—Ä",-1)),t("dd",Ia,d(((Xe=(Je=a.value)==null?void 0:Je.creator)==null?void 0:Xe.name)??"‚Äî"),1)]),t("div",Ea,[e[54]||(e[54]=t("dt",null,"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("dd",Sa,d((et=(Ye=a.value)==null?void 0:Ye.executors)!=null&&et.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Aa,[e[55]||(e[55]=t("dt",null,"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("dd",Ta,d((st=(tt=a.value)==null?void 0:tt.responsibles)!=null&&st.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",za,[e[56]||(e[56]=t("dt",null,"–ü—Ä–æ–µ–∫—Ç",-1)),t("dd",Da,d(((lt=(at=a.value)==null?void 0:at.project)==null?void 0:lt.name)??"‚Äî"),1)]),t("div",Fa,[e[57]||(e[57]=t("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),t("dd",Ra,d(((nt=(rt=(ot=a.value)==null?void 0:ot.project)==null?void 0:rt.company)==null?void 0:nt.name)??"‚Äî"),1)]),t("div",qa,[e[58]||(e[58]=t("dt",null,"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),t("dd",null,[a.value?(l(),o("span",{key:0,class:N(["px-2 py-1 text-xs rounded-full ring-1",_(a.value.priority)])},d(B(a.value.priority)),3)):g("",!0)])])])]),a.value?(l(),o("div",La,[ce(fs,{"task-id":a.value.id,executors:a.value.executors,responsibles:a.value.responsibles,creator:a.value.creator},null,8,["task-id","executors","responsibles","creator"])])):g("",!0)])]),a.value?(l(),o("div",Oa,[t("div",Ba,[e[60]||(e[60]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ß–∞—Ç",-1)),ce(rs,{"task-id":a.value.id,"can-chat":!0,members:[...a.value.executors??[],...a.value.responsibles??[]]},null,8,["task-id","members"])])])):(l(),o("div",Na,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"))]),h.value?(l(),o("div",Wa,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>h.value=!1)}),t("div",Ha,[t("div",Za,[e[61]||(e[61]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ù–æ–≤–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞",-1)),t("button",{onClick:e[5]||(e[5]=s=>h.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),A.value?(l(),o("p",Pa,d(A.value),1)):g("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:xe(vt,["prevent"])},[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>i.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.title]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.executor_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[63]||(e[63]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,Ka))),128))],512),[[L,i.value.executor_id]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.responsible_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[65]||(e[65]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,Qa))),128))],512),[[L,i.value.responsible_id]])]),t("div",Ga,[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>i.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.start_date]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>i.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.due_date]])])]),t("div",Ja,[t("button",{type:"button",onClick:e[11]||(e[11]=s=>h.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{type:"submit",disabled:x.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[x.value?(l(),o("span",el,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Ya,"–°–æ–∑–¥–∞—Ç—å"))],8,Xa)])],32)])])):g("",!0),S.value?(l(),o("div",tl,[t("div",sl,[e[73]||(e[73]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É",-1)),t("form",{onSubmit:xe(pe,["prevent"])},[t("div",al,[e[69]||(e[69]=t("label",{class:"block text-sm text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{required:"","onUpdate:modelValue":e[12]||(e[12]=s=>f.value.title=s),type:"text",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.title]])]),t("div",ll,[e[70]||(e[70]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),w(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>f.value.start_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.start_date]])]),t("div",ol,[e[71]||(e[71]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>f.value.due_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.due_date]])]),t("div",rl,[t("button",{type:"button",onClick:e[15]||(e[15]=s=>S.value=!1),class:"px-4 py-2 border rounded"},"–û—Ç–º–µ–Ω–∞"),e[72]||(e[72]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):g("",!0),Y.value?(l(),o("div",nl,[t("div",dl,[e[74]||(e[74]=t("h3",{class:"font-semibold mb-3"},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),w(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>ee.value=s),class:"w-full border p-2 rounded"},[(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,il))),128))],512),[[L,ee.value]]),t("div",ul,[t("button",{onClick:e[17]||(e[17]=s=>Y.value=!1),class:"px-3 py-1 border rounded"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:wt,class:"px-3 py-1 bg-blue-600 text-white rounded"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),te.value?(l(),o("div",vl,[t("div",cl,[e[77]||(e[77]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),e[78]||(e[78]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>re.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[75]||(e[75]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(m,null,k(a.value.executors,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,pl))),128))],512),[[L,re.value]]),e[79]||(e[79]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>ne.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[76]||(e[76]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(m,null,k(Et.value,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,gl))),128))],512),[[L,ne.value]]),Z.value?(l(),o("p",bl,d(Z.value),1)):g("",!0),t("div",xl,[t("button",{onClick:e[20]||(e[20]=s=>te.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:At,class:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0),se.value?(l(),o("div",ml,[t("div",yl,[e[82]||(e[82]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),e[83]||(e[83]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>de.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[80]||(e[80]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(m,null,k(a.value.responsibles,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,kl))),128))],512),[[L,de.value]]),e[84]||(e[84]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>ie.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[81]||(e[81]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(m,null,k(St.value,s=>(l(),o("option",{key:s.id,value:s.id},d(s.name),9,fl))),128))],512),[[L,ie.value]]),P.value?(l(),o("p",wl,d(P.value),1)):g("",!0),t("div",hl,[t("button",{onClick:e[23]||(e[23]=s=>se.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Tt,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0),ae.value?(l(),o("div",_l,[t("div",$l,[e[85]||(e[85]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π",-1)),t("div",Cl,[(l(!0),o(m,null,k(oe.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[24]||(e[24]=E=>W.value=E)},null,8,jl),[[me,W.value]]),t("span",null,d(s.name),1)]))),128))]),t("div",Ml,[t("button",{onClick:e[25]||(e[25]=s=>ae.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:jt,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),le.value?(l(),o("div",Ul,[t("div",Vl,[e[86]||(e[86]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö",-1)),t("div",Il,[(l(!0),o(m,null,k(oe.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[26]||(e[26]=E=>H.value=E)},null,8,El),[[me,H.value]]),t("span",null,d(s.name),1)]))),128))]),t("div",Sl,[t("button",{onClick:e[27]||(e[27]=s=>le.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Mt,class:"px-4 py-2 bg-teal-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),ge.value?(l(),o("div",Al,[t("div",Tl,[e[90]||(e[90]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∑–∞–¥–∞—á–∏ ",-1)),t("div",zl,[t("div",null,[e[87]||(e[87]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),(l(!0),o(m,null,k(a.value.executors,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,d(s.name),1),t("button",{onClick:E=>Ut(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Dl)]))),128))]),t("div",null,[e[88]||(e[88]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),(l(!0),o(m,null,k(a.value.responsibles,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,d(s.name),1),t("button",{onClick:E=>Vt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Fl)]))),128))]),t("div",null,[e[89]||(e[89]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏",-1)),(l(!0),o(m,null,k(a.value.watcherstask,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,d(s.name),1),t("button",{onClick:E=>It(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Rl)]))),128))])]),q.value?(l(),o("p",ql,d(q.value),1)):g("",!0),t("div",Ll,[t("button",{onClick:e[28]||(e[28]=s=>ge.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):g("",!0),ue.value?(l(),o("div",Ol,[t("div",Bl,[e[91]||(e[91]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ ",-1)),w(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=s=>K.value.description=s),class:"w-full border rounded-lg p-3 min-h-[150px] dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."},null,512),[[R,K.value.description]]),t("div",Nl,[t("button",{onClick:e[30]||(e[30]=s=>ue.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600 dark:border-gray-500"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Dt,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",disabled:ve.value},[ve.value?(l(),o("span",Zl,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Hl,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,Wl)])])])):g("",!0)]}),_:1})],64)}}},Xl=Ht(Pl,[["__scopeId","data-v-7ba1693d"]]);export{Xl as default};
