import{Q as Ae,r as c,m as V,q as Ne,o as r,f as o,a as ie,u as Pe,w as ce,F as b,i as v,Z as Be,b as t,t as u,n as ge,d as Te,g,x as y,j as f,s as K,v as W,k as X}from"./app-5888f776.js";import{_ as qe}from"./AuthenticatedLayout-b88ecb5b.js";import"./ApplicationLogo-b3626dd6.js";import"./_plugin-vue_export-helper-c27b6911.js";const Le={class:"flex items-center justify-between gap-3"},Oe={class:"text-xl font-bold text-gray-800 dark:text-gray-200"},Qe={key:0,class:"flex items-center gap-2"},Ze={class:"inline-flex items-center gap-2 text-sm px-3 py-1 rounded-full ring-1 ring-gray-200 dark:ring-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},Ge={key:3,class:"px-3 py-1.5 rounded-md bg-emerald-100 text-emerald-700 text-sm dark:bg-emerald-900/30 dark:text-emerald-300"},He={class:"max-w-4xl mx-auto py-8 px-4"},Je={key:0,class:"grid gap-6"},Ke={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},We={class:"grid sm:grid-cols-2 gap-4 text-sm"},Xe={class:"font-medium text-gray-900 dark:text-white"},Ye={class:"font-medium text-gray-900 dark:text-white"},et={class:"font-medium text-gray-900 dark:text-white"},tt={key:0,class:"flex flex-wrap gap-2 mt-4"},st={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6"},at={class:"flex items-center justify-between mb-3"},lt={class:"text-sm text-gray-500 dark:text-gray-400"},rt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ot={class:"font-medium text-gray-900 dark:text-white"},dt={class:"font-medium text-gray-900 dark:text-white"},nt={class:"flex mt-2 space-x-1 select-none"},ut=["title","onClick"],it={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},ct={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 mt-6"},gt={class:"flex items-center justify-between mb-3"},vt={key:0},pt={key:0,class:"space-y-2"},xt=["href"],bt=["onClick"],mt={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},yt={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},kt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},ft=["value"],ht=["value"],wt={key:0,class:"text-rose-600 text-sm mt-2"},_t={class:"flex justify-end gap-2 mt-4"},Ct={key:1,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},jt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},$t={class:"space-y-4"},Et={class:"max-h-40 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Mt=["value"],Vt={class:"max-h-40 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Ut=["value"],St={key:0,class:"text-rose-600 text-sm mt-3"},It={class:"flex justify-end gap-2 mt-5"},Rt=["disabled"],zt={key:0},Ft={key:1},Dt={key:2,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},At={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Nt=["value"],Pt=["value"],Bt={key:0,class:"text-rose-600 text-sm mt-2"},Tt={class:"flex justify-end gap-2 mt-4"},qt={key:3,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Lt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Ot={class:"max-h-60 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Qt=["value"],Zt={class:"flex justify-end gap-2 mt-4"},Gt={key:4,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Ht={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Jt={class:"max-h-60 overflow-y-auto border rounded-lg p-2 dark:border-gray-600"},Kt=["value"],Wt={class:"flex justify-end gap-2 mt-4"},Xt={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Yt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-3xl shadow-xl"},es={key:0,class:"text-sm text-rose-600 mb-3"},ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},ss={class:"space-y-2"},as=["onClick"],ls={key:0,class:"text-sm text-gray-500"},rs={class:"space-y-2"},os=["onClick"],ds={key:0,class:"text-sm text-gray-500"},ns={class:"flex justify-end mt-6"},us={class:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 mt-6"},is={class:"flex items-center justify-between mb-3"},cs={key:0,class:"space-y-2"},gs={class:"font-medium"},vs={class:"text-xs text-gray-500 ml-2"},ps=["href"],xs={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},bs={key:6,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},ms={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},ys={class:"space-y-4"},ks={key:0,class:"text-rose-600 text-sm mt-3"},fs={class:"flex justify-end gap-2 mt-5"},hs=["disabled"],ws={key:0},_s={key:1},Cs={key:1,class:"text-gray-600 dark:text-gray-300"},Ss={__name:"Show",setup(js){var le;const{props:ee}=Ae(),k=ee.id,l=c(null),i=(le=ee.auth)==null?void 0:le.user,h=async()=>{const{data:a}=await v.get(`/api/subtasks/${k}`);l.value=a},S=V(()=>{var w,F;if(!l.value||!i)return!1;const a=((w=l.value.task)==null?void 0:w.project)||{},e=(l.value.executors||[]).some($=>$.id===i.id),d=(l.value.responsibles||[]).some($=>$.id===i.id),n=(a.executors||[]).some($=>$.id===i.id),p=(a.managers||[]).some($=>$.id===i.id),x=((F=a.company)==null?void 0:F.user_id)===i.id,j=l.value.creator_id===i.id;return e||d||n||p||x||j}),te=V(()=>l.value?S.value&&l.value.progress===100&&!l.value.completed:!1),ve=async a=>{if(!S.value)return;const{data:e}=await v.patch(`/api/subtasks/${k}/progress`,{progress:a});l.value.progress=e.progress},pe=async()=>{if(!te.value||!confirm("–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É?"))return;const{data:a}=await v.patch(`/api/subtasks/${k}/complete`);l.value.completed=a.completed,l.value.completed_at=a.completed_at},xe=async a=>{var e,d;if(confirm("–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É?"))try{await v.delete(`/api/subtasks/${a}`,{withCredentials:!0}),alert("–ü–æ–¥–∑–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞"),window.history.back()}catch(n){alert(((d=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:d.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏")}},be=a=>{var d,n,p,x,j;const e=i==null?void 0:i.id;return e?e===a.creator_id||e===((p=(n=(d=a.task)==null?void 0:d.project)==null?void 0:n.company)==null?void 0:p.user_id)||(((j=(x=a.task)==null?void 0:x.project)==null?void 0:j.managers)||[]).some(w=>w.id===e):!1},D=c(!1),A=c(!1),N=c(!1),P=c(!1),E=c([]);c(null);const _=c([]),me=V(()=>{var a,e,d,n,p,x,j;return!l.value||!i?!1:i.id===((d=(e=(a=l.value.task)==null?void 0:a.project)==null?void 0:e.company)==null?void 0:d.user_id)||(((p=(n=l.value.task)==null?void 0:n.project)==null?void 0:p.managers)||[]).some(w=>w.id===i.id)||(((j=(x=l.value.task)==null?void 0:x.project)==null?void 0:j.executors)||[]).some(w=>w.id===i.id)}),I=async()=>{const{data:a}=await v.get(`/api/projects/${l.value.task.project.id}/employees`);E.value=a},ye=async()=>{await I(),D.value=!0},ke=async()=>{await I(),A.value=!0},fe=async()=>{await I(),N.value=!0},he=async()=>{await I(),P.value=!0},we=async()=>{var a,e;if(!_.value.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.");try{await v.post(`/api/subtasks/${k}/executors/add`,{user_ids:_.value}),await h(),N.value=!1,_.value=[]}catch(d){alert(((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π")}},_e=async()=>{var a,e;if(!_.value.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.");try{await v.post(`/api/subtasks/${k}/responsibles/add`,{user_ids:_.value}),await h(),P.value=!1,_.value=[]}catch(d){alert(((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö")}},B=c(null),T=c(null),q=c(null),L=c(null),R=c(""),z=c(""),Ce=V(()=>{if(!E.value.length||!l.value)return[];const a=(l.value.executors||[]).map(e=>e.id);return E.value.filter(e=>!a.includes(e.id))}),je=V(()=>{if(!E.value.length||!l.value)return[];const a=(l.value.responsibles||[]).map(e=>e.id);return E.value.filter(e=>!a.includes(e.id))}),$e=async()=>{var a,e;if(R.value="",!B.value||!T.value){R.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await v.patch(`/api/subtasks/${k}/executor/change`,{replace_user_id:B.value,user_id:T.value}),D.value=!1,await h()}catch(d){R.value=((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Ee=async()=>{var a,e;if(z.value="",!q.value||!L.value){z.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await v.patch(`/api/subtasks/${k}/responsible/change`,{replace_user_id:q.value,user_id:L.value}),A.value=!1,await h()}catch(d){z.value=((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},Y=c(!1),U=c(""),Me=async a=>{var e,d;U.value="";try{await v.delete(`/api/subtasks/${k}/executors`,{data:{user_id:a}}),await h()}catch(n){U.value=((d=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:d.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Ve=async a=>{var e,d;U.value="";try{await v.delete(`/api/subtasks/${k}/responsibles`,{data:{user_id:a}}),await h()}catch(n){U.value=((d=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:d.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},O=c(!1),Q=c(!1),Z=c(""),M=c({title:"",due_date:""}),Ue=()=>{l.value&&(M.value.title=l.value.title,M.value.due_date=l.value.due_date,O.value=!0)},Se=async()=>{var a,e;Z.value="",Q.value=!0;try{await v.patch(`/api/subtasks/${k}/update`,M.value),await h(),O.value=!1}catch(d){Z.value=((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{Q.value=!1}},se=V(()=>{var e,d;if(!l.value||!i)return!1;const a=(e=l.value.task)==null?void 0:e.project;return i.id===l.value.creator_id||i.id===((d=a==null?void 0:a.company)==null?void 0:d.user_id)||((a==null?void 0:a.managers)||[]).some(n=>n.id===i.id)||((a==null?void 0:a.executors)||[]).some(n=>n.id===i.id)}),ae=V(()=>{var e,d;if(!l.value||!i)return!1;const a=((e=l.value.task)==null?void 0:e.project)||{};return i.id===l.value.creator_id||(l.value.executors||[]).some(n=>n.id===i.id)||(l.value.responsibles||[]).some(n=>n.id===i.id)||(a.executors||[]).some(n=>n.id===i.id)||(a.managers||[]).some(n=>n.id===i.id)||((d=a.company)==null?void 0:d.user_id)===i.id}),Ie=c(null),Re=async a=>{var n,p;const e=a.target.files[0];if(!e)return;const d=new FormData;d.append("file",e);try{await v.post(`/api/subtasks/${k}/files`,d,{headers:{"Content-Type":"multipart/form-data"}}),await h()}catch(x){alert(((p=(n=x==null?void 0:x.response)==null?void 0:n.data)==null?void 0:p.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞")}},ze=async a=>{var e,d;if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?"))try{await v.delete(`/api/subtask-files/${a}`),await h()}catch(n){alert(((d=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:d.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞")}},G=c(!1),H=c(!1),J=c(""),C=c({title:"",due_date:"",executor_ids:[],responsible_ids:[]}),Fe=async()=>{await I(),G.value=!0},De=async()=>{var a,e;if(l.value){J.value="",H.value=!0;try{await v.post(`/api/subtasks/${k}/children`,C.value),await h(),G.value=!1,C.value={title:"",due_date:"",executor_ids:[],responsible_ids:[]}}catch(d){J.value=((e=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{H.value=!1}}};return Ne(h),(a,e)=>(r(),o(b,null,[ie(Pe(Be),{title:"–ü–æ–¥–∑–∞–¥–∞—á–∞"}),ie(qe,null,{header:ce(()=>{var d,n;return[t("div",Le,[t("h2",Oe," –ü–æ–¥–∑–∞–¥–∞—á–∞: "+u(((d=l.value)==null?void 0:d.title)??"–ó–∞–≥—Ä—É–∑–∫–∞..."),1),l.value?(r(),o("div",Qe,[t("span",Ze,[t("span",{class:ge(["w-2 h-2 rounded-full",{"bg-red-500":(l.value.progress??0)<30,"bg-amber-500":(l.value.progress??0)>=30&&(l.value.progress??0)<70,"bg-green-500":(l.value.progress??0)>=70}])},null,2),Te(" "+u(l.value.progress??0)+"% ",1)]),te.value?(r(),o("button",{key:0,onClick:pe,class:"px-3 py-1.5 rounded-md bg-emerald-600 text-white text-sm hover:bg-emerald-700"}," –ó–∞–≤–µ—Ä—à–∏—Ç—å ")):g("",!0),se.value?(r(),o("button",{key:1,onClick:Ue,class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ")):g("",!0),be(l.value)?(r(),o("button",{key:2,onClick:e[0]||(e[0]=p=>xe(l.value.id)),class:"px-3 py-1 bg-rose-600 hover:bg-rose-700 text-white text-sm rounded-md"}," üóë –£–¥–∞–ª–∏—Ç—å ")):l.value.completed?(r(),o("span",Ge," –ó–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Ä¢ "+u(((n=l.value.completed_at)==null?void 0:n.slice(0,16))??""),1)):g("",!0)])):g("",!0)])]}),default:ce(()=>{var d,n,p,x,j,w,F,$,re,oe,de,ne,ue;return[t("div",He,[l.value?(r(),o("div",Je,[t("div",Ke,[t("div",We,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–ê–≤—Ç–æ—Ä",-1)),t("p",Xe,u((d=l.value.creator)==null?void 0:d.name),1),e[23]||(e[23]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-4"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("p",Ye,u((n=l.value.executors)!=null&&n.length?l.value.executors.map(s=>s.name).join(", "):"‚Äî"),1),e[24]||(e[24]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-4"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("p",et,u((p=l.value.responsibles)!=null&&p.length?l.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),me.value?(r(),o("div",tt,[t("button",{onClick:ye,class:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:ke,class:"px-3 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded-md"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:fe,class:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-white rounded-md"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:he,class:"px-3 py-1 bg-amber-500 hover:bg-amber-600 text-white rounded-md"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:e[1]||(e[1]=s=>Y.value=!0),class:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg"}," üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")])):g("",!0)])]),t("div",st,[t("div",at,[e[25]||(e[25]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),t("span",lt,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+u(l.value.progress??0)+"%",1)]),t("div",rt,[t("div",null,[e[26]||(e[26]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("p",ot,u(l.value.start_date),1)]),t("div",null,[e[27]||(e[27]=t("p",{class:"text-gray-500 dark:text-gray-400"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("p",dt,u(l.value.due_date),1)])]),t("div",nt,[(r(),o(b,null,y(10,s=>{var m;return t("div",{key:s,title:s*10+"%",onClick:$s=>S.value?ve(s*10):null,class:ge(["h-4 sm:h-5 flex-1 rounded transition",{"cursor-pointer hover:opacity-80":S.value,"bg-green-600":(l.value.progress??0)>=s*10,"bg-gray-200 dark:bg-gray-700":(l.value.progress??0)<s*10,"pointer-events-none opacity-60":(m=l.value)==null?void 0:m.completed}])},null,10,ut)}),64))]),S.value?g("",!0):(r(),o("p",it," –ò–∑–º–µ–Ω—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∏ –∞–≤—Ç–æ—Ä –ø–æ–¥–∑–∞–¥–∞—á–∏. "))]),t("div",ct,[t("div",gt,[e[28]||(e[28]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"üìé –§–∞–π–ª—ã –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),ae.value?(r(),o("div",vt,[t("input",{type:"file",onChange:Re,class:"hidden",ref_key:"fileInput",ref:Ie},null,544),t("button",{onClick:e[2]||(e[2]=s=>a.$refs.fileInput.click()),class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm"}," ‚¨ÜÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª ")])):g("",!0)]),(x=l.value.files)!=null&&x.length?(r(),o("ul",pt,[(r(!0),o(b,null,y(l.value.files,s=>(r(),o("li",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("a",{href:`/api/subtask-files/${s.id}/download`,class:"text-blue-600 dark:text-blue-400 hover:underline"},u(s.filename),9,xt),ae.value?(r(),o("button",{key:0,onClick:m=>ze(s.id),class:"text-rose-500 hover:text-rose-700 text-sm"}," ‚ùå ",8,bt)):g("",!0)]))),128))])):(r(),o("p",mt,"–ù–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"))]),D.value?(r(),o("div",yt,[t("div",kt,[e[31]||(e[31]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è ",-1)),e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>B.value=s),class:"w-full border rounded-lg p-2 mb-4 dark:bg-gray-700 dark:text-white"},[e[29]||(e[29]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(r(!0),o(b,null,y(((j=l.value)==null?void 0:j.executors)||[],s=>(r(),o("option",{key:s.id,value:s.id},u(s.name),9,ft))),128))],512),[[K,B.value]]),e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>T.value=s),class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},[e[30]||(e[30]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(r(!0),o(b,null,y(Ce.value,s=>(r(),o("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.email)+") ",9,ht))),128))],512),[[K,T.value]]),R.value?(r(),o("p",wt,u(R.value),1)):g("",!0),t("div",_t,[t("button",{onClick:e[5]||(e[5]=s=>D.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:$e,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ")])])])):g("",!0),G.value?(r(),o("div",Ct,[t("div",jt,[e[38]||(e[38]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," ‚ûï –ù–æ–≤–∞—è –¥–æ—á–µ—Ä–Ω—è—è –ø–æ–¥–∑–∞–¥–∞—á–∞ ",-1)),t("div",$t,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞–∑–≤–∞–Ω–∏–µ ",-1)),f(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>C.value.title=s),type:"text",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏"},null,512),[[W,C.value.title]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è ",-1)),f(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>C.value.due_date=s),type:"date",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},null,512),[[W,C.value.due_date]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ ",-1)),t("div",Et,[(r(!0),o(b,null,y(E.value,s=>(r(),o("label",{key:s.id,class:"flex items-center gap-2 py-1"},[f(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=m=>C.value.executor_ids=m),value:s.id},null,8,Mt),[[X,C.value.executor_ids]]),t("span",null,u(s.name)+" ("+u(s.email)+")",1)]))),128))])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ ",-1)),t("div",Vt,[(r(!0),o(b,null,y(E.value,s=>(r(),o("label",{key:s.id,class:"flex items-center gap-2 py-1"},[f(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=m=>C.value.responsible_ids=m),value:s.id},null,8,Ut),[[X,C.value.responsible_ids]]),t("span",null,u(s.name)+" ("+u(s.email)+")",1)]))),128))])])]),J.value?(r(),o("p",St,u(J.value),1)):g("",!0),t("div",It,[t("button",{onClick:e[10]||(e[10]=s=>G.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:De,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg",disabled:H.value},[H.value?(r(),o("span",Ft,"–°–æ–∑–¥–∞—é...")):(r(),o("span",zt,"–°–æ–∑–¥–∞—Ç—å"))],8,Rt)])])])):g("",!0),A.value?(r(),o("div",Dt,[t("div",At,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ ",-1)),e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),f(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>q.value=s),class:"w-full border rounded-lg p-2 mb-4 dark:bg-gray-700 dark:text-white"},[e[39]||(e[39]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(r(!0),o(b,null,y(((w=l.value)==null?void 0:w.responsibles)||[],s=>(r(),o("option",{key:s.id,value:s.id},u(s.name),9,Nt))),128))],512),[[K,q.value]]),e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å: ",-1)),f(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>L.value=s),class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},[e[40]||(e[40]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(r(!0),o(b,null,y(je.value,s=>(r(),o("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.email)+") ",9,Pt))),128))],512),[[K,L.value]]),z.value?(r(),o("p",Bt,u(z.value),1)):g("",!0),t("div",Tt,[t("button",{onClick:e[13]||(e[13]=s=>A.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Ee,class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ")])])])):g("",!0),N.value?(r(),o("div",qt,[t("div",Lt,[e[44]||(e[44]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π ",-1)),t("div",Ot,[(r(!0),o(b,null,y(E.value,s=>(r(),o("label",{key:s.id,class:"flex items-center gap-2 py-1"},[f(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=m=>_.value=m),value:s.id},null,8,Qt),[[X,_.value]]),t("span",null,u(s.name)+" ("+u(s.email)+")",1)]))),128))]),t("div",Zt,[t("button",{onClick:e[15]||(e[15]=s=>N.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:we,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg"}," –î–æ–±–∞–≤–∏—Ç—å ")])])])):g("",!0),P.value?(r(),o("div",Gt,[t("div",Ht,[e[45]||(e[45]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö ",-1)),t("div",Jt,[(r(!0),o(b,null,y(E.value,s=>(r(),o("label",{key:s.id,class:"flex items-center gap-2 py-1"},[f(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=m=>_.value=m),value:s.id},null,8,Kt),[[X,_.value]]),t("span",null,u(s.name)+" ("+u(s.email)+")",1)]))),128))]),t("div",Wt,[t("button",{onClick:e[17]||(e[17]=s=>P.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:_e,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg"}," –î–æ–±–∞–≤–∏—Ç—å ")])])])):g("",!0),Y.value?(r(),o("div",Xt,[t("div",Yt,[e[48]||(e[48]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ",-1)),U.value?(r(),o("p",es,u(U.value),1)):g("",!0),t("div",ts,[t("div",null,[e[46]||(e[46]=t("h4",{class:"text-gray-800 dark:text-gray-200 font-medium mb-2"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),t("ul",ss,[(r(!0),o(b,null,y(((F=l.value)==null?void 0:F.executors)||[],s=>(r(),o("li",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("span",null,u(s.name),1),t("button",{onClick:m=>Me(s.id),class:"text-rose-500 hover:text-rose-700",title:"–£–¥–∞–ª–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}," ‚ùå ",8,as)]))),128)),(re=($=l.value)==null?void 0:$.executors)!=null&&re.length?g("",!0):(r(),o("li",ls,"–ù–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π"))])]),t("div",null,[e[47]||(e[47]=t("h4",{class:"text-gray-800 dark:text-gray-200 font-medium mb-2"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),t("ul",rs,[(r(!0),o(b,null,y(((oe=l.value)==null?void 0:oe.responsibles)||[],s=>(r(),o("li",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("span",null,u(s.name),1),t("button",{onClick:m=>Ve(s.id),class:"text-rose-500 hover:text-rose-700",title:"–£–¥–∞–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}," ‚ùå ",8,os)]))),128)),(ne=(de=l.value)==null?void 0:de.responsibles)!=null&&ne.length?g("",!0):(r(),o("li",ds,"–ù–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö"))])])]),t("div",ns,[t("button",{onClick:e[18]||(e[18]=s=>Y.value=!1),class:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):g("",!0),t("div",us,[t("div",is,[e[49]||(e[49]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"üß© –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏",-1)),se.value?(r(),o("button",{key:0,onClick:Fe,class:"px-3 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded-md text-sm"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ")):g("",!0)]),(ue=l.value.children)!=null&&ue.length?(r(),o("ul",cs,[(r(!0),o(b,null,y(l.value.children,s=>(r(),o("li",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"},[t("div",null,[t("span",gs,u(s.title),1),t("span",vs,u(s.progress??0)+"%",1)]),t("a",{href:`/subtasks/${s.id}`,class:"text-blue-600 dark:text-blue-400 hover:underline text-sm"}," –û—Ç–∫—Ä—ã—Ç—å ‚Üí ",8,ps)]))),128))])):(r(),o("p",xs,"–ù–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ–¥–∑–∞–¥–∞—á"))]),O.value?(r(),o("div",bs,[t("div",ms,[e[52]||(e[52]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ",-1)),t("div",ys,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –ù–∞–∑–≤–∞–Ω–∏–µ ",-1)),f(t("input",{required:"","onUpdate:modelValue":e[19]||(e[19]=s=>M.value.title=s),type:"text",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"},null,512),[[W,M.value.title]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è ",-1)),f(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>M.value.due_date=s),type:"date",class:"w-full border rounded-lg p-2 dark:bg-gray-700 dark:text-white"},null,512),[[W,M.value.due_date]])])]),Z.value?(r(),o("p",ks,u(Z.value),1)):g("",!0),t("div",fs,[t("button",{onClick:e[21]||(e[21]=s=>O.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Se,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",disabled:Q.value},[Q.value?(r(),o("span",_s,"–°–æ—Ö—Ä–∞–Ω—è—é...")):(r(),o("span",ws,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,hs)])])])):g("",!0)])):(r(),o("div",Cs,"–ó–∞–≥—Ä—É–∑–∫–∞..."))])]}),_:1})],64))}};export{Ss as default};
