import{r as u,q as me,I as Rt,o as l,f as o,b as t,F as m,s as k,t as n,g,j as w,v as R,i as b,n as N,x as L,k as xe,d as C,Q as qt,m as D,A as Lt,a as ce,w as Ot,y as Bt,e as nt}from"./app-5f6cd45c.js";import{_ as Nt}from"./AuthenticatedLayout-b27a0fe4.js";import{_ as Wt}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-0d035f32.js";const Ht={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5 mt-8"},Zt={class:"space-y-3 max-h-80 overflow-y-auto pr-1"},Pt={class:"flex-1"},Kt={class:"flex items-center gap-2"},Qt={class:"text-sm font-medium text-gray-900 dark:text-white"},Gt={class:"text-xs text-gray-500"},Jt=["innerHTML"],Xt={key:0,class:"text-sm text-gray-500"},Yt={key:0,class:"mt-4"},es={class:"mt-2 flex justify-end"},ts=["disabled"],ss={key:1,class:"mt-3 text-xs text-gray-500"},as={key:2,class:"absolute bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-lg w-64 mt-1 z-50"},ls=["onClick"],os={__name:"TaskChat",props:{taskId:{type:Number,required:!0},canChat:{type:Boolean,default:!0},members:{type:Array,default:()=>[]}},setup(F){const j=F,y=u([]),p=u(""),M=u(!1),a=u(""),x=u([]),E=u(0);let S=null;const O=async()=>{const{data:f}=await b.get(`/api/tasks/${j.taskId}/comments`,{withCredentials:!0});y.value=f},h=async()=>{p.value.trim()&&(await b.get("/sanctum/csrf-cookie"),await b.post(`/api/tasks/${j.taskId}/comments`,{body:p.value},{withCredentials:!0}),p.value="",await O())},v=f=>{const T=p.value,_=f.target.selectionStart;if(E.value=_,T[_-1]==="@"){M.value=!0,a.value="",x.value=j.members;return}if(M.value){const U=T.slice(0,_).match(/@([–∞-—è–ê-–Øa-zA-Z0-9_]*)$/);if(!U){M.value=!1;return}a.value=U[1].toLowerCase(),x.value=j.members.filter(pe=>pe.name.toLowerCase().includes(a.value))}},i=f=>{E.value;const T=p.value;p.value=T.replace(/@([–∞-—è–ê-–Øa-zA-Z0-9_]*)$/,"@"+f.name+" "),M.value=!1},I=f=>f.replace(/@([A-Za-z0-9_]+)/g,'<span class="text-indigo-600 font-semibold">@$1</span>');return me(async()=>{await O(),S=setInterval(O,1e4)}),Rt(()=>{S&&clearInterval(S)}),(f,T)=>(l(),o("div",Ht,[T[1]||(T[1]=t("div",{class:"mb-4 flex items-center justify-between"},[t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")],-1)),t("div",Zt,[(l(!0),o(m,null,k(y.value,_=>{var B;return l(),o("div",{key:_.id,class:"flex gap-3"},[t("div",Pt,[t("div",Kt,[t("div",Qt,n(((B=_.user)==null?void 0:B.name)??"‚Äî"),1),t("div",Gt,n(new Date(_.created_at).toLocaleString()),1)]),t("div",{class:"mt-1 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",innerHTML:I(_.body)},null,8,Jt)])])}),128)),y.value.length?g("",!0):(l(),o("div",Xt,"–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π."))]),F.canChat?(l(),o("div",Yt,[w(t("textarea",{"onUpdate:modelValue":T[0]||(T[0]=_=>p.value=_),rows:"2",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶",class:"w-full rounded-lg border bg-white/80 dark:bg-gray-700 px-3 py-2 text-sm dark:text-white relative",onInput:v,onClick:v,onKeyup:v},null,544),[[R,p.value]]),t("div",es,[t("button",{onClick:h,disabled:!p.value.trim(),class:"px-4 py-2 rounded-lg bg-indigo-600 text-white disabled:opacity-40"},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,ts)])])):(l(),o("div",ss," –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —á–∞—Ç–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. ")),M.value&&x.value.length?(l(),o("div",as,[(l(!0),o(m,null,k(x.value,_=>(l(),o("div",{key:_.id,class:"px-3 py-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:B=>i(_)}," @"+n(_.name),9,ls))),128))])):g("",!0)]))}},rs={class:"mt-6"},ds={key:0,class:"space-y-2"},ns=["checked","onChange"],is={key:0,class:"text-sm text-gray-500"},us={key:1,class:"text-gray-500"},vs={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},cs={class:"bg-white rounded p-6 w-96"},ps={key:0,class:"text-sm text-rose-600 mb-2"},gs=["value"],bs=["value"],xs=["value"],ms={class:"flex items-center gap-2 mb-2"},ys={class:"flex justify-end gap-2"},ks={__name:"TaskChecklists",props:{taskId:{type:Number,required:!0},executors:{type:Array,default:()=>[]},responsibles:{type:Array,default:()=>[]},creator:{type:Object,default:()=>null}},setup(F){const j=u(""),y=F,p=u([]),M=u(!1),a=u(!1),x=u({title:"",assigned_to:[],important:!1,files:[]}),E=async()=>{M.value=!0;try{const{data:h}=await b.get(`/api/tasks/${y.taskId}/checklists`);p.value=h}finally{M.value=!1}},S=async()=>{var v,i;j.value="";const h=new FormData;h.append("title",x.value.title),x.value.assigned_to&&h.append("assigned_to",x.value.assigned_to),h.append("important",x.value.important?1:0);for(let I of x.value.files)h.append("files[]",I);try{await b.post(`/api/tasks/${y.taskId}/checklists`,h,{headers:{"Content-Type":"multipart/form-data"}}),a.value=!1,x.value={title:"",assigned_to:"",important:!1,files:[]},await E()}catch(I){if(((v=I.response)==null?void 0:v.status)===422){const f=I.response.data;j.value=f.message||((i=Object.values(f.errors||{})[0])==null?void 0:i[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–Ω–∫—Ç–∞ —á–µ–∫-–ª–∏—Å—Ç–∞."}else j.value="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞."}},O=async h=>{await b.patch(`/api/checklists/${h.id}/toggle`),await E()};return me(E),(h,v)=>(l(),o("div",rs,[v[10]||(v[10]=t("h3",{class:"text-lg font-semibold mb-2"},"–ß–µ–∫-–ª–∏—Å—Ç—ã",-1)),p.value.length?(l(),o("ul",ds,[(l(!0),o(m,null,k(p.value,i=>(l(),o("li",{key:i.id,class:"flex items-center gap-2"},[t("input",{type:"checkbox",checked:i.completed,onChange:I=>O(i)},null,40,ns),t("span",{class:N({"font-bold text-red-600":i.important})},n(i.title),3),i.assignee?(l(),o("span",is,"("+n(i.assignee.name)+")",1)):g("",!0)]))),128))])):(l(),o("p",us,"–ù–µ—Ç —á–µ–∫-–ª–∏—Å—Ç–æ–≤")),t("button",{class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded",onClick:v[0]||(v[0]=i=>a.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç "),a.value?(l(),o("div",vs,[t("div",cs,[v[8]||(v[8]=t("h4",{class:"text-lg font-semibold mb-2"},"–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞",-1)),j.value?(l(),o("p",ps,n(j.value),1)):g("",!0),w(t("input",{required:"","onUpdate:modelValue":v[1]||(v[1]=i=>x.value.title=i),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"w-full border mb-2 p-2"},null,512),[[R,x.value.title]]),v[9]||(v[9]=t("label",{class:"block text-sm"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":v[2]||(v[2]=i=>x.value.assigned_to=i),class:"w-full border mb-2 p-2"},[v[6]||(v[6]=t("option",{value:""},"‚Äî",-1)),(l(!0),o(m,null,k(F.executors,i=>(l(),o("option",{key:"exec-"+i.id,value:i.id},n(i.name),9,gs))),128)),(l(!0),o(m,null,k(F.responsibles,i=>(l(),o("option",{key:"resp-"+i.id,value:i.id},n(i.name),9,bs))),128)),F.creator?(l(),o("option",{key:0,value:F.creator.id},n(F.creator.name),9,xs)):g("",!0)],512),[[L,x.value.assigned_to]]),t("label",ms,[w(t("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=i=>x.value.important=i)},null,512),[[xe,x.value.important]]),v[7]||(v[7]=C(" –í–∞–∂–Ω–æ ",-1))]),t("input",{type:"file",multiple:"",onChange:v[4]||(v[4]=i=>x.value.files=Array.from(i.target.files)),class:"mb-4"},null,32),t("div",ys,[t("button",{onClick:v[5]||(v[5]=i=>a.value=!1),class:"px-3 py-1 border"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:S,class:"px-3 py-1 bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0)]))}};const fs={class:"relative overflow-hidden rounded-b-3xl shadow-lg"},ws={class:"relative max-w-7xl mx-auto px-6 py-10 text-white"},hs={class:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-8"},_s={class:"flex-1 space-y-4"},$s={class:"flex flex-wrap items-center gap-3"},Cs={class:"text-3xl sm:text-4xl font-bold tracking-tight"},js={key:0,class:"px-3 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"},Ms={class:"flex flex-wrap items-center gap-2 text-sm font-medium"},Us={class:"badge"},Vs={class:"badge"},Is={class:"badge"},Es={class:"badge"},Ss={class:"badge"},Ts={class:"badge"},As={key:0,class:"bg-white/10 rounded-xl p-4 mt-4 backdrop-blur-sm",style:{width:"80%"}},zs={style:{"word-break":"break-all"},class:"text-gray-100 whitespace-pre-line"},Ds={class:"flex flex-col gap-6 w-full sm:w-auto"},Fs={class:"flex flex-wrap justify-start sm:justify-end gap-2"},Rs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},qs={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Ls={key:0,class:"text-sm text-rose-600 mb-3"},Os={class:"flex justify-end gap-2"},Bs=["disabled"],Ns={key:0},Ws={key:1},Hs=["href"],Zs={key:0,class:"grid grid-cols-2 sm:grid-cols-2 gap-3 bg-white/10 dark:bg-white/5 rounded-2xl p-4 border border-white/20 backdrop-blur-sm shadow-sm"},Ps={key:1,class:"flex justify-end gap-2 mt-3"},Ks={key:1,class:"text-xs text-amber-200 max-w-xs text-right"},Qs={key:2,class:"text-sm text-emerald-200"},Gs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},Js={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Xs={class:"lg:col-span-2 space-y-4"},Ys={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ea={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ta={class:"text-sm font-medium text-gray-900 dark:text-white"},sa={class:"text-sm font-medium text-gray-900 dark:text-white"},aa={class:"mt-2"},la={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},oa={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},ra={class:"flex mt-3 gap-1"},da=["onClick","title"],na={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ia={key:0},ua={key:1,class:"mt-4 grid grid-cols-2 gap-2"},va={key:2,class:"mt-3"},ca={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},pa={key:1,class:"flex flex-wrap gap-2"},ga=["href"],ba=["onClick"],xa={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ma={class:"flex items-center justify-between mb-3"},ya={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ka={key:1,class:"text-sm text-gray-600 dark:text-gray-300"},fa={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},wa=["onClick"],ha={class:"flex items-start justify-between gap-3"},_a={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},$a={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},Ca={class:"space-y-4"},ja={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ma={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},Ua={class:"flex justify-between"},Va={class:"font-medium"},Ia={class:"flex justify-between"},Ea={class:"font-medium"},Sa={class:"flex justify-between"},Ta={class:"font-medium"},Aa={class:"flex justify-between"},za={class:"font-medium"},Da={class:"flex justify-between"},Fa={class:"font-medium"},Ra={class:"flex justify-between"},qa={key:0,class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},La={key:0,class:"space-y-4 mt-5"},Oa={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ba={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Na={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Wa={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Ha={class:"flex items-center justify-between"},Za={key:0,class:"mt-3 text-sm text-rose-600"},Pa=["value"],Ka=["value"],Qa={class:"grid grid-cols-2 gap-4"},Ga={class:"flex justify-end gap-2"},Ja=["disabled"],Xa={key:0},Ya={key:1},el={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},tl={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6"},sl={class:"mb-3"},al={class:"mb-3"},ll={class:"mb-3"},ol={class:"flex justify-end gap-2 mt-4"},rl={key:2,class:"fixed inset-0 flex items-center justify-center bg-black/50"},dl={class:"bg-white p-4 rounded w-96"},nl=["value"],il={class:"flex justify-end gap-2 mt-4"},ul={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},vl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},cl=["value"],pl=["value"],gl={key:0,class:"text-rose-600 text-sm mt-2"},bl={class:"mt-4 flex justify-end gap-2"},xl={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ml={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},yl=["value"],kl=["value"],fl={key:0,class:"text-rose-600 text-sm mt-2"},wl={class:"mt-4 flex justify-end gap-2"},hl={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},_l={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},$l={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},Cl=["value"],jl={class:"flex justify-end gap-2"},Ml={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Ul={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},Vl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},Il=["value"],El={class:"flex justify-end gap-2"},Sl={key:7,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Tl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-4xl shadow-xl"},Al={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},zl=["onClick"],Dl=["onClick"],Fl=["onClick"],Rl={key:0,class:"mt-3 text-sm text-rose-600"},ql={class:"flex justify-end mt-5"},Ll={key:8,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Ol={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-xl"},Bl={class:"flex justify-end gap-2 mt-4"},Nl=["disabled"],Wl={key:0},Hl={key:1},Zl={__name:"Show",setup(F){var he;const{props:j}=qt(),y=j.id,p=(he=j.auth)==null?void 0:he.user,M=u(!0),a=u(null),x=u(!1),E=u(""),S=u(null),O=r=>{S.value=r.target.files},h=u(!1),v=u([]),i=u({title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""}),I=u(!1),f=u({title:"",start_date:"",due_date:""}),T=D(()=>{var r,e,d,c;return!a.value||!p?!1:p.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||p.id===((d=a.value.creator)==null?void 0:d.id)||(a.value.responsibles||[]).some($=>$.id===p.id)||(a.value.executors||[]).some($=>$.id===p.id)||(((c=a.value.project)==null?void 0:c.managers)||[]).some($=>$.id===p.id)||Q.value}),_=r=>r==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":r==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",B=r=>r==="high"?"–í—ã—Å–æ–∫–∞—è":r==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è",U=async()=>{M.value=!0;try{const{data:r}=await b.get(`/api/tasks/${y}`,{withCredentials:!0});a.value=r,f.value={title:r.title||"",start_date:r.start_date||"",due_date:r.due_date||""}}finally{M.value=!1}},pe=async()=>{var r,e;try{const{data:d}=await b.put(`/api/tasks/${y}`,f.value,{withCredentials:!0});a.value=d.task,I.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},it=async r=>{try{const{data:e}=await b.patch(`/api/tasks/${y}/progress`,{progress:r},{withCredentials:!0});a.value.progress=e.progress}catch{alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.")}},ut=async()=>{var e;if(!((e=S.value)!=null&&e.length))return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã");const r=new FormData;for(let d=0;d<S.value.length;d++)r.append("files[]",S.value[d]);try{await b.post(`/api/tasks/${y}/files`,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),S.value=null,await U()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤")}},vt=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,h.value=!0},ct=async()=>{var r,e;x.value=!0,E.value="";try{const d={title:i.value.title,executor_id:Array.isArray(i.value.executor_id)?i.value.executor_id:[i.value.executor_id],responsible_id:Array.isArray(i.value.responsible_id)?i.value.responsible_id:[i.value.responsible_id],start_date:i.value.start_date,due_date:i.value.due_date};await b.post(`/api/tasks/${y}/subtasks`,d),h.value=!1,await U()}catch(d){E.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{x.value=!1}},Q=D(()=>{var r,e,d;return(d=(e=(r=a.value)==null?void 0:r.project)==null?void 0:e.executors)==null?void 0:d.some(c=>c.id===(p==null?void 0:p.id))}),pt=D(()=>{var r;return(((r=a.value)==null?void 0:r.subtasks)||[]).some(e=>!e.completed)}),gt=D(()=>{var r,e;return((r=a.value)==null?void 0:r.progress)===100&&!((e=a.value)!=null&&e.completed)&&!pt.value}),bt=async()=>{var r,e;try{const{data:d}=await b.patch(`/api/tasks/${y}/complete`,{},{withCredentials:!0});a.value=d.task}catch(d){const c=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É";alert(c)}},xt=D(()=>{var e,d;const r=(d=(e=j.auth)==null?void 0:e.user)==null?void 0:d.id;return!r||!a.value?!1:a.value.creator&&a.value.creator.id===r||(a.value.executors||[]).some(c=>c.id===r)||(a.value.responsibles||[]).some(c=>c.id===r)}),ye=D(()=>{var r,e,d;return!a.value||!p?!1:(a.value.executors||[]).some(c=>c.id===p.id)||(a.value.responsibles||[]).some(c=>c.id===p.id)||(((r=a.value.project)==null?void 0:r.executors)||[]).some(c=>c.id===p.id)||p.id===((d=(e=a.value.project)==null?void 0:e.company)==null?void 0:d.user_id)}),mt=D(()=>{var r,e,d;return!a.value||!p?!1:p.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===p.id)||Q.value}),yt=D(()=>{var r,e,d;return!a.value||!p?!1:p.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===p.id)||Q.value}),G=u(!1),J=u(!1),X=u(""),kt=async()=>{var r,e;X.value="",J.value=!0;try{await b.delete(`/api/tasks/${y}`,{withCredentials:!0}),G.value=!1,alert("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞."),window.history.back()}catch(d){X.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏"}finally{J.value=!1}},Y=u(!1),ee=u(null),ft=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,Y.value=!0},wt=async()=>{var r,e;if(ee.value)try{const{data:d}=await b.post(`/api/tasks/${y}/watchers`,{user_id:ee.value},{withCredentials:!0});a.value.watchers=d.watchers,Y.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è")}},te=u(!1),se=u(!1),ke=u(null),fe=D(()=>{var r,e,d;return!a.value||!p?!1:p.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===p.id)||Q.value}),we=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);v.value=r},ht=async()=>{await we(),ke.value=null,te.value=!0},_t=async()=>{await we(),ke.value=null,se.value=!0},ae=u(!1),le=u(!1),W=u([]),H=u([]),oe=u([]),$t=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);oe.value=r,ae.value=!0},Ct=async()=>{const{data:r}=await b.get(`/api/projects/${a.value.project.id}/employees`);oe.value=r,le.value=!0},jt=async()=>{W.value.length&&(await b.post(`/api/tasks/${y}/executors/add`,{user_ids:W.value}),await U(),ae.value=!1,W.value=[])},Mt=async()=>{H.value.length&&(await b.post(`/api/tasks/${y}/responsibles/add`,{user_ids:H.value}),await U(),le.value=!1,H.value=[])},ge=u(!1),q=u(""),Ut=async r=>{var e,d,c,$,A;q.value="";try{await b.delete(`/api/tasks/${y}/executors`,{data:{user_id:r}}),await U()}catch(z){q.value=((d=(e=z.response)==null?void 0:e.data)==null?void 0:d.message)||((A=Object.values((($=(c=z.response)==null?void 0:c.data)==null?void 0:$.errors)||{})[0])==null?void 0:A[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Vt=async r=>{var e,d,c,$,A;q.value="";try{await b.delete(`/api/tasks/${y}/responsibles`,{data:{user_id:r}}),await U()}catch(z){q.value=((d=(e=z.response)==null?void 0:e.data)==null?void 0:d.message)||((A=Object.values((($=(c=z.response)==null?void 0:c.data)==null?void 0:$.errors)||{})[0])==null?void 0:A[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},It=async r=>{var e,d,c,$,A;q.value="";try{await b.delete(`/api/tasks/${y}/watchers`,{data:{user_id:r}}),await U()}catch(z){q.value=((d=(e=z.response)==null?void 0:e.data)==null?void 0:d.message)||((A=Object.values((($=(c=z.response)==null?void 0:c.data)==null?void 0:$.errors)||{})[0])==null?void 0:A[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è"}},re=u(null),de=u(null),ne=u(null),ie=u(null),Z=u(""),P=u(""),Et=D(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.executors||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),St=D(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.responsibles||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),Tt=async()=>{var r,e;if(Z.value="",!re.value||!de.value){Z.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${y}/executor`,{replace_user_id:re.value,user_id:de.value}),await U(),te.value=!1}catch(d){Z.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è."}},At=async()=>{var r,e;if(P.value="",!ne.value||!ie.value){P.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await b.patch(`/api/tasks/${y}/responsible`,{replace_user_id:ne.value,user_id:ie.value}),await U(),se.value=!1}catch(d){P.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ."}},ue=u(!1),ve=u(!1),K=u({description:""}),zt=()=>{var r;K.value.description=((r=a.value)==null?void 0:r.description)||"",ue.value=!0},Dt=async()=>{var r,e;if(a.value){ve.value=!0;try{await b.patch(`/api/tasks/${a.value.id}/description`,{description:K.value.description}),a.value.description=K.value.description,ue.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è")}finally{ve.value=!1}}},Ft=async r=>{var e,d;if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?"))try{await b.delete(`/api/tasks/files/${r}`),a.value.files=a.value.files.filter(c=>c.id!==r)}catch(c){alert(((d=(e=c==null?void 0:c.response)==null?void 0:e.data)==null?void 0:d.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞")}};return me(U),(r,e)=>{var c;const d=Lt("Head");return l(),o(m,null,[ce(d,{title:(c=a.value)!=null&&c.title?`–ó–∞–¥–∞—á–∞ ‚Äî ${a.value.title}`:"–ó–∞–¥–∞—á–∞"},null,8,["title"]),ce(Nt,null,{default:Ot(()=>{var $,A,z,_e,$e,Ce,je,Me,Ue,Ve,Ie,Ee,Se,Te,Ae,ze,De,Fe,Re,qe,Le,Oe,Be,Ne,We,He,Ze,Pe,Ke,Qe,Ge,Je,Xe,Ye,et,tt,st,at,lt,ot,rt,dt;return[t("div",fs,[e[46]||(e[46]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600"},null,-1)),t("div",ws,[t("div",hs,[t("div",_s,[t("div",$s,[t("h1",Cs,n((($=a.value)==null?void 0:$.title)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),(z=(A=a.value)==null?void 0:A.watcherstask)!=null&&z.some(s=>s.id===r.$page.props.auth.user.id)?(l(),o("span",js," üëÅ –í—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç–µ ")):g("",!0)]),t("div",Ms,[t("span",Us,[e[31]||(e[31]=C("üìÅ –ü—Ä–æ–µ–∫—Ç: ",-1)),t("b",null,n((($e=(_e=a.value)==null?void 0:_e.project)==null?void 0:$e.name)??"‚Äî"),1)]),t("span",Vs,[e[32]||(e[32]=C("üè¢ –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),t("b",null,n(((Me=(je=(Ce=a.value)==null?void 0:Ce.project)==null?void 0:je.company)==null?void 0:Me.name)??"‚Äî"),1)]),t("span",Is,[e[33]||(e[33]=C("üë§ –û—Ç: ",-1)),t("b",null,n(((Ve=(Ue=a.value)==null?void 0:Ue.creator)==null?void 0:Ve.name)??"‚Äî"),1)]),t("span",Es,[e[34]||(e[34]=C(" üë∑ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏: ",-1)),t("b",null,n((Ee=(Ie=a.value)==null?void 0:Ie.executors)!=null&&Ee.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Ss,[e[35]||(e[35]=C(" üë®‚Äçüíº –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ: ",-1)),t("b",null,n((Te=(Se=a.value)==null?void 0:Se.responsibles)!=null&&Te.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Ts,[e[36]||(e[36]=C(" üëÅ –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1)),t("b",null,n((ze=(Ae=a.value)==null?void 0:Ae.watcherstask)!=null&&ze.length?a.value.watcherstask.map(s=>s.name).join(", "):"‚Äî"),1)]),a.value?(l(),o("span",{key:0,class:N(["badge bg-white text-gray-900 ring-1",_(a.value.priority)])},[e[37]||(e[37]=C(" ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ",-1)),t("b",null,n(B(a.value.priority)),1)],2)):g("",!0)]),(De=a.value)!=null&&De.description?(l(),o("div",As,[e[38]||(e[38]=t("h3",{class:"text-base font-semibold mb-1"},"üìù –û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",zs,n(a.value.description),1)])):g("",!0)]),t("div",Ds,[t("div",Fs,[yt.value?(l(),o("button",{key:0,onClick:e[0]||(e[0]=s=>I.value=!0),class:"btn-action bg-blue-600 hover:bg-blue-700 text-white"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å ")):g("",!0),mt.value?(l(),o("button",{key:1,onClick:e[1]||(e[1]=s=>G.value=!0),class:"btn-action bg-rose-500 hover:bg-rose-600 text-white"}," üóë –£–¥–∞–ª–∏—Ç—å ")):g("",!0),G.value?(l(),o("div",Rs,[t("div",qs,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É? ",-1)),e[41]||(e[41]=C()),e[42]||(e[42]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},[C(" –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ "),t("span",{class:"font-semibold text-rose-600"},"–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ"),C("."),t("br"),C(" –ó–∞–¥–∞—á–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã. ")],-1)),e[43]||(e[43]=C()),X.value?(l(),o("p",Ls,n(X.value),1)):g("",!0),e[44]||(e[44]=C()),t("div",Os,[t("button",{style:{color:"gray"},onClick:e[2]||(e[2]=s=>G.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –û—Ç–º–µ–Ω–∞ "),e[39]||(e[39]=C()),t("button",{onClick:kt,class:"px-4 py-2 rounded-lg bg-rose-600 hover:bg-rose-700 text-white",disabled:J.value},[J.value?(l(),o("span",Ws,"–£–¥–∞–ª—è—é‚Ä¶")):(l(),o("span",Ns,"–£–¥–∞–ª–∏—Ç—å"))],8,Bs)])])])):g("",!0),t("button",{onClick:zt,class:"btn-action bg-indigo-500 hover:bg-indigo-600 text-white"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ "),(Re=(Fe=a.value)==null?void 0:Fe.project)!=null&&Re.id?(l(),o("a",{key:3,href:`/projects/${a.value.project.id}`,class:"btn-action bg-white hover:bg-gray-100 text-gray-900"}," üîô –ö –ø—Ä–æ–µ–∫—Ç—É ",8,Hs)):g("",!0)]),fe.value?(l(),o("div",Zs,[e[45]||(e[45]=t("h4",{class:"col-span-2 text-sm uppercase tracking-wide text-white/70 font-semibold mb-1"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ",-1)),t("button",{onClick:ht,class:"btn-grid bg-blue-500 hover:bg-blue-600"}," üë∑ –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:_t,class:"btn-grid bg-indigo-500 hover:bg-indigo-600"}," üë®‚Äçüíº –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:$t,class:"btn-grid bg-emerald-500 hover:bg-emerald-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:Ct,class:"btn-grid bg-teal-500 hover:bg-teal-600"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),t("button",{onClick:ft,class:"btn-grid bg-purple-500 hover:bg-purple-600 col-span-2"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è "),fe.value?(l(),o("button",{key:0,onClick:e[3]||(e[3]=s=>ge.value=!0),class:"btn-grid bg-gray-500 hover:bg-purple-600 col-span-2"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")):g("",!0)])):g("",!0),xt.value?(l(),o("div",Ps,[gt.value?(l(),o("button",{key:0,onClick:bt,class:"btn-action bg-emerald-600 hover:bg-emerald-700 text-white"}," ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É ")):((qe=a.value)==null?void 0:qe.progress)===100&&!((Le=a.value)!=null&&Le.completed)?(l(),o("div",Ks," –ï—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É. ")):g("",!0),(Oe=a.value)!=null&&Oe.completed?(l(),o("div",Qs," ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ "+n(((Be=a.value)==null?void 0:Be.completed_at)||""),1)):g("",!0)])):g("",!0)])])])]),t("div",Gs,[t("div",Js,[t("div",Xs,[t("div",Ys,[t("div",ea,[t("div",null,[e[47]||(e[47]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("div",ta,n(((Ne=a.value)==null?void 0:Ne.start_date)??"‚Äî"),1)]),t("div",null,[e[48]||(e[48]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("div",sa,n(((We=a.value)==null?void 0:We.due_date)??"‚Äî"),1)]),t("div",null,[e[49]||(e[49]=t("div",{class:"text-xs text-gray-500"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),t("div",aa,[t("div",la,[t("div",{class:"h-2 bg-emerald-500",style:Bt({width:(((He=a.value)==null?void 0:He.progress)||0)+"%"})},null,4)]),t("div",oa,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+n(((Ze=a.value)==null?void 0:Ze.progress)??0)+"%",1)]),t("div",ra,[(l(),o(m,null,k(11,s=>{var V;return t("button",{key:s,onClick:be=>it((s-1)*10),class:N(["flex-1 h-5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300",{"!bg-emerald-500":(((V=a.value)==null?void 0:V.progress)||0)>=(s-1)*10}]),title:`${(s-1)*10}%`},null,10,da)}),64))])])])]),t("div",na,[ye.value?(l(),o("div",ia,[t("input",{type:"file",multiple:"",onChange:O,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"text-sm text-gray-600 dark:text-gray-300"},null,32),t("button",{onClick:ut,class:"rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 mt-4"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å ")])):g("",!0),M.value?(l(),o("div",ua,[(l(),o(m,null,k(4,s=>t("div",{key:s,class:"h-8 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"})),64))])):(l(),o("div",va,[(Ke=(Pe=a.value)==null?void 0:Pe.files)!=null&&Ke.length?(l(),o("div",pa,[(l(!0),o(m,null,k(a.value.files,s=>(l(),o("div",{key:s.id,class:"flex items-center gap-2 text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100"},[t("a",{href:`/api/tasks/files/${s.id}`,class:"hover:underline"},n(s.file_path.split("/").pop()),9,ga),ye.value?(l(),o("button",{key:0,onClick:V=>Ft(s.id),class:"text-red-600 hover:text-red-800"}," ‚úñ ",8,ba)):g("",!0)]))),128))])):(l(),o("div",ca," –§–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã. "))]))]),t("div",xa,[t("div",ma,[e[50]||(e[50]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ü–æ–¥–∑–∞–¥–∞—á–∏",-1)),T.value?(l(),o("button",{key:0,onClick:vt,class:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700"}," + –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):g("",!0)]),M.value?(l(),o("div",ya,[(l(),o(m,null,k(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[51]||(e[51]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(Ge=(Qe=a.value)==null?void 0:Qe.subtasks)!=null&&Ge.length?(l(),o("div",fa,[(l(!0),o(m,null,k(a.value.subtasks,s=>{var V;return l(),o("div",{key:s.id,onClick:be=>r.$inertia.visit(`/subtasks/${s.id}`),class:N(["group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",[s.progress===100?"border-emerald-500 ring-1 ring-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":s.progress>=50?"border-amber-400 ring-1 ring-amber-300 bg-amber-50 dark:bg-amber-900/20":"border-gray-400 ring-1 ring-gray-300 bg-gray-50 dark:bg-rose-900/20"]])},[t("div",ha,[t("h3",_a,n(s.title),1),t("span",{class:N(["text-sm px-2 py-1 rounded-full",{"bg-emerald-100 text-emerald-700":s.progress===100,"bg-amber-100 text-amber-700":s.progress>=50&&s.progress<100,"bg-rose-100 text-rose-700":s.progress<50}])},n(s.progress??0)+"% ",3)]),t("div",$a,[t("div",null,[e[52]||(e[52]=C(" –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: ",-1)),t("b",null,n(((V=s.executors)==null?void 0:V.map(be=>be.name).join(", "))||"‚Äî"),1)]),t("div",null,"–°—Ä–æ–∫–∏: "+n(s.start_date)+" ‚Äî "+n(s.due_date),1)])],10,wa)}),128))])):(l(),o("div",ka," –ü–æ–¥–∑–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. "))])]),t("div",Ca,[t("div",ja,[e[59]||(e[59]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ",-1)),t("dl",Ma,[t("div",Ua,[e[53]||(e[53]=t("dt",null,"–ê–≤—Ç–æ—Ä",-1)),t("dd",Va,n(((Xe=(Je=a.value)==null?void 0:Je.creator)==null?void 0:Xe.name)??"‚Äî"),1)]),t("div",Ia,[e[54]||(e[54]=t("dt",null,"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("dd",Ea,n((et=(Ye=a.value)==null?void 0:Ye.executors)!=null&&et.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Sa,[e[55]||(e[55]=t("dt",null,"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("dd",Ta,n((st=(tt=a.value)==null?void 0:tt.responsibles)!=null&&st.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Aa,[e[56]||(e[56]=t("dt",null,"–ü—Ä–æ–µ–∫—Ç",-1)),t("dd",za,n(((lt=(at=a.value)==null?void 0:at.project)==null?void 0:lt.name)??"‚Äî"),1)]),t("div",Da,[e[57]||(e[57]=t("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),t("dd",Fa,n(((dt=(rt=(ot=a.value)==null?void 0:ot.project)==null?void 0:rt.company)==null?void 0:dt.name)??"‚Äî"),1)]),t("div",Ra,[e[58]||(e[58]=t("dt",null,"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),t("dd",null,[a.value?(l(),o("span",{key:0,class:N(["px-2 py-1 text-xs rounded-full ring-1",_(a.value.priority)])},n(B(a.value.priority)),3)):g("",!0)])])])]),a.value?(l(),o("div",qa,[ce(ks,{"task-id":a.value.id,executors:a.value.executors,responsibles:a.value.responsibles,creator:a.value.creator},null,8,["task-id","executors","responsibles","creator"])])):g("",!0)])]),a.value?(l(),o("div",La,[t("div",Oa,[e[60]||(e[60]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ß–∞—Ç",-1)),ce(os,{"task-id":a.value.id,"can-chat":!0,members:[...a.value.executors??[],...a.value.responsibles??[],...a.value.watchers??[],...a.value.creator?[a.value.creator]:[]]},null,8,["task-id","members"])])])):(l(),o("div",Ba,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"))]),h.value?(l(),o("div",Na,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>h.value=!1)}),t("div",Wa,[t("div",Ha,[e[61]||(e[61]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ù–æ–≤–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞",-1)),t("button",{onClick:e[5]||(e[5]=s=>h.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),E.value?(l(),o("p",Za,n(E.value),1)):g("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:nt(ct,["prevent"])},[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>i.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.title]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.executor_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[63]||(e[63]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,Pa))),128))],512),[[L,i.value.executor_id]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.responsible_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[65]||(e[65]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,Ka))),128))],512),[[L,i.value.responsible_id]])]),t("div",Qa,[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>i.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.start_date]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>i.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[R,i.value.due_date]])])]),t("div",Ga,[t("button",{type:"button",onClick:e[11]||(e[11]=s=>h.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{type:"submit",disabled:x.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[x.value?(l(),o("span",Ya,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Xa,"–°–æ–∑–¥–∞—Ç—å"))],8,Ja)])],32)])])):g("",!0),I.value?(l(),o("div",el,[t("div",tl,[e[73]||(e[73]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É",-1)),t("form",{onSubmit:nt(pe,["prevent"])},[t("div",sl,[e[69]||(e[69]=t("label",{class:"block text-sm text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{required:"","onUpdate:modelValue":e[12]||(e[12]=s=>f.value.title=s),type:"text",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.title]])]),t("div",al,[e[70]||(e[70]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),w(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>f.value.start_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.start_date]])]),t("div",ll,[e[71]||(e[71]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>f.value.due_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[R,f.value.due_date]])]),t("div",ol,[t("button",{type:"button",onClick:e[15]||(e[15]=s=>I.value=!1),class:"px-4 py-2 border rounded"},"–û—Ç–º–µ–Ω–∞"),e[72]||(e[72]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):g("",!0),Y.value?(l(),o("div",rl,[t("div",dl,[e[74]||(e[74]=t("h3",{class:"font-semibold mb-3"},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),w(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>ee.value=s),class:"w-full border p-2 rounded"},[(l(!0),o(m,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,nl))),128))],512),[[L,ee.value]]),t("div",il,[t("button",{onClick:e[17]||(e[17]=s=>Y.value=!1),class:"px-3 py-1 border rounded"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:wt,class:"px-3 py-1 bg-blue-600 text-white rounded"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),te.value?(l(),o("div",ul,[t("div",vl,[e[77]||(e[77]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),e[78]||(e[78]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>re.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[75]||(e[75]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(m,null,k(a.value.executors,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,cl))),128))],512),[[L,re.value]]),e[79]||(e[79]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>de.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[76]||(e[76]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(m,null,k(Et.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,pl))),128))],512),[[L,de.value]]),Z.value?(l(),o("p",gl,n(Z.value),1)):g("",!0),t("div",bl,[t("button",{onClick:e[20]||(e[20]=s=>te.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Tt,class:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0),se.value?(l(),o("div",xl,[t("div",ml,[e[82]||(e[82]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),e[83]||(e[83]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>ne.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[80]||(e[80]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(m,null,k(a.value.responsibles,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,yl))),128))],512),[[L,ne.value]]),e[84]||(e[84]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>ie.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[81]||(e[81]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(m,null,k(St.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,kl))),128))],512),[[L,ie.value]]),P.value?(l(),o("p",fl,n(P.value),1)):g("",!0),t("div",wl,[t("button",{onClick:e[23]||(e[23]=s=>se.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:At,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):g("",!0),ae.value?(l(),o("div",hl,[t("div",_l,[e[85]||(e[85]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π",-1)),t("div",$l,[(l(!0),o(m,null,k(oe.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[24]||(e[24]=V=>W.value=V)},null,8,Cl),[[xe,W.value]]),t("span",null,n(s.name),1)]))),128))]),t("div",jl,[t("button",{onClick:e[25]||(e[25]=s=>ae.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:jt,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),le.value?(l(),o("div",Ml,[t("div",Ul,[e[86]||(e[86]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö",-1)),t("div",Vl,[(l(!0),o(m,null,k(oe.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[26]||(e[26]=V=>H.value=V)},null,8,Il),[[xe,H.value]]),t("span",null,n(s.name),1)]))),128))]),t("div",El,[t("button",{onClick:e[27]||(e[27]=s=>le.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Mt,class:"px-4 py-2 bg-teal-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):g("",!0),ge.value?(l(),o("div",Sl,[t("div",Tl,[e[90]||(e[90]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∑–∞–¥–∞—á–∏ ",-1)),t("div",Al,[t("div",null,[e[87]||(e[87]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),(l(!0),o(m,null,k(a.value.executors,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,n(s.name),1),t("button",{onClick:V=>Ut(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,zl)]))),128))]),t("div",null,[e[88]||(e[88]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),(l(!0),o(m,null,k(a.value.responsibles,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,n(s.name),1),t("button",{onClick:V=>Vt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Dl)]))),128))]),t("div",null,[e[89]||(e[89]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏",-1)),(l(!0),o(m,null,k(a.value.watcherstask,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,n(s.name),1),t("button",{onClick:V=>It(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Fl)]))),128))])]),q.value?(l(),o("p",Rl,n(q.value),1)):g("",!0),t("div",ql,[t("button",{onClick:e[28]||(e[28]=s=>ge.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):g("",!0),ue.value?(l(),o("div",Ll,[t("div",Ol,[e[91]||(e[91]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ ",-1)),w(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=s=>K.value.description=s),class:"w-full border rounded-lg p-3 min-h-[150px] dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."},null,512),[[R,K.value.description]]),t("div",Bl,[t("button",{onClick:e[30]||(e[30]=s=>ue.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600 dark:border-gray-500"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:Dt,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",disabled:ve.value},[ve.value?(l(),o("span",Hl,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Wl,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,Nl)])])])):g("",!0)]}),_:1})],64)}}},Jl=Wt(Zl,[["__scopeId","data-v-c0ec4058"]]);export{Jl as default};
