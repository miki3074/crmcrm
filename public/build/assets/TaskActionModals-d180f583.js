import{r as g,w as v,o as a,c as o,a as t,g as y,h as i,v as p,d as m,K as x,F as k,e as f,t as w}from"./app-34d1bdb8.js";const $={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},V={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},j={class:"flex justify-end gap-2 mt-4"},c={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},S={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-xl"},U={class:"flex justify-end gap-2 mt-4"},C={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},D={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},F=["value"],q=["value"],z={class:"grid grid-cols-2 gap-2"},B={class:"flex justify-end gap-2 mt-4"},M=["disabled"],T={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},O={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},h={class:"flex justify-end gap-2"},E={__name:"TaskActionModals",props:{modals:Object,task:Object,employees:Array,loading:Boolean,error:String},emits:["close","update","saveDescription","deleteTask","createSubtask"],setup(r,{emit:A}){const u=r,n=g({}),s=g({}),b=g("");return v(()=>u.modals.edit,l=>{l&&(n.value={title:u.task.title,start_date:u.task.start_date,due_date:u.task.due_date})}),v(()=>u.modals.description,l=>{l&&(b.value=u.task.description)}),v(()=>u.modals.subtask,l=>{l&&(s.value={title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""})}),(l,e)=>(a(),o(k,null,[r.modals.edit?(a(),o("div",$,[t("div",V,[e[18]||(e[18]=t("h3",{class:"font-bold text-lg mb-4 dark:text-white"},"Редактировать задачу",-1)),t("form",{onSubmit:e[4]||(e[4]=y(d=>l.$emit("update",n.value),["prevent"])),class:"space-y-3"},[i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>n.value.title=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white",required:"",placeholder:"Название"},null,512),[[p,n.value.title]]),i(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=d=>n.value.start_date=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},null,512),[[p,n.value.start_date]]),i(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=d=>n.value.due_date=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},null,512),[[p,n.value.due_date]]),t("div",j,[t("button",{type:"button",onClick:e[3]||(e[3]=d=>l.$emit("close","edit")),class:"px-4 py-2 rounded bg-gray-200"},"Отмена"),e[17]||(e[17]=t("button",{type:"submit",class:"px-4 py-2 rounded bg-blue-600 text-white"},"Сохранить",-1))])],32)])])):m("",!0),r.modals.description?(a(),o("div",c,[t("div",S,[e[19]||(e[19]=t("h3",{class:"font-bold text-lg mb-4 dark:text-white"},"Описание",-1)),i(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=d=>b.value=d),class:"w-full border rounded p-3 h-40 dark:bg-gray-700 dark:text-white"},null,512),[[p,b.value]]),t("div",U,[t("button",{onClick:e[6]||(e[6]=d=>l.$emit("close","description")),class:"px-4 py-2 rounded bg-gray-200"},"Отмена"),t("button",{onClick:e[7]||(e[7]=d=>l.$emit("saveDescription",b.value)),class:"px-4 py-2 rounded bg-indigo-600 text-white"},"Сохранить")])])])):m("",!0),r.modals.subtask?(a(),o("div",C,[t("div",D,[e[22]||(e[22]=t("h3",{class:"font-bold text-lg mb-4 dark:text-white"},"Новая подзадача",-1)),t("form",{onSubmit:e[14]||(e[14]=y(d=>l.$emit("createSubtask",s.value),["prevent"])),class:"space-y-3"},[i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=d=>s.value.title=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white",placeholder:"Название",required:""},null,512),[[p,s.value.title]]),i(t("select",{"onUpdate:modelValue":e[9]||(e[9]=d=>s.value.executor_id=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},[e[20]||(e[20]=t("option",{value:""},"Исполнитель",-1)),(a(!0),o(k,null,f(r.employees,d=>(a(),o("option",{key:d.id,value:d.id},w(d.name),9,F))),128))],512),[[x,s.value.executor_id]]),i(t("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>s.value.responsible_id=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},[e[21]||(e[21]=t("option",{value:""},"Ответственный",-1)),(a(!0),o(k,null,f(r.employees,d=>(a(),o("option",{key:d.id,value:d.id},w(d.name),9,q))),128))],512),[[x,s.value.responsible_id]]),t("div",z,[i(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=d=>s.value.start_date=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white",required:""},null,512),[[p,s.value.start_date]]),i(t("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=d=>s.value.due_date=d),class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white",required:""},null,512),[[p,s.value.due_date]])]),t("div",B,[t("button",{type:"button",onClick:e[13]||(e[13]=d=>l.$emit("close","subtask")),class:"px-4 py-2 rounded bg-gray-200"},"Отмена"),t("button",{type:"submit",disabled:r.loading,class:"px-4 py-2 rounded bg-emerald-600 text-white"},"Создать",8,M)])],32)])])):m("",!0),r.modals.delete?(a(),o("div",T,[t("div",O,[e[23]||(e[23]=t("h3",{class:"font-bold text-lg mb-2 text-rose-600"},"Удалить задачу?",-1)),e[24]||(e[24]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},"Это действие необратимо.",-1)),t("div",h,[t("button",{onClick:e[15]||(e[15]=d=>l.$emit("close","delete")),class:"px-4 py-2 rounded bg-gray-200"},"Отмена"),t("button",{onClick:e[16]||(e[16]=d=>l.$emit("deleteTask")),class:"px-4 py-2 rounded bg-rose-600 text-white"},"Удалить")])])])):m("",!0)],64))}};export{E as default};
