import{r as b,w as j,x as D,j as $,o as r,c as l,k as T,u as V,J as C,F as c,f as F,Z as B,a as e,e as p,h as S,S as L,E as x,t as d,L as M,b as k,d as i}from"./app-f9f3ca95.js";import{_ as N}from"./AuthenticatedLayout-1eb45781.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-0b930598.js";const z={class:"py-8 bg-slate-50 dark:bg-slate-900 min-h-screen"},E={class:"max-w-[90rem] mx-auto sm:px-6 lg:px-8 space-y-6"},I={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-5"},O={class:"flex flex-col xl:flex-row gap-6 justify-between"},q={class:"flex flex-col gap-2"},A={class:"flex bg-slate-100 dark:bg-slate-700/50 p-1 rounded-lg self-start"},H=["onClick"],J={class:"flex flex-col gap-2 min-w-[200px]"},Z=["value"],G={class:"flex flex-col gap-2"},K={class:"flex bg-slate-100 dark:bg-slate-700/50 p-1 rounded-lg self-start"},P={class:"flex flex-col gap-2"},Q={class:"flex gap-2"},W={class:"bg-white dark:bg-slate-800 shadow-xl shadow-slate-200/50 dark:shadow-none rounded-3xl border border-slate-200 dark:border-slate-700 overflow-hidden"},X={key:0,class:"p-12 text-center text-slate-500 animate-pulse"},Y={key:1,class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},ee={class:"bg-slate-50 dark:bg-slate-900/50"},te={key:0,class:"px-6 py-5 text-left text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider min-w-[250px]"},se={key:1,class:"px-6 py-5 text-left text-xs font-bold text-rose-600 dark:text-rose-400 uppercase tracking-wider min-w-[250px]"},re={key:2,class:"px-6 py-5 text-left text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider min-w-[250px]"},le={class:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800"},ae={class:"px-6 py-4 align-top"},oe={class:"flex items-center gap-3 sticky left-0"},de={class:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold border-2 border-white dark:border-slate-700 shadow-sm"},ne={class:"text-sm font-bold text-slate-900 dark:text-white leading-tight"},ie={class:"text-[10px] text-slate-400 uppercase font-bold mt-0.5"},ue={key:0,class:"px-6 py-4 align-top bg-blue-50/30 dark:bg-blue-900/10 border-x border-slate-100 dark:border-slate-700/50"},ce={class:"mb-3 flex items-center justify-between"},xe={class:"text-xs font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 px-2 py-0.5 rounded-full"},be={class:"space-y-2"},pe={class:"flex items-start justify-between gap-2"},ke=["href"],ge={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500"},fe={class:"mt-2 flex items-center justify-between text-[10px] text-slate-500"},me={class:"flex items-center gap-1 bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded"},ve={class:"truncate max-w-[100px] opacity-75"},_e={key:0,class:"text-xs text-slate-400 italic text-center py-4"},he={key:1,class:"px-6 py-4 align-top bg-rose-50/30 dark:bg-rose-900/10 border-r border-slate-100 dark:border-slate-700/50"},ye={class:"mb-3 flex items-center justify-between"},we={class:"text-xs font-bold text-rose-600 bg-rose-100 dark:bg-rose-900/40 px-2 py-0.5 rounded-full"},je={class:"space-y-2"},Te=["href"],Ce={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500"},Se={class:"mt-1 flex flex-col gap-1 text-[10px]"},De={class:"font-bold text-rose-600"},$e={class:"text-slate-400"},Ve={key:0,class:"text-xs text-slate-400 italic text-center py-4"},Fe={key:2,class:"px-6 py-4 align-top"},Be={class:"mb-3 flex items-center justify-between"},Le={class:"text-xs font-bold text-emerald-600 bg-emerald-100 dark:bg-emerald-900/40 px-2 py-0.5 rounded-full"},Me={class:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"},Ne={class:"flex flex-col min-w-0"},Ue=["href"],ze={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500"},Ee={class:"text-[9px] text-slate-400"},Ie={key:0,class:"text-xs text-slate-400 italic text-center py-4"},Oe={class:"px-6 py-4 align-top text-center"},qe={class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-bold text-xs border border-slate-200 dark:border-slate-600"},Ae={key:0},He={__name:"TaskSummary",props:{auth:Object},setup(Je){const g=b(!0),f=b([]),_=b([]),h=b(!1),u=b({mode:"my_tasks",user_id:""}),o=b({type:"all",columns:{in_work:!0,overdue:!0,completed:!0}}),m=async()=>{g.value=!0;try{const n={mode:u.value.mode,user_id:u.value.user_id||void 0},{data:t}=await F.get("/api/tasks/summary",{params:n});f.value=t.summary,h.value=t.is_owner,u.value.user_id||(_.value=t.users)}catch(n){console.error(n)}finally{g.value=!1}};j(()=>u.value.mode,()=>{u.value.user_id="",m()}),j(()=>u.value.user_id,m),D(m);const y=$(()=>f.value?f.value.map(n=>{const t=s=>o.value.type==="all"?!0:o.value.type==="task"?!s.is_subtask&&!s.task_id:o.value.type==="subtask"?s.is_subtask||s.task_id:!0;return{...n,filteredTasks:{in_work:n.tasks.in_work.filter(t),overdue:n.tasks.overdue.filter(t),completed:n.tasks.completed.filter(t)}}}):[]),w=n=>n?new Date(n).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}):"‚Äî",v=n=>{o.value.columns[n]=!o.value.columns[n]};return(n,t)=>(r(),l(c,null,[T(V(B),{title:"–°–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á"}),T(N,null,{header:C(()=>t[7]||(t[7]=[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-bold text-2xl text-slate-800 dark:text-white leading-tight flex items-center gap-2"}," üìä –°–≤–æ–¥–Ω—ã–π –ø—É–ª ")],-1)])),default:C(()=>[e("div",z,[e("div",E,[e("div",I,[e("div",O,[e("div",q,[t[8]||(t[8]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏",-1)),e("div",A,[(r(!0),l(c,null,p([{key:"my_tasks",label:"–ú–æ–∏ –∑–∞–¥–∞—á–∏"},{key:"author",label:"–Ø ‚Äî –ê–≤—Ç–æ—Ä"},{key:"owner",label:"–í—Å–µ –∑–∞–¥–∞—á–∏",show:h.value}],s=>S((r(),l("button",{key:s.key,onClick:a=>u.value.mode=s.key,class:x(["px-4 py-2 rounded-md text-sm font-bold transition-all duration-200",u.value.mode===s.key?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])},d(s.label),11,H)),[[L,s.show!==!1]])),128))])]),e("div",J,[t[10]||(t[10]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value.user_id=s),class:"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm text-sm py-2.5"},[t[9]||(t[9]=e("option",{value:""},"–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",-1)),(r(!0),l(c,null,p(_.value,s=>(r(),l("option",{key:s.id,value:s.id},d(s.name),9,Z))),128))],512),[[M,u.value.user_id]])]),t[16]||(t[16]=e("div",{class:"w-px bg-slate-200 dark:bg-slate-700 hidden xl:block"},null,-1)),e("div",G,[t[11]||(t[11]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏",-1)),e("div",K,[e("button",{onClick:t[1]||(t[1]=s=>o.value.type="all"),class:x(["px-3 py-2 rounded-md text-sm font-bold transition",o.value.type==="all"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–í—Å–µ",2),e("button",{onClick:t[2]||(t[2]=s=>o.value.type="task"),class:x(["px-3 py-2 rounded-md text-sm font-bold transition",o.value.type==="task"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–¢–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏",2),e("button",{onClick:t[3]||(t[3]=s=>o.value.type="subtask"),class:x(["px-3 py-2 rounded-md text-sm font-bold transition",o.value.type==="subtask"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-500"])},"–¢–æ–ª—å–∫–æ –ø–æ–¥–∑–∞–¥–∞—á–∏",2)])]),e("div",P,[t[15]||(t[15]=e("span",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider"},"–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å",-1)),e("div",Q,[e("button",{onClick:t[4]||(t[4]=s=>v("in_work")),class:x(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",o.value.columns.in_work?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-700 dark:text-blue-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},t[12]||(t[12]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),k(" –í —Ä–∞–±–æ—Ç–µ ",-1)]),2),e("button",{onClick:t[5]||(t[5]=s=>v("overdue")),class:x(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",o.value.columns.overdue?"bg-rose-50 border-rose-200 text-rose-700 dark:bg-rose-900/30 dark:border-rose-700 dark:text-rose-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},t[13]||(t[13]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),k(" –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ ",-1)]),2),e("button",{onClick:t[6]||(t[6]=s=>v("completed")),class:x(["px-3 py-2 rounded-lg text-sm font-bold border transition-colors flex items-center gap-2",o.value.columns.completed?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:border-emerald-700 dark:text-emerald-300":"bg-white border-dashed border-slate-300 text-slate-400 hover:border-slate-400"])},t[14]||(t[14]=[e("span",{class:"w-2 h-2 rounded-full bg-current"},null,-1),k(" –ó–∞–≤–µ—Ä—à–µ–Ω–æ ",-1)]),2)])])])]),e("div",W,[g.value?(r(),l("div",X,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")):(r(),l("div",Y,[e("table",R,[e("thead",ee,[e("tr",null,[t[17]||(t[17]=e("th",{class:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider w-64"}," –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ",-1)),o.value.columns.in_work?(r(),l("th",te," –í —Ä–∞–±–æ—Ç–µ ")):i("",!0),o.value.columns.overdue?(r(),l("th",se," –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ ")):i("",!0),o.value.columns.completed?(r(),l("th",re," –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ ")):i("",!0),t[18]||(t[18]=e("th",{class:"px-6 py-5 text-center text-xs font-bold text-slate-500 uppercase tracking-wider w-24"}," –í—Å–µ–≥–æ ",-1))])]),e("tbody",le,[(r(!0),l(c,null,p(y.value,s=>(r(),l("tr",{key:s.user.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors"},[e("td",ae,[e("div",oe,[e("div",de,d(s.user.name.charAt(0)),1),e("div",null,[e("div",ne,d(s.user.name),1),e("div",ie,"ID: "+d(s.user.id),1)])])]),o.value.columns.in_work?(r(),l("td",ue,[e("div",ce,[e("span",xe,d(s.filteredTasks.in_work.length),1)]),e("div",be,[(r(!0),l(c,null,p(s.filteredTasks.in_work,a=>(r(),l("div",{key:a.id+(a.is_subtask?"s":"t"),class:"group relative bg-white dark:bg-slate-700 p-3 rounded-xl border border-blue-100 dark:border-slate-600 hover:shadow-md hover:border-blue-300 transition-all duration-200"},[e("div",pe,[e("a",{href:a.link,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30"},[a.is_subtask?(r(),l("span",ge," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):i("",!0),k(" "+d(a.title),1)],8,ke)]),e("div",fe,[e("span",me," üìÖ "+d(w(a.due_date)),1),e("span",ve,d(a.project_name),1)])]))),128)),s.filteredTasks.in_work.length===0?(r(),l("div",_e,"–ü—É—Å—Ç–æ")):i("",!0)])])):i("",!0),o.value.columns.overdue?(r(),l("td",he,[e("div",ye,[e("span",we,d(s.filteredTasks.overdue.length),1)]),e("div",je,[(r(!0),l(c,null,p(s.filteredTasks.overdue,a=>(r(),l("div",{key:a.id,class:"group bg-white dark:bg-slate-700 p-3 rounded-xl border-l-4 border-l-rose-500 border border-y-rose-100 border-r-rose-100 dark:border-slate-600 hover:shadow-md transition-all duration-200"},[e("a",{href:a.link,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30"},[a.is_subtask?(r(),l("span",Ce," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):i("",!0),k(" "+d(a.title),1)],8,Te),e("div",Se,[e("div",De,"–û–ø–æ–∑–¥–∞–Ω–∏–µ! –°—Ä–æ–∫: "+d(w(a.due_date)),1),e("div",$e,d(a.project_name),1)])]))),128)),s.filteredTasks.overdue.length===0?(r(),l("div",Ve,"–ù–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–∫")):i("",!0)])])):i("",!0),o.value.columns.completed?(r(),l("td",Fe,[e("div",Be,[e("span",Le,d(s.filteredTasks.completed.length),1)]),e("div",Me,[(r(!0),l(c,null,p(s.filteredTasks.completed,a=>(r(),l("div",{key:a.id,class:"group flex items-center justify-between bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700 hover:bg-white dark:hover:bg-slate-700 transition-colors"},[e("div",Ne,[e("a",{href:a.link,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30"},[a.is_subtask?(r(),l("span",ze," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):i("",!0),k(" "+d(a.title),1)],8,Ue),e("span",Ee,d(a.project_name),1)]),t[19]||(t[19]=e("div",{class:"text-emerald-500 ml-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))]))),128)),s.filteredTasks.completed.length===0?(r(),l("div",Ie,"–ù–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö")):i("",!0)])])):i("",!0),e("td",Oe,[e("span",qe,d(s.filteredTasks.in_work.length+s.filteredTasks.overdue.length+s.filteredTasks.completed.length),1)])]))),128)),y.value.length===0?(r(),l("tr",Ae,t[20]||(t[20]=[e("td",{colspan:"5",class:"px-6 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center text-slate-400"},[e("svg",{class:"w-12 h-12 mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"font-medium"},"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º")])],-1)]))):i("",!0)])])]))])])])]),_:1})],64))}},Qe=U(He,[["__scopeId","data-v-dfa9d7c2"]]);export{Qe as default};
