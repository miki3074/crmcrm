import{r as p,q as ce,I as Tt,o as l,f as o,b as t,F as y,x as k,t as i,g as u,j as w,v as F,i as x,n as B,s as q,k as ge,d as _,Q as Ft,m as I,z as At,a as ue,w as Rt,y as qt,e as ot}from"./app-7cd1036b.js";import{_ as Bt}from"./AuthenticatedLayout-24892a92.js";import"./ApplicationLogo-0e02a6b0.js";import"./_plugin-vue_export-helper-c27b6911.js";const Ot={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5 mt-8"},Nt={class:"space-y-3 max-h-80 overflow-y-auto pr-1"},Wt={class:"flex-1"},Ht={class:"flex items-center gap-2"},Lt={class:"text-sm font-medium text-gray-900 dark:text-white"},Pt={class:"text-xs text-gray-500"},Qt=["onClick"],Gt={class:"mt-1 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},Jt={key:0,class:"text-sm text-gray-500"},Kt={key:0,class:"mt-4"},Xt={class:"mt-2 flex justify-end"},Yt=["disabled"],Zt={key:1,class:"mt-3 text-xs text-gray-500"},es={__name:"TaskChat",props:{taskId:{type:Number,required:!0},canChat:{type:Boolean,default:!0}},setup(z){const $=z,b=p([]),g=p("");let j=null;const a=async()=>{const{data:h}=await x.get(`/api/tasks/${$.taskId}/comments`,{withCredentials:!0});b.value=h},f=async()=>{g.value.trim()&&(await x.get("/sanctum/csrf-cookie"),await x.post(`/api/tasks/${$.taskId}/comments`,{body:g.value},{withCredentials:!0}),g.value="",await a())},D=async h=>{await x.delete(`/api/task-comments/${h}`),await a()};return ce(async()=>{await a(),j=setInterval(a,1e4)}),Tt(()=>{j&&clearInterval(j)}),(h,A)=>(l(),o("div",Ot,[A[1]||(A[1]=t("div",{class:"mb-4 flex items-center justify-between"},[t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")],-1)),t("div",Nt,[(l(!0),o(y,null,k(b.value,m=>{var v;return l(),o("div",{key:m.id,class:"flex gap-3"},[t("div",Wt,[t("div",Ht,[t("div",Lt,i(((v=m.user)==null?void 0:v.name)??"‚Äî"),1),t("div",Pt,i(new Date(m.created_at).toLocaleString()),1),h.$page.props.auth.user&&m.user&&m.user.id===h.$page.props.auth.user.id?(l(),o("button",{key:0,class:"ml-auto text-xs text-red-600 hover:underline",onClick:n=>D(m.id)},"–£–¥–∞–ª–∏—Ç—å",8,Qt)):u("",!0)]),t("div",Gt,i(m.body),1)])])}),128)),b.value.length?u("",!0):(l(),o("div",Jt,"–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π."))]),z.canChat?(l(),o("div",Kt,[w(t("textarea",{"onUpdate:modelValue":A[0]||(A[0]=m=>g.value=m),rows:"2",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶",class:"w-full rounded-lg border bg-white/80 dark:bg-gray-700 px-3 py-2 text-sm dark:text-white"},null,512),[[F,g.value]]),t("div",Xt,[t("button",{onClick:f,disabled:!g.value.trim(),class:"px-4 py-2 rounded-lg bg-indigo-600 text-white disabled:opacity-40"},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,Yt)])])):(l(),o("div",Zt," –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —á–∞—Ç–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. "))]))}},ts={class:"mt-6"},ss={key:0,class:"space-y-2"},as=["checked","onChange"],ls={key:0,class:"text-sm text-gray-500"},os={key:1,class:"text-gray-500"},rs={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},ds={class:"bg-white rounded p-6 w-96"},is={key:0,class:"text-sm text-rose-600 mb-2"},ns=["value"],us=["value"],ps=["value"],vs={class:"flex items-center gap-2 mb-2"},gs={class:"flex justify-end gap-2"},cs={__name:"TaskChecklists",props:{taskId:{type:Number,required:!0},executors:{type:Array,default:()=>[]},responsibles:{type:Array,default:()=>[]},creator:{type:Object,default:()=>null}},setup(z){const $=p(""),b=z,g=p([]),j=p(!1),a=p(!1),f=p({title:"",assigned_to:[],important:!1,files:[]}),D=async()=>{j.value=!0;try{const{data:m}=await x.get(`/api/tasks/${b.taskId}/checklists`);g.value=m}finally{j.value=!1}},h=async()=>{var v,n;$.value="";const m=new FormData;m.append("title",f.value.title),f.value.assigned_to&&m.append("assigned_to",f.value.assigned_to),m.append("important",f.value.important?1:0);for(let S of f.value.files)m.append("files[]",S);try{await x.post(`/api/tasks/${b.taskId}/checklists`,m,{headers:{"Content-Type":"multipart/form-data"}}),a.value=!1,f.value={title:"",assigned_to:"",important:!1,files:[]},await D()}catch(S){if(((v=S.response)==null?void 0:v.status)===422){const V=S.response.data;$.value=V.message||((n=Object.values(V.errors||{})[0])==null?void 0:n[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–Ω–∫—Ç–∞ —á–µ–∫-–ª–∏—Å—Ç–∞."}else $.value="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞."}},A=async m=>{await x.patch(`/api/checklists/${m.id}/toggle`),await D()};return ce(D),(m,v)=>(l(),o("div",ts,[v[10]||(v[10]=t("h3",{class:"text-lg font-semibold mb-2"},"–ß–µ–∫-–ª–∏—Å—Ç—ã",-1)),g.value.length?(l(),o("ul",ss,[(l(!0),o(y,null,k(g.value,n=>(l(),o("li",{key:n.id,class:"flex items-center gap-2"},[t("input",{type:"checkbox",checked:n.completed,onChange:S=>A(n)},null,40,as),t("span",{class:B({"font-bold text-red-600":n.important})},i(n.title),3),n.assignee?(l(),o("span",ls,"("+i(n.assignee.name)+")",1)):u("",!0)]))),128))])):(l(),o("p",os,"–ù–µ—Ç —á–µ–∫-–ª–∏—Å—Ç–æ–≤")),t("button",{class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded",onClick:v[0]||(v[0]=n=>a.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç "),a.value?(l(),o("div",rs,[t("div",ds,[v[8]||(v[8]=t("h4",{class:"text-lg font-semibold mb-2"},"–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞",-1)),$.value?(l(),o("p",is,i($.value),1)):u("",!0),w(t("input",{required:"","onUpdate:modelValue":v[1]||(v[1]=n=>f.value.title=n),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"w-full border mb-2 p-2"},null,512),[[F,f.value.title]]),v[9]||(v[9]=t("label",{class:"block text-sm"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":v[2]||(v[2]=n=>f.value.assigned_to=n),class:"w-full border mb-2 p-2"},[v[6]||(v[6]=t("option",{value:""},"‚Äî",-1)),(l(!0),o(y,null,k(z.executors,n=>(l(),o("option",{key:"exec-"+n.id,value:n.id},i(n.name),9,ns))),128)),(l(!0),o(y,null,k(z.responsibles,n=>(l(),o("option",{key:"resp-"+n.id,value:n.id},i(n.name),9,us))),128)),z.creator?(l(),o("option",{key:0,value:z.creator.id},i(z.creator.name),9,ps)):u("",!0)],512),[[q,f.value.assigned_to]]),t("label",vs,[w(t("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=n=>f.value.important=n)},null,512),[[ge,f.value.important]]),v[7]||(v[7]=_(" –í–∞–∂–Ω–æ ",-1))]),t("input",{type:"file",multiple:"",onChange:v[4]||(v[4]=n=>f.value.files=Array.from(n.target.files)),class:"mb-4"},null,32),t("div",gs,[t("button",{onClick:v[5]||(v[5]=n=>a.value=!1),class:"px-3 py-1 border"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:h,class:"px-3 py-1 bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):u("",!0)]))}},xs={class:"relative overflow-hidden"},ms={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-white"},bs={class:"flex items-start gap-4"},ys={class:"text-2xl sm:text-3xl font-semibold"},ks={key:0,class:"px-3 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"},fs={class:"mt-2 flex flex-wrap items-center gap-2 text-sm"},ws={class:"px-2 py-1 rounded-full bg-white/20"},hs={class:"px-2 py-1 rounded-full bg-white/20"},_s={class:"px-2 py-1 rounded-full bg-white/20"},$s={class:"px-2 py-1 rounded-full bg-white/20"},Cs={class:"px-2 py-1 rounded-full bg-white/20"},js={key:0,class:"px-2 py-1 rounded-full bg-white/20"},Vs={key:1,class:"bg-white/10 rounded-xl p-4 mt-4"},Ms={class:"text-gray-200 whitespace-pre-line"},Us={class:"flex flex-col sm:flex-row flex-wrap gap-3 mt-6 sm:mt-0 sm:ml-auto w-full sm:w-auto"},Es={class:"flex flex-wrap justify-end gap-2 w-full sm:w-auto"},Is={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},zs={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-xl"},Ds={key:0,class:"text-sm text-rose-600 mb-3"},Ss={class:"flex justify-end gap-2"},Ts=["disabled"],Fs={key:0},As={key:1},Rs=["href"],qs={key:0,class:"flex flex-wrap gap-2 w-full sm:w-auto border-t border-white/20 sm:border-t-0 sm:border-l sm:pl-3 sm:ml-3 pt-3 sm:pt-0 mt-3 sm:mt-0"},Bs={key:1,class:"flex justify-end gap-2 w-full sm:w-auto border-t border-white/20 sm:border-t-0 sm:border-l sm:pl-3 sm:ml-3 pt-3 sm:pt-0 mt-3 sm:mt-0"},Os={key:1,class:"text-xs text-amber-200"},Ns={key:0},Ws={key:2,class:"text-sm text-emerald-200"},Hs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},Ls={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ps={class:"lg:col-span-2 space-y-4"},Qs={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Gs={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Js={class:"text-sm font-medium text-gray-900 dark:text-white"},Ks={class:"text-sm font-medium text-gray-900 dark:text-white"},Xs={class:"mt-2"},Ys={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Zs={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},ea={class:"flex mt-3 gap-1"},ta=["onClick","title"],sa={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},aa={key:0},la={key:1,class:"mt-4 grid grid-cols-2 gap-2"},oa={key:2,class:"mt-3"},ra={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},da={key:1,class:"flex flex-wrap gap-2"},ia=["href"],na={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ua={class:"flex items-center justify-between mb-3"},pa={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},va={key:1,class:"text-sm text-gray-600 dark:text-gray-300"},ga={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ca=["onClick"],xa={class:"flex items-start justify-between gap-3"},ma={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},ba={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},ya={class:"space-y-4"},ka={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},fa={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},wa={class:"flex justify-between"},ha={class:"font-medium"},_a={class:"flex justify-between"},$a={class:"font-medium"},Ca={class:"flex justify-between"},ja={class:"font-medium"},Va={class:"flex justify-between"},Ma={class:"font-medium"},Ua={class:"flex justify-between"},Ea={class:"font-medium"},Ia={class:"flex justify-between"},za={key:0,class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Da={key:0,class:"space-y-4"},Sa={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ta={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Fa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Aa={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Ra={class:"flex items-center justify-between"},qa={key:0,class:"mt-3 text-sm text-rose-600"},Ba=["value"],Oa=["value"],Na={class:"grid grid-cols-2 gap-4"},Wa={class:"flex justify-end gap-2"},Ha=["disabled"],La={key:0},Pa={key:1},Qa={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ga={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6"},Ja={class:"mb-3"},Ka={class:"mb-3"},Xa={class:"mb-3"},Ya={class:"flex justify-end gap-2 mt-4"},Za={key:2,class:"fixed inset-0 flex items-center justify-center bg-black/50"},el={class:"bg-white p-4 rounded w-96"},tl=["value"],sl={class:"flex justify-end gap-2 mt-4"},al={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ll={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},ol=["value"],rl=["value"],dl={key:0,class:"text-rose-600 text-sm mt-2"},il={class:"mt-4 flex justify-end gap-2"},nl={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ul={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},pl=["value"],vl=["value"],gl={key:0,class:"text-rose-600 text-sm mt-2"},cl={class:"mt-4 flex justify-end gap-2"},xl={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ml={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},bl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},yl=["value"],kl={class:"flex justify-end gap-2"},fl={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},wl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},hl={class:"max-h-60 overflow-y-auto space-y-2 mb-4"},_l=["value"],$l={class:"flex justify-end gap-2"},Cl={key:7,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},jl={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-4xl shadow-xl"},Vl={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},Ml=["onClick"],Ul=["onClick"],El=["onClick"],Il={key:0,class:"mt-3 text-sm text-rose-600"},zl={class:"flex justify-end mt-5"},Dl={key:8,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Sl={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-xl"},Tl={class:"flex justify-end gap-2 mt-4"},Fl=["disabled"],Al={key:0},Rl={key:1},Wl={__name:"Show",setup(z){var we;const{props:$}=Ft(),b=$.id,g=(we=$.auth)==null?void 0:we.user,j=p(!0),a=p(null),f=p(!1),D=p(""),h=p(null),A=r=>{h.value=r.target.files},m=p(!1),v=p([]),n=p({title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""}),S=p(!1),V=p({title:"",start_date:"",due_date:""}),rt=I(()=>{var r;return!a.value||!g?!1:(a.value.responsibles||[]).some(e=>e.id===g.id)||(((r=a.value.project)==null?void 0:r.managers)||[]).some(e=>e.id===g.id)||P.value}),xe=r=>r==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":r==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",me=r=>r==="high"?"–í—ã—Å–æ–∫–∞—è":r==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è",T=async()=>{j.value=!0;try{const{data:r}=await x.get(`/api/tasks/${b}`,{withCredentials:!0});a.value=r,V.value={title:r.title||"",start_date:r.start_date||"",due_date:r.due_date||""}}finally{j.value=!1}},dt=async()=>{var r,e;try{const{data:d}=await x.put(`/api/tasks/${b}`,V.value,{withCredentials:!0});a.value=d.task,S.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},it=async r=>{try{const{data:e}=await x.patch(`/api/tasks/${b}/progress`,{progress:r},{withCredentials:!0});a.value.progress=e.progress}catch{alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.")}},nt=async()=>{var e;if(!((e=h.value)!=null&&e.length))return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã");const r=new FormData;for(let d=0;d<h.value.length;d++)r.append("files[]",h.value[d]);try{await x.post(`/api/tasks/${b}/files`,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),h.value=null,await T()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤")}},ut=async()=>{const{data:r}=await x.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,m.value=!0},pt=async()=>{var r,e;f.value=!0,D.value="";try{const d={title:n.value.title,executor_id:Array.isArray(n.value.executor_id)?n.value.executor_id:[n.value.executor_id],responsible_id:Array.isArray(n.value.responsible_id)?n.value.responsible_id:[n.value.responsible_id],start_date:n.value.start_date,due_date:n.value.due_date};await x.post(`/api/tasks/${b}/subtasks`,d),m.value=!1,await T()}catch(d){D.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{f.value=!1}},P=I(()=>{var r,e,d;return(d=(e=(r=a.value)==null?void 0:r.project)==null?void 0:e.executors)==null?void 0:d.some(c=>c.id===(g==null?void 0:g.id))}),be=I(()=>{var r;return(((r=a.value)==null?void 0:r.subtasks)||[]).some(e=>!e.completed)}),vt=I(()=>{var r,e;return((r=a.value)==null?void 0:r.progress)===100&&!((e=a.value)!=null&&e.completed)&&!be.value}),gt=async()=>{var r,e;try{const{data:d}=await x.patch(`/api/tasks/${b}/complete`,{},{withCredentials:!0});a.value=d.task}catch(d){const c=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É";alert(c)}},ct=I(()=>{var e,d;const r=(d=(e=$.auth)==null?void 0:e.user)==null?void 0:d.id;return!r||!a.value?!1:(a.value.executors||[]).some(c=>c.id===r)||(a.value.responsibles||[]).some(c=>c.id===r)}),xt=I(()=>{var r,e,d;return!a.value||!g?!1:(a.value.executors||[]).some(c=>c.id===g.id)||(a.value.responsibles||[]).some(c=>c.id===g.id)||(((r=a.value.project)==null?void 0:r.executors)||[]).some(c=>c.id===g.id)||g.id===((d=(e=a.value.project)==null?void 0:e.company)==null?void 0:d.user_id)}),mt=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),ye=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),Q=p(!1),G=p(!1),J=p(""),bt=async()=>{var r,e;J.value="",G.value=!0;try{await x.delete(`/api/tasks/${b}`,{withCredentials:!0}),Q.value=!1,alert("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞."),window.history.back()}catch(d){J.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏"}finally{G.value=!1}},K=p(!1),X=p(null),yt=async()=>{const{data:r}=await x.get(`/api/projects/${a.value.project.id}/employees`,{withCredentials:!0});v.value=r,K.value=!0},kt=async()=>{var r,e;if(X.value)try{const{data:d}=await x.post(`/api/tasks/${b}/watchers`,{user_id:X.value},{withCredentials:!0});a.value.watchers=d.watchers,K.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è")}},Y=p(!1),Z=p(!1),ke=p(null),ee=I(()=>{var r,e,d;return!a.value||!g?!1:g.id===((e=(r=a.value.project)==null?void 0:r.company)==null?void 0:e.user_id)||(((d=a.value.project)==null?void 0:d.managers)||[]).some(c=>c.id===g.id)||P.value}),fe=async()=>{const{data:r}=await x.get(`/api/projects/${a.value.project.id}/employees`);v.value=r},ft=async()=>{await fe(),ke.value=null,Y.value=!0},wt=async()=>{await fe(),ke.value=null,Z.value=!0},te=p(!1),se=p(!1),O=p([]),N=p([]),ae=p([]),ht=async()=>{const{data:r}=await x.get(`/api/projects/${a.value.project.id}/employees`);ae.value=r,te.value=!0},_t=async()=>{const{data:r}=await x.get(`/api/projects/${a.value.project.id}/employees`);ae.value=r,se.value=!0},$t=async()=>{O.value.length&&(await x.post(`/api/tasks/${b}/executors/add`,{user_ids:O.value}),await T(),te.value=!1,O.value=[])},Ct=async()=>{N.value.length&&(await x.post(`/api/tasks/${b}/responsibles/add`,{user_ids:N.value}),await T(),se.value=!1,N.value=[])},pe=p(!1),R=p(""),jt=async r=>{var e,d,c,M,U;R.value="";try{await x.delete(`/api/tasks/${b}/executors`,{data:{user_id:r}}),await T()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"}},Vt=async r=>{var e,d,c,M,U;R.value="";try{await x.delete(`/api/tasks/${b}/responsibles`,{data:{user_id:r}}),await T()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ"}},Mt=async r=>{var e,d,c,M,U;R.value="";try{await x.delete(`/api/tasks/${b}/watchers`,{data:{user_id:r}}),await T()}catch(E){R.value=((d=(e=E.response)==null?void 0:e.data)==null?void 0:d.message)||((U=Object.values(((M=(c=E.response)==null?void 0:c.data)==null?void 0:M.errors)||{})[0])==null?void 0:U[0])||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è"}},le=p(null),oe=p(null),re=p(null),de=p(null),W=p(""),H=p(""),Ut=I(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.executors||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),Et=I(()=>{if(!v.value.length||!a.value)return[];const r=(a.value.responsibles||[]).map(e=>e.id);return v.value.filter(e=>!r.includes(e.id))}),It=async()=>{var r,e;if(W.value="",!le.value||!oe.value){W.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await x.patch(`/api/tasks/${b}/executor`,{replace_user_id:le.value,user_id:oe.value}),await T(),Y.value=!1}catch(d){W.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è."}},zt=async()=>{var r,e;if(H.value="",!re.value||!de.value){H.value="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–≥–æ –∏ –Ω–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å.";return}try{await x.patch(`/api/tasks/${b}/responsible`,{replace_user_id:re.value,user_id:de.value}),await T(),Z.value=!1}catch(d){H.value=((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ."}},ie=p(!1),ne=p(!1),L=p({description:""}),Dt=()=>{var r;L.value.description=((r=a.value)==null?void 0:r.description)||"",ie.value=!0},St=async()=>{var r,e;if(a.value){ne.value=!0;try{await x.patch(`/api/tasks/${a.value.id}/description`,{description:L.value.description}),a.value.description=L.value.description,ie.value=!1}catch(d){alert(((e=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è")}finally{ne.value=!1}}};return ce(T),(r,e)=>{var c;const d=At("Head");return l(),o(y,null,[ue(d,{title:(c=a.value)!=null&&c.title?`–ó–∞–¥–∞—á–∞ ‚Äî ${a.value.title}`:"–ó–∞–¥–∞—á–∞"},null,8,["title"]),ue(Bt,null,{default:Rt(()=>{var M,U,E,he,_e,$e,Ce,je,Ve,Me,Ue,Ee,Ie,ze,De,Se,Te,Fe,Ae,Re,qe,Be,Oe,Ne,We,He,Le,Pe,Qe,Ge,Je,Ke,Xe,Ye,Ze,et,tt,st,at,lt;return[t("div",xs,[e[41]||(e[41]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600 opacity-90"},null,-1)),t("div",ms,[t("div",bs,[t("div",null,[t("h1",ys,i(((M=a.value)==null?void 0:M.title)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),(E=(U=a.value)==null?void 0:U.watcherstask)!=null&&E.some(s=>s.id===r.$page.props.auth.user.id)?(l(),o("span",ks," üëÅ –í—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ ")):u("",!0),t("div",fs,[t("span",ws,[e[31]||(e[31]=_(" –ü—Ä–æ–µ–∫—Ç: ",-1)),t("b",null,i(((_e=(he=a.value)==null?void 0:he.project)==null?void 0:_e.name)??"‚Äî"),1)]),t("span",hs,[e[32]||(e[32]=_(" –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),t("b",null,i(((je=(Ce=($e=a.value)==null?void 0:$e.project)==null?void 0:Ce.company)==null?void 0:je.name)??"‚Äî"),1)]),t("span",_s,[e[33]||(e[33]=_(" –û—Ç: ",-1)),t("b",null,i(((Me=(Ve=a.value)==null?void 0:Ve.creator)==null?void 0:Me.name)??"‚Äî"),1)]),t("span",$s,[e[34]||(e[34]=_(" –ö–æ–º—É: ",-1)),t("b",null,i((Ee=(Ue=a.value)==null?void 0:Ue.executors)!=null&&Ee.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("span",Cs,[e[35]||(e[35]=_(" –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: ",-1)),t("b",null,i((ze=(Ie=a.value)==null?void 0:Ie.responsibles)!=null&&ze.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),a.value&&a.value.watcherstask?(l(),o("span",js,[e[36]||(e[36]=_(" –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1)),t("b",null,i(a.value.watcherstask.map(s=>s.name).join(", ")||"‚Äî"),1)])):u("",!0),a.value?(l(),o("span",{key:1,class:B(["px-2 py-1 rounded-full ring-1 bg-white text-gray-900",xe(a.value.priority)])},[e[37]||(e[37]=_(" –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ",-1)),t("b",null,i(me(a.value.priority)),1)],2)):u("",!0)]),(De=a.value)!=null&&De.description?(l(),o("div",Vs,[e[38]||(e[38]=t("h3",{class:"text-base font-semibold text-white mb-2"},"üìù –û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",Ms,i(a.value.description),1)])):u("",!0)]),t("div",Us,[t("div",Es,[ye.value?(l(),o("button",{key:0,onClick:e[0]||(e[0]=s=>S.value=!0),class:"flex items-center gap-1 rounded-xl bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 font-medium shadow-sm transition"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å ")):u("",!0),mt.value?(l(),o("button",{key:1,onClick:e[1]||(e[1]=s=>Q.value=!0),class:"flex items-center gap-1 rounded-xl bg-rose-500/90 hover:bg-rose-600 text-white px-4 py-2 font-medium shadow-sm transition"}," üóë –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É ")):u("",!0),t("button",{onClick:Dt,class:"flex items-center gap-1 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 font-medium shadow-sm transition"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ "),Q.value?(l(),o("div",Is,[t("div",zs,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É? ",-1)),e[40]||(e[40]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},[_(" –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ "),t("span",{class:"font-semibold text-rose-600"},"–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ"),_("."),t("br"),_(" –ó–∞–¥–∞—á–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã. ")],-1)),J.value?(l(),o("p",Ds,i(J.value),1)):u("",!0),t("div",Ss,[t("button",{style:{color:"gray"},onClick:e[2]||(e[2]=s=>Q.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:bt,class:"px-4 py-2 rounded-lg bg-rose-600 hover:bg-rose-700 text-white",disabled:G.value},[G.value?(l(),o("span",As,"–£–¥–∞–ª—è—é‚Ä¶")):(l(),o("span",Fs,"–£–¥–∞–ª–∏—Ç—å"))],8,Ts)])])])):u("",!0),(Te=(Se=a.value)==null?void 0:Se.project)!=null&&Te.id?(l(),o("a",{key:3,href:`/projects/${a.value.project.id}`,class:"flex items-center gap-1 rounded-xl bg-white hover:bg-gray-100 text-gray-900 px-4 py-2 font-medium shadow-sm transition"}," üîô –ö –ø—Ä–æ–µ–∫—Ç—É ",8,Rs)):u("",!0)]),ee.value?(l(),o("div",qs,[t("button",{onClick:ft,class:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md transition"}," üë∑ –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),t("button",{onClick:wt,class:"px-3 py-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-sm rounded-md transition"}," üë®‚Äçüíº –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),ee.value?(l(),o("button",{key:0,onClick:ht,class:"px-3 py-1.5 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-md transition"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è ")):u("",!0),ee.value?(l(),o("button",{key:1,onClick:_t,class:"px-3 py-1.5 bg-teal-500 hover:bg-teal-600 text-white text-sm rounded-md transition"}," ‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ ")):u("",!0),ye.value?(l(),o("button",{key:2,onClick:yt,class:"px-3 py-1.5 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-md transition"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è ")):u("",!0),ee.value?(l(),o("button",{key:3,onClick:e[3]||(e[3]=s=>pe.value=!0),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-white text-sm rounded-md"}," ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ")):u("",!0)])):u("",!0),ct.value?(l(),o("div",Bs,[vt.value?(l(),o("button",{key:0,onClick:gt,class:"px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-medium shadow-sm transition"}," ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É ")):((Fe=a.value)==null?void 0:Fe.progress)===100&&!((Ae=a.value)!=null&&Ae.completed)?(l(),o("div",Os,[be.value?(l(),o("span",Ns," –ï—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É. ")):u("",!0)])):u("",!0),(Re=a.value)!=null&&Re.completed?(l(),o("div",Ws," –ó–∞–≤–µ—Ä—à–µ–Ω–∞ "+i(((qe=a.value)==null?void 0:qe.completed_at)||""),1)):u("",!0)])):u("",!0)])])])]),t("div",Hs,[t("div",Ls,[t("div",Ps,[t("div",Qs,[t("div",Gs,[t("div",null,[e[42]||(e[42]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),t("div",Js,i(((Be=a.value)==null?void 0:Be.start_date)??"‚Äî"),1)]),t("div",null,[e[43]||(e[43]=t("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),t("div",Ks,i(((Oe=a.value)==null?void 0:Oe.due_date)??"‚Äî"),1)]),t("div",null,[e[44]||(e[44]=t("div",{class:"text-xs text-gray-500"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),t("div",Xs,[t("div",Ys,[t("div",{class:"h-2 bg-emerald-500",style:qt({width:(((Ne=a.value)==null?void 0:Ne.progress)||0)+"%"})},null,4)]),t("div",Zs,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+i(((We=a.value)==null?void 0:We.progress)??0)+"%",1)]),t("div",ea,[(l(),o(y,null,k(11,s=>{var C;return t("button",{key:s,onClick:ve=>it((s-1)*10),class:B(["flex-1 h-5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300",{"!bg-emerald-500":(((C=a.value)==null?void 0:C.progress)||0)>=(s-1)*10}]),title:`${(s-1)*10}%`},null,10,ta)}),64))])])])]),t("div",sa,[xt.value?(l(),o("div",aa,[t("input",{type:"file",multiple:"",onChange:A,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"text-sm text-gray-600 dark:text-gray-300"},null,32),t("button",{onClick:nt,class:"rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 mt-4"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å ")])):u("",!0),j.value?(l(),o("div",la,[(l(),o(y,null,k(4,s=>t("div",{key:s,class:"h-8 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"})),64))])):(l(),o("div",oa,[(Le=(He=a.value)==null?void 0:He.files)!=null&&Le.length?(l(),o("div",da,[(l(!0),o(y,null,k(a.value.files,s=>(l(),o("a",{key:s.id,href:`/api/tasks/files/${s.id}`,class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100"},[e[45]||(e[45]=t("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),_(" "+i(s.file_path.split("/").pop()),1)],8,ia))),128))])):(l(),o("div",ra," –§–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã. "))]))]),t("div",na,[t("div",ua,[e[46]||(e[46]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ü–æ–¥–∑–∞–¥–∞—á–∏",-1)),rt.value?(l(),o("button",{key:0,onClick:ut,class:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700"}," + –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):u("",!0)]),j.value?(l(),o("div",pa,[(l(),o(y,null,k(4,s=>t("div",{key:s,class:"rounded-xl border p-4 animate-pulse"},e[47]||(e[47]=[t("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),t("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(Qe=(Pe=a.value)==null?void 0:Pe.subtasks)!=null&&Qe.length?(l(),o("div",ga,[(l(!0),o(y,null,k(a.value.subtasks,s=>{var C;return l(),o("div",{key:s.id,onClick:ve=>r.$inertia.visit(`/subtasks/${s.id}`),class:B(["group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",[s.progress===100?"border-emerald-500 ring-1 ring-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":s.progress>=50?"border-amber-400 ring-1 ring-amber-300 bg-amber-50 dark:bg-amber-900/20":"border-gray-400 ring-1 ring-gray-300 bg-gray-50 dark:bg-rose-900/20"]])},[t("div",xa,[t("h3",ma,i(s.title),1),t("span",{class:B(["text-sm px-2 py-1 rounded-full",{"bg-emerald-100 text-emerald-700":s.progress===100,"bg-amber-100 text-amber-700":s.progress>=50&&s.progress<100,"bg-rose-100 text-rose-700":s.progress<50}])},i(s.progress??0)+"% ",3)]),t("div",ba,[t("div",null,[e[48]||(e[48]=_(" –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: ",-1)),t("b",null,i(((C=s.executors)==null?void 0:C.map(ve=>ve.name).join(", "))||"‚Äî"),1)]),t("div",null,"–°—Ä–æ–∫–∏: "+i(s.start_date)+" ‚Äî "+i(s.due_date),1)])],10,ca)}),128))])):(l(),o("div",va," –ü–æ–¥–∑–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. "))])]),t("div",ya,[t("div",ka,[e[55]||(e[55]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ",-1)),t("dl",fa,[t("div",wa,[e[49]||(e[49]=t("dt",null,"–ê–≤—Ç–æ—Ä",-1)),t("dd",ha,i(((Je=(Ge=a.value)==null?void 0:Ge.creator)==null?void 0:Je.name)??"‚Äî"),1)]),t("div",_a,[e[50]||(e[50]=t("dt",null,"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),t("dd",$a,i((Xe=(Ke=a.value)==null?void 0:Ke.executors)!=null&&Xe.length?a.value.executors.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Ca,[e[51]||(e[51]=t("dt",null,"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),t("dd",ja,i((Ze=(Ye=a.value)==null?void 0:Ye.responsibles)!=null&&Ze.length?a.value.responsibles.map(s=>s.name).join(", "):"‚Äî"),1)]),t("div",Va,[e[52]||(e[52]=t("dt",null,"–ü—Ä–æ–µ–∫—Ç",-1)),t("dd",Ma,i(((tt=(et=a.value)==null?void 0:et.project)==null?void 0:tt.name)??"‚Äî"),1)]),t("div",Ua,[e[53]||(e[53]=t("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),t("dd",Ea,i(((lt=(at=(st=a.value)==null?void 0:st.project)==null?void 0:at.company)==null?void 0:lt.name)??"‚Äî"),1)]),t("div",Ia,[e[54]||(e[54]=t("dt",null,"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),t("dd",null,[a.value?(l(),o("span",{key:0,class:B(["px-2 py-1 text-xs rounded-full ring-1",xe(a.value.priority)])},i(me(a.value.priority)),3)):u("",!0)])])])]),a.value?(l(),o("div",za,[ue(cs,{"task-id":a.value.id,executors:a.value.executors,responsibles:a.value.responsibles,creator:a.value.creator},null,8,["task-id","executors","responsibles","creator"])])):u("",!0)]),a.value?(l(),o("div",Da,[t("div",Sa,[e[56]||(e[56]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ß–∞—Ç",-1)),ue(es,{"task-id":a.value.id,"can-chat":!0},null,8,["task-id"])])])):(l(),o("div",Ta,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"))])]),m.value?(l(),o("div",Fa,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>m.value=!1)}),t("div",Aa,[t("div",Ra,[e[57]||(e[57]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ù–æ–≤–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞",-1)),t("button",{onClick:e[5]||(e[5]=s=>m.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),D.value?(l(),o("p",qa,i(D.value),1)):u("",!0),t("form",{class:"mt-4 space-y-4",onSubmit:ot(pt,["prevent"])},[t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>n.value.title=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[F,n.value.title]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>n.value.executor_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[59]||(e[59]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,Ba))),128))],512),[[q,n.value.executor_id]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),w(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>n.value.responsible_id=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[e[61]||(e[61]=t("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,Oa))),128))],512),[[q,n.value.responsible_id]])]),t("div",Na,[t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>n.value.start_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[F,n.value.start_date]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),w(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>n.value.due_date=s),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[F,n.value.due_date]])])]),t("div",Wa,[t("button",{type:"button",onClick:e[11]||(e[11]=s=>m.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),t("button",{type:"submit",disabled:f.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[f.value?(l(),o("span",Pa,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",La,"–°–æ–∑–¥–∞—Ç—å"))],8,Ha)])],32)])])):u("",!0),S.value?(l(),o("div",Qa,[t("div",Ga,[e[69]||(e[69]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É",-1)),t("form",{onSubmit:ot(dt,["prevent"])},[t("div",Ja,[e[65]||(e[65]=t("label",{class:"block text-sm text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),w(t("input",{required:"","onUpdate:modelValue":e[12]||(e[12]=s=>V.value.title=s),type:"text",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[F,V.value.title]])]),t("div",Ka,[e[66]||(e[66]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),w(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>V.value.start_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[F,V.value.start_date]])]),t("div",Xa,[e[67]||(e[67]=t("label",{class:"block text-sm"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>V.value.due_date=s),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[F,V.value.due_date]])]),t("div",Ya,[t("button",{type:"button",onClick:e[15]||(e[15]=s=>S.value=!1),class:"px-4 py-2 border rounded"},"–û—Ç–º–µ–Ω–∞"),e[68]||(e[68]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):u("",!0),K.value?(l(),o("div",Za,[t("div",el,[e[70]||(e[70]=t("h3",{class:"font-semibold mb-3"},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),w(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>X.value=s),class:"w-full border p-2 rounded"},[(l(!0),o(y,null,k(v.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,tl))),128))],512),[[q,X.value]]),t("div",sl,[t("button",{onClick:e[17]||(e[17]=s=>K.value=!1),class:"px-3 py-1 border rounded"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:kt,class:"px-3 py-1 bg-blue-600 text-white rounded"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):u("",!0),Y.value?(l(),o("div",al,[t("div",ll,[e[73]||(e[73]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),e[74]||(e[74]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>le.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[71]||(e[71]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(y,null,k(a.value.executors,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,ol))),128))],512),[[q,le.value]]),e[75]||(e[75]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>oe.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[72]||(e[72]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),(l(!0),o(y,null,k(Ut.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,rl))),128))],512),[[q,oe.value]]),W.value?(l(),o("p",dl,i(W.value),1)):u("",!0),t("div",il,[t("button",{onClick:e[20]||(e[20]=s=>Y.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:It,class:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):u("",!0),Z.value?(l(),o("div",nl,[t("div",ul,[e[78]||(e[78]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),e[79]||(e[79]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ö–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>re.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white mb-4"},[e[76]||(e[76]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(y,null,k(a.value.responsibles,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,pl))),128))],512),[[q,re.value]]),e[80]||(e[80]=t("label",{class:"text-sm text-gray-600 dark:text-gray-300"},"–ù–∞ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å:",-1)),w(t("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>de.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-700 dark:text-white"},[e[77]||(e[77]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),(l(!0),o(y,null,k(Et.value,s=>(l(),o("option",{key:s.id,value:s.id},i(s.name),9,vl))),128))],512),[[q,de.value]]),H.value?(l(),o("p",gl,i(H.value),1)):u("",!0),t("div",cl,[t("button",{onClick:e[23]||(e[23]=s=>Z.value=!1),class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 rounded-md text-sm"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:zt,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-md text-sm"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):u("",!0),te.value?(l(),o("div",xl,[t("div",ml,[e[81]||(e[81]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π",-1)),t("div",bl,[(l(!0),o(y,null,k(ae.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[24]||(e[24]=C=>O.value=C)},null,8,yl),[[ge,O.value]]),t("span",null,i(s.name),1)]))),128))]),t("div",kl,[t("button",{onClick:e[25]||(e[25]=s=>te.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:$t,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):u("",!0),se.value?(l(),o("div",fl,[t("div",wl,[e[82]||(e[82]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö",-1)),t("div",hl,[(l(!0),o(y,null,k(ae.value,s=>(l(),o("label",{key:s.id,class:"flex items-center gap-2"},[w(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[26]||(e[26]=C=>N.value=C)},null,8,_l),[[ge,N.value]]),t("span",null,i(s.name),1)]))),128))]),t("div",$l,[t("button",{onClick:e[27]||(e[27]=s=>se.value=!1),class:"px-4 py-2 border rounded-lg"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:Ct,class:"px-4 py-2 bg-teal-600 text-white rounded-lg"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):u("",!0),pe.value?(l(),o("div",Cl,[t("div",jl,[e[86]||(e[86]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∑–∞–¥–∞—á–∏ ",-1)),t("div",Vl,[t("div",null,[e[83]||(e[83]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),(l(!0),o(y,null,k(a.value.executors,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:C=>jt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Ml)]))),128))]),t("div",null,[e[84]||(e[84]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ",-1)),(l(!0),o(y,null,k(a.value.responsibles,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:C=>Vt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,Ul)]))),128))]),t("div",null,[e[85]||(e[85]=t("h4",{class:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300"},"–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏",-1)),(l(!0),o(y,null,k(a.value.watcherstask,s=>(l(),o("div",{key:s.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded mb-2"},[t("span",null,i(s.name),1),t("button",{onClick:C=>Mt(s.id),class:"text-rose-600 hover:text-rose-700 text-xs font-medium"}," –£–¥–∞–ª–∏—Ç—å ",8,El)]))),128))])]),R.value?(l(),o("p",Il,i(R.value),1)):u("",!0),t("div",zl,[t("button",{onClick:e[28]||(e[28]=s=>pe.value=!1),class:"px-4 py-2 rounded-lg border dark:border-gray-600"}," –ó–∞–∫—Ä—ã—Ç—å ")])])])):u("",!0),ie.value?(l(),o("div",Dl,[t("div",Sl,[e[87]||(e[87]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"}," üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ ",-1)),w(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=s=>L.value.description=s),class:"w-full border rounded-lg p-3 min-h-[150px] dark:bg-gray-700 dark:text-white",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."},null,512),[[F,L.value.description]]),t("div",Tl,[t("button",{onClick:e[30]||(e[30]=s=>ie.value=!1),class:"px-4 py-2 border rounded-lg text-gray-600 dark:border-gray-500"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:St,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",disabled:ne.value},[ne.value?(l(),o("span",Rl,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",Al,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))],8,Fl)])])])):u("",!0)]}),_:1})],64)}}};export{Wl as default};
