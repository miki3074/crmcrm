import{r as g,q as R,I as tt,o as l,f as o,b as e,F as b,x as h,t as n,g as v,j as y,v as T,i as m,n as W,s as F,k as st,d as $,Q as at,m as I,z as lt,a as O,w as ot,y as dt,e as De}from"./app-aea83e3b.js";import{_ as rt}from"./AuthenticatedLayout-916f63d2.js";import"./ApplicationLogo-9287d5fa.js";import"./_plugin-vue_export-helper-c27b6911.js";const it={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5 mt-8"},nt={class:"space-y-3 max-h-80 overflow-y-auto pr-1"},ut={class:"flex-1"},pt={class:"flex items-center gap-2"},vt={class:"text-sm font-medium text-gray-900 dark:text-white"},gt={class:"text-xs text-gray-500"},mt=["onClick"],ct={class:"mt-1 text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap"},xt={key:0,class:"text-sm text-gray-500"},bt={key:0,class:"mt-4"},yt={class:"mt-2 flex justify-end"},ft=["disabled"],kt={key:1,class:"mt-3 text-xs text-gray-500"},wt={__name:"TaskChat",props:{taskId:{type:Number,required:!0},canChat:{type:Boolean,default:!0}},setup(C){const U=C,c=g([]),p=g("");let _=null;const s=async()=>{const{data:f}=await m.get(`/api/tasks/${U.taskId}/comments`,{withCredentials:!0});c.value=f},j=async()=>{p.value.trim()&&(await m.get("/sanctum/csrf-cookie"),await m.post(`/api/tasks/${U.taskId}/comments`,{body:p.value},{withCredentials:!0}),p.value="",await s())},M=async f=>{await m.delete(`/api/task-comments/${f}`),await s()};return R(async()=>{await s(),_=setInterval(s,1e4)}),tt(()=>{_&&clearInterval(_)}),(f,x)=>(l(),o("div",it,[x[1]||(x[1]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")],-1)),e("div",nt,[(l(!0),o(b,null,h(c.value,i=>{var u;return l(),o("div",{key:i.id,class:"flex gap-3"},[e("div",ut,[e("div",pt,[e("div",vt,n(((u=i.user)==null?void 0:u.name)??"‚Äî"),1),e("div",gt,n(new Date(i.created_at).toLocaleString()),1),f.$page.props.auth.user&&i.user&&i.user.id===f.$page.props.auth.user.id?(l(),o("button",{key:0,class:"ml-auto text-xs text-red-600 hover:underline",onClick:k=>M(i.id)},"–£–¥–∞–ª–∏—Ç—å",8,mt)):v("",!0)]),e("div",ct,n(i.body),1)])])}),128)),c.value.length?v("",!0):(l(),o("div",xt,"–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π."))]),C.canChat?(l(),o("div",bt,[y(e("textarea",{"onUpdate:modelValue":x[0]||(x[0]=i=>p.value=i),rows:"2",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶",class:"w-full rounded-lg border bg-white/80 dark:bg-gray-700 px-3 py-2 text-sm dark:text-white"},null,512),[[T,p.value]]),e("div",yt,[e("button",{onClick:j,disabled:!p.value.trim(),class:"px-4 py-2 rounded-lg bg-indigo-600 text-white disabled:opacity-40"},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,ft)])])):(l(),o("div",kt," –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —á–∞—Ç–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. "))]))}},ht={class:"mt-6"},_t={key:0,class:"space-y-2"},$t=["checked","onChange"],Ct={key:0,class:"text-sm text-gray-500"},jt={key:1,class:"text-gray-500"},Vt={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},Ut={class:"bg-white rounded p-6 w-96"},Mt=["value"],St=["value"],It=["value"],Tt={class:"flex items-center gap-2 mb-2"},Ft={class:"flex justify-end gap-2"},zt={__name:"TaskChecklists",props:{taskId:{type:Number,required:!0},executors:{type:Array,default:()=>[]},responsibles:{type:Array,default:()=>[]},creator:{type:Object,default:()=>null}},setup(C){const U=C,c=g([]),p=g(!1),_=g(!1),s=g({title:"",assigned_to:[],important:!1,files:[]}),j=async()=>{p.value=!0;try{const{data:x}=await m.get(`/api/tasks/${U.taskId}/checklists`);c.value=x}finally{p.value=!1}},M=async()=>{const x=new FormData;x.append("title",s.value.title),s.value.assigned_to&&x.append("assigned_to",s.value.assigned_to),x.append("important",s.value.important?1:0);for(let i of s.value.files)x.append("files[]",i);await m.post(`/api/tasks/${U.taskId}/checklists`,x),_.value=!1,s.value={title:"",assigned_to:"",important:!1,files:[]},await j()},f=async x=>{await m.patch(`/api/checklists/${x.id}/toggle`),await j()};return R(j),(x,i)=>(l(),o("div",ht,[i[10]||(i[10]=e("h3",{class:"text-lg font-semibold mb-2"},"–ß–µ–∫-–ª–∏—Å—Ç—ã",-1)),c.value.length?(l(),o("ul",_t,[(l(!0),o(b,null,h(c.value,u=>(l(),o("li",{key:u.id,class:"flex items-center gap-2"},[e("input",{type:"checkbox",checked:u.completed,onChange:k=>f(u)},null,40,$t),e("span",{class:W({"font-bold text-red-600":u.important})},n(u.title),3),u.assignee?(l(),o("span",Ct,"("+n(u.assignee.name)+")",1)):v("",!0)]))),128))])):(l(),o("p",jt,"–ù–µ—Ç —á–µ–∫-–ª–∏—Å—Ç–æ–≤")),e("button",{class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded",onClick:i[0]||(i[0]=u=>_.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç "),_.value?(l(),o("div",Vt,[e("div",Ut,[i[8]||(i[8]=e("h4",{class:"text-lg font-semibold mb-4"},"–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞",-1)),y(e("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>s.value.title=u),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"w-full border mb-2 p-2"},null,512),[[T,s.value.title]]),i[9]||(i[9]=e("label",{class:"block text-sm"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),y(e("select",{"onUpdate:modelValue":i[2]||(i[2]=u=>s.value.assigned_to=u),class:"w-full border mb-2 p-2"},[i[6]||(i[6]=e("option",{value:""},"‚Äî",-1)),(l(!0),o(b,null,h(C.executors,u=>(l(),o("option",{key:"exec-"+u.id,value:u.id},n(u.name),9,Mt))),128)),(l(!0),o(b,null,h(C.responsibles,u=>(l(),o("option",{key:"resp-"+u.id,value:u.id},n(u.name),9,St))),128)),C.creator?(l(),o("option",{key:0,value:C.creator.id},n(C.creator.name),9,It)):v("",!0)],512),[[F,s.value.assigned_to]]),e("label",Tt,[y(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=u=>s.value.important=u)},null,512),[[st,s.value.important]]),i[7]||(i[7]=$(" –í–∞–∂–Ω–æ ",-1))]),e("input",{type:"file",multiple:"",onChange:i[4]||(i[4]=u=>s.value.files=Array.from(u.target.files)),class:"mb-4"},null,32),e("div",Ft,[e("button",{onClick:i[5]||(i[5]=u=>_.value=!1),class:"px-3 py-1 border"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:M,class:"px-3 py-1 bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):v("",!0)]))}},Dt={class:"relative overflow-hidden"},qt={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-white"},Bt={class:"flex items-start gap-4"},Et={class:"text-2xl sm:text-3xl font-semibold"},Nt={class:"mt-2 flex flex-wrap items-center gap-2 text-sm"},Ht={class:"px-2 py-1 rounded-full bg-white/20"},Lt={class:"px-2 py-1 rounded-full bg-white/20"},Ot={class:"px-2 py-1 rounded-full bg-white/20"},Wt={class:"px-2 py-1 rounded-full bg-white/20"},At={class:"px-2 py-1 rounded-full bg-white/20"},Rt={key:0,class:"px-2 py-1 rounded-full bg-white/20"},Pt={class:"flex flex-col sm:flex-row flex-wrap gap-3 mt-6 sm:mt-0 sm:ml-auto w-full sm:w-auto"},Qt={class:"flex flex-wrap justify-end gap-2 w-full sm:w-auto"},Gt=["href"],Jt={key:0,class:"flex flex-wrap gap-2 w-full sm:w-auto border-t border-white/20 sm:border-t-0 sm:border-l sm:pl-3 sm:ml-3 pt-3 sm:pt-0 mt-3 sm:mt-0"},Kt={key:1,class:"flex justify-end gap-2 w-full sm:w-auto border-t border-white/20 sm:border-t-0 sm:border-l sm:pl-3 sm:ml-3 pt-3 sm:pt-0 mt-3 sm:mt-0"},Xt={key:1,class:"text-xs text-amber-200"},Yt={key:0},Zt={key:2,class:"text-sm text-emerald-200"},es={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-4 pb-10",style:{"margin-top":"3%"}},ts={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ss={class:"lg:col-span-2 space-y-4"},as={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ls={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},os={class:"text-sm font-medium text-gray-900 dark:text-white"},ds={class:"text-sm font-medium text-gray-900 dark:text-white"},rs={class:"mt-2"},is={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},ns={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},us={class:"flex mt-3 gap-1"},ps=["onClick","title"],vs={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},gs={key:0},ms={key:1,class:"mt-4 grid grid-cols-2 gap-2"},cs={key:2,class:"mt-3"},xs={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},bs={key:1,class:"flex flex-wrap gap-2"},ys=["href"],fs={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},ks={class:"flex items-center justify-between mb-3"},ws={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},hs={key:1,class:"text-sm text-gray-600 dark:text-gray-300"},_s={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},$s=["onClick"],Cs={class:"flex items-start justify-between gap-3"},js={class:"text-base font-semibold text-gray-900 dark:text-white leading-snug"},Vs={class:"mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-1.5"},Us={class:"space-y-4"},Ms={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ss={class:"mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300"},Is={class:"flex justify-between"},Ts={class:"font-medium"},Fs={class:"flex justify-between"},zs={class:"font-medium"},Ds={class:"flex justify-between"},qs={class:"font-medium"},Bs={class:"flex justify-between"},Es={class:"font-medium"},Ns={class:"flex justify-between"},Hs={class:"font-medium"},Ls={class:"flex justify-between"},Os={key:0,class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Ws={key:0,class:"space-y-4"},As={class:"rounded-2xl border bg-white dark:bg-gray-800 p-5"},Rs={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Ps={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Qs={class:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6"},Gs={class:"flex items-center justify-between"},Js={key:0,class:"mt-3 text-sm text-rose-600"},Ks=["value"],Xs=["value"],Ys={class:"grid grid-cols-2 gap-4"},Zs={class:"flex justify-end gap-2"},ea=["disabled"],ta={key:0},sa={key:1},aa={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},la={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6"},oa={class:"mb-3"},da={class:"mb-3"},ra={class:"mb-3"},ia={class:"flex justify-end gap-2 mt-4"},na={key:2,class:"fixed inset-0 flex items-center justify-center bg-black/50"},ua={class:"bg-white p-4 rounded w-96"},pa=["value"],va={class:"flex justify-end gap-2 mt-4"},ga={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ma={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},ca=["value"],xa={class:"mt-4 flex justify-end gap-2"},ba={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ya={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md"},fa=["value"],ka={class:"mt-4 flex justify-end gap-2"},Ca={__name:"Show",setup(C){var X;const{props:U}=at(),c=U.id,p=(X=U.auth)==null?void 0:X.user,_=g(!0),s=g(null),j=g(!1),M=g(""),f=g(null),x=d=>{f.value=d.target.files},i=g(!1),u=g([]),k=g({title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""}),q=g(!1),S=g({title:"",start_date:"",due_date:""}),qe=I(()=>{var d;return!s.value||!p?!1:(s.value.responsibles||[]).some(t=>t.id===p.id)||(((d=s.value.project)==null?void 0:d.managers)||[]).some(t=>t.id===p.id)}),P=d=>d==="high"?"bg-rose-100 text-rose-700 ring-1 ring-rose-200":d==="medium"?"bg-amber-100 text-amber-700 ring-1 ring-amber-200":"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",Q=d=>d==="high"?"–í—ã—Å–æ–∫–∞—è":d==="medium"?"–°—Ä–µ–¥–Ω—è—è":"–û–±—ã—á–Ω–∞—è",z=async()=>{_.value=!0;try{const{data:d}=await m.get(`/api/tasks/${c}`,{withCredentials:!0});s.value=d,S.value={title:d.title||"",start_date:d.start_date||"",due_date:d.due_date||""}}finally{_.value=!1}},Be=async()=>{var d,t;try{const{data:r}=await m.put(`/api/tasks/${c}`,S.value,{withCredentials:!0});s.value=r.task,q.value=!1}catch(r){alert(((t=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:t.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},Ee=async d=>{try{const{data:t}=await m.patch(`/api/tasks/${c}/progress`,{progress:d},{withCredentials:!0});s.value.progress=t.progress}catch{alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.")}},Ne=async()=>{var t;if(!((t=f.value)!=null&&t.length))return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã");const d=new FormData;for(let r=0;r<f.value.length;r++)d.append("files[]",f.value[r]);try{await m.post(`/api/tasks/${c}/files`,d,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),f.value=null,await z()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤")}},He=async()=>{const{data:d}=await m.get(`/api/projects/${s.value.project.id}/employees`,{withCredentials:!0});u.value=d,i.value=!0},Le=async()=>{var d,t;j.value=!0,M.value="";try{await m.post(`/api/tasks/${c}/subtasks`,{...k.value,task_id:c},{withCredentials:!0}),i.value=!1,k.value={title:"",executor_id:"",responsible_id:"",start_date:new Date().toISOString().slice(0,10),due_date:""},await z()}catch(r){M.value=((t=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:t.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∑–∞–¥–∞—á–∏"}finally{j.value=!1}},G=I(()=>{var d;return(((d=s.value)==null?void 0:d.subtasks)||[]).some(t=>!t.completed)}),Oe=I(()=>{var d,t;return((d=s.value)==null?void 0:d.progress)===100&&!((t=s.value)!=null&&t.completed)&&!G.value}),We=async()=>{var d,t;try{const{data:r}=await m.patch(`/api/tasks/${c}/complete`,{},{withCredentials:!0});s.value=r.task}catch(r){const w=((t=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:t.message)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É";alert(w)}},Ae=I(()=>{var t,r;const d=(r=(t=U.auth)==null?void 0:t.user)==null?void 0:r.id;return!d||!s.value?!1:(s.value.executors||[]).some(w=>w.id===d)||(s.value.responsibles||[]).some(w=>w.id===d)}),Re=I(()=>{var d,t;return!s.value||!p?!1:(s.value.executors||[]).some(r=>r.id===p.id)||(s.value.responsibles||[]).some(r=>r.id===p.id)||p.id===((t=(d=s.value.project)==null?void 0:d.company)==null?void 0:t.user_id)}),Pe=I(()=>{var d,t,r;return!s.value||!p?!1:p.id===((t=(d=s.value.project)==null?void 0:d.company)==null?void 0:t.user_id)||(((r=s.value.project)==null?void 0:r.managers)||[]).some(w=>w.id===p.id)}),J=I(()=>{var d,t,r;return!s.value||!p?!1:p.id===((t=(d=s.value.project)==null?void 0:d.company)==null?void 0:t.user_id)||(((r=s.value.project)==null?void 0:r.managers)||[]).some(w=>w.id===p.id)}),Qe=async()=>{var d,t;if(confirm("–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Ñ–∞–π–ª—ã?"))try{await m.delete(`/api/tasks/${c}`,{withCredentials:!0}),alert("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞."),window.history.back()}catch(r){alert(((t=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:t.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏")}},B=g(!1),E=g(null),Ge=async()=>{const{data:d}=await m.get(`/api/projects/${s.value.project.id}/employees`,{withCredentials:!0});u.value=d,B.value=!0},Je=async()=>{var d,t;if(E.value)try{const{data:r}=await m.post(`/api/tasks/${c}/watchers`,{user_id:E.value},{withCredentials:!0});s.value.watchers=r.watchers,B.value=!1}catch(r){alert(((t=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:t.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è")}},N=g(!1),H=g(!1),V=g(null),Ke=I(()=>{var d,t,r;return!s.value||!p?!1:p.id===((t=(d=s.value.project)==null?void 0:d.company)==null?void 0:t.user_id)||(((r=s.value.project)==null?void 0:r.managers)||[]).some(w=>w.id===p.id)}),K=async()=>{const{data:d}=await m.get(`/api/projects/${s.value.project.id}/employees`);u.value=d},Xe=async()=>{await K(),V.value=null,N.value=!0},Ye=async()=>{await K(),V.value=null,H.value=!0},Ze=async()=>{if(!V.value)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞");await m.patch(`/api/tasks/${c}/executor`,{user_id:V.value}),await z(),N.value=!1},et=async()=>{if(!V.value)return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞");await m.patch(`/api/tasks/${c}/responsible`,{user_id:V.value}),await z(),H.value=!1};return R(z),(d,t)=>{var w;const r=lt("Head");return l(),o(b,null,[O(r,{title:(w=s.value)!=null&&w.title?`–ó–∞–¥–∞—á–∞ ‚Äî ${s.value.title}`:"–ó–∞–¥–∞—á–∞"},null,8,["title"]),O(rt,null,{default:ot(()=>{var Y,Z,ee,te,se,ae,le,oe,de,re,ie,ne,ue,pe,ve,ge,me,ce,xe,be,ye,fe,ke,we,he,_e,$e,Ce,je,Ve,Ue,Me,Se,Ie,Te,Fe,ze;return[e("div",Dt,[t[26]||(t[26]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600 opacity-90"},null,-1)),e("div",qt,[e("div",Bt,[e("div",null,[e("h1",Et,n(((Y=s.value)==null?void 0:Y.title)??"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"),1),e("div",Nt,[e("span",Ht,[t[19]||(t[19]=$(" –ü—Ä–æ–µ–∫—Ç: ",-1)),e("b",null,n(((ee=(Z=s.value)==null?void 0:Z.project)==null?void 0:ee.name)??"‚Äî"),1)]),e("span",Lt,[t[20]||(t[20]=$(" –ö–æ–º–ø–∞–Ω–∏—è: ",-1)),e("b",null,n(((ae=(se=(te=s.value)==null?void 0:te.project)==null?void 0:se.company)==null?void 0:ae.name)??"‚Äî"),1)]),e("span",Ot,[t[21]||(t[21]=$(" –û—Ç: ",-1)),e("b",null,n(((oe=(le=s.value)==null?void 0:le.creator)==null?void 0:oe.name)??"‚Äî"),1)]),e("span",Wt,[t[22]||(t[22]=$(" –ö–æ–º—É: ",-1)),e("b",null,n((re=(de=s.value)==null?void 0:de.executors)!=null&&re.length?s.value.executors.map(a=>a.name).join(", "):"‚Äî"),1)]),e("span",At,[t[23]||(t[23]=$(" –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: ",-1)),e("b",null,n((ne=(ie=s.value)==null?void 0:ie.responsibles)!=null&&ne.length?s.value.responsibles.map(a=>a.name).join(", "):"‚Äî"),1)]),s.value&&s.value.watchers?(l(),o("span",Rt,[t[24]||(t[24]=$(" –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏: ",-1)),e("b",null,n(s.value.watchers.map(a=>a.name).join(", ")||"‚Äî"),1)])):v("",!0),s.value?(l(),o("span",{key:1,class:W(["px-2 py-1 rounded-full ring-1 bg-white text-gray-900",P(s.value.priority)])},[t[25]||(t[25]=$(" –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ",-1)),e("b",null,n(Q(s.value.priority)),1)],2)):v("",!0)])]),e("div",Pt,[e("div",Qt,[J.value?(l(),o("button",{key:0,onClick:t[0]||(t[0]=a=>q.value=!0),class:"flex items-center gap-1 rounded-xl bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 font-medium shadow-sm transition"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å ")):v("",!0),Pe.value?(l(),o("button",{key:1,onClick:Qe,class:"flex items-center gap-1 rounded-xl bg-rose-500/90 hover:bg-rose-600 text-white px-4 py-2 font-medium shadow-sm transition"}," üóë –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É ")):v("",!0),(pe=(ue=s.value)==null?void 0:ue.project)!=null&&pe.id?(l(),o("a",{key:2,href:`/projects/${s.value.project.id}`,class:"flex items-center gap-1 rounded-xl bg-white hover:bg-gray-100 text-gray-900 px-4 py-2 font-medium shadow-sm transition"}," üîô –ö –ø—Ä–æ–µ–∫—Ç—É ",8,Gt)):v("",!0)]),Ke.value?(l(),o("div",Jt,[e("button",{onClick:Xe,class:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md transition"}," üë∑ –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è "),e("button",{onClick:Ye,class:"px-3 py-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-sm rounded-md transition"}," üë®‚Äçüíº –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "),J.value?(l(),o("button",{key:0,onClick:Ge,class:"px-3 py-1.5 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-md transition"}," üëÅ –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è ")):v("",!0)])):v("",!0),Ae.value?(l(),o("div",Kt,[Oe.value?(l(),o("button",{key:0,onClick:We,class:"px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-medium shadow-sm transition"}," ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É ")):((ve=s.value)==null?void 0:ve.progress)===100&&!((ge=s.value)!=null&&ge.completed)?(l(),o("div",Xt,[G.value?(l(),o("span",Yt," –ï—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É. ")):v("",!0)])):v("",!0),(me=s.value)!=null&&me.completed?(l(),o("div",Zt," –ó–∞–≤–µ—Ä—à–µ–Ω–∞ "+n(((ce=s.value)==null?void 0:ce.completed_at)||""),1)):v("",!0)])):v("",!0)])])])]),e("div",es,[e("div",ts,[e("div",ss,[e("div",as,[e("div",ls,[e("div",null,[t[27]||(t[27]=e("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),e("div",os,n(((xe=s.value)==null?void 0:xe.start_date)??"‚Äî"),1)]),e("div",null,[t[28]||(t[28]=e("div",{class:"text-xs text-gray-500"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),e("div",ds,n(((be=s.value)==null?void 0:be.due_date)??"‚Äî"),1)]),e("div",null,[t[29]||(t[29]=e("div",{class:"text-xs text-gray-500"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),e("div",rs,[e("div",is,[e("div",{class:"h-2 bg-emerald-500",style:dt({width:(((ye=s.value)==null?void 0:ye.progress)||0)+"%"})},null,4)]),e("div",ns,"–í—ã–ø–æ–ª–Ω–µ–Ω–æ "+n(((fe=s.value)==null?void 0:fe.progress)??0)+"%",1)]),e("div",us,[(l(),o(b,null,h(11,a=>{var D;return e("button",{key:a,onClick:A=>Ee((a-1)*10),class:W(["flex-1 h-5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300",{"!bg-emerald-500":(((D=s.value)==null?void 0:D.progress)||0)>=(a-1)*10}]),title:`${(a-1)*10}%`},null,10,ps)}),64))])])])]),e("div",vs,[Re.value?(l(),o("div",gs,[e("input",{type:"file",multiple:"",onChange:x,accept:".pdf,.doc,.docx,.xls,.xlsx",class:"text-sm text-gray-600 dark:text-gray-300"},null,32),e("button",{onClick:Ne,class:"rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 mt-4"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å ")])):v("",!0),_.value?(l(),o("div",ms,[(l(),o(b,null,h(4,a=>e("div",{key:a,class:"h-8 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"})),64))])):(l(),o("div",cs,[(we=(ke=s.value)==null?void 0:ke.files)!=null&&we.length?(l(),o("div",bs,[(l(!0),o(b,null,h(s.value.files,a=>(l(),o("a",{key:a.id,href:`/api/tasks/files/${a.id}`,class:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100"},[t[30]||(t[30]=e("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12V8l-4-6zM6 22V4h7v5h5v13H6z"})],-1)),$(" "+n(a.file_path.split("/").pop()),1)],8,ys))),128))])):(l(),o("div",xs," –§–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã. "))]))]),e("div",fs,[e("div",ks,[t[31]||(t[31]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ü–æ–¥–∑–∞–¥–∞—á–∏",-1)),qe.value?(l(),o("button",{key:0,onClick:He,class:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700"}," + –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):v("",!0)]),_.value?(l(),o("div",ws,[(l(),o(b,null,h(4,a=>e("div",{key:a,class:"rounded-xl border p-4 animate-pulse"},t[32]||(t[32]=[e("div",{class:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-3"},null,-1),e("div",{class:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),e("div",{class:"h-3 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)]))),64))])):(_e=(he=s.value)==null?void 0:he.subtasks)!=null&&_e.length?(l(),o("div",_s,[(l(!0),o(b,null,h(s.value.subtasks,a=>{var D,A;return l(),o("div",{key:a.id,class:"group rounded-xl border p-4 bg-white dark:bg-gray-800 hover:shadow-md transition cursor-pointer",onClick:L=>d.$inertia.visit(`/subtasks/${a.id}`)},[e("div",Cs,[e("h3",js,n(a.title),1)]),e("div",Vs,[e("div",null,[t[33]||(t[33]=$(" –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: ",-1)),e("b",null,n(((D=a.executors)==null?void 0:D.map(L=>L.name).join(", "))||"‚Äî"),1)]),e("div",null,[t[34]||(t[34]=$(" –û—Ç–≤–µ—Ç—Å–≤–µ–Ω–Ω—ã–π: ",-1)),e("b",null,n(((A=a.responsibles)==null?void 0:A.map(L=>L.name).join(", "))||"‚Äî"),1)]),e("div",null,"–°—Ä–æ–∫–∏: "+n(a.start_date)+" ‚Äî "+n(a.due_date),1)])],8,$s)}),128))])):(l(),o("div",hs," –ü–æ–¥–∑–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. "))])]),e("div",Us,[e("div",Ms,[t[41]||(t[41]=e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ö—Ä–∞—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ",-1)),e("dl",Ss,[e("div",Is,[t[35]||(t[35]=e("dt",null,"–ê–≤—Ç–æ—Ä",-1)),e("dd",Ts,n(((Ce=($e=s.value)==null?void 0:$e.creator)==null?void 0:Ce.name)??"‚Äî"),1)]),e("div",Fs,[t[36]||(t[36]=e("dt",null,"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),e("dd",zs,n((Ve=(je=s.value)==null?void 0:je.executors)!=null&&Ve.length?s.value.executors.map(a=>a.name).join(", "):"‚Äî"),1)]),e("div",Ds,[t[37]||(t[37]=e("dt",null,"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),e("dd",qs,n((Me=(Ue=s.value)==null?void 0:Ue.responsibles)!=null&&Me.length?s.value.responsibles.map(a=>a.name).join(", "):"‚Äî"),1)]),e("div",Bs,[t[38]||(t[38]=e("dt",null,"–ü—Ä–æ–µ–∫—Ç",-1)),e("dd",Es,n(((Ie=(Se=s.value)==null?void 0:Se.project)==null?void 0:Ie.name)??"‚Äî"),1)]),e("div",Ns,[t[39]||(t[39]=e("dt",null,"–ö–æ–º–ø–∞–Ω–∏—è",-1)),e("dd",Hs,n(((ze=(Fe=(Te=s.value)==null?void 0:Te.project)==null?void 0:Fe.company)==null?void 0:ze.name)??"‚Äî"),1)]),e("div",Ls,[t[40]||(t[40]=e("dt",null,"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),e("dd",null,[s.value?(l(),o("span",{key:0,class:W(["px-2 py-1 text-xs rounded-full ring-1",P(s.value.priority)])},n(Q(s.value.priority)),3)):v("",!0)])])])]),s.value?(l(),o("div",Os,[O(zt,{"task-id":s.value.id,executors:s.value.executors,responsibles:s.value.responsibles,creator:s.value.creator},null,8,["task-id","executors","responsibles","creator"])])):v("",!0)]),s.value?(l(),o("div",Ws,[e("div",As,[t[42]||(t[42]=e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"–ß–∞—Ç",-1)),O(wt,{"task-id":s.value.id,"can-chat":!0},null,8,["task-id"])])])):(l(),o("div",Rs,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"))])]),i.value?(l(),o("div",Ps,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[1]||(t[1]=a=>i.value=!1)}),e("div",Qs,[e("div",Gs,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"–ù–æ–≤–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞",-1)),e("button",{onClick:t[2]||(t[2]=a=>i.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},"‚úï")]),M.value?(l(),o("p",Js,n(M.value),1)):v("",!0),e("form",{class:"mt-4 space-y-4",onSubmit:De(Le,["prevent"])},[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>k.value.title=a),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[T,k.value.title]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>k.value.executor_id=a),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[t[45]||(t[45]=e("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(b,null,h(u.value,a=>(l(),o("option",{key:a.id,value:a.id},n(a.name),9,Ks))),128))],512),[[F,k.value.executor_id]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π",-1)),y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>k.value.responsible_id=a),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},[t[47]||(t[47]=e("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(b,null,h(u.value,a=>(l(),o("option",{key:a.id,value:a.id},n(a.name),9,Xs))),128))],512),[[F,k.value.responsible_id]])]),e("div",Ys,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–ù–∞—á–∞–ª–æ",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=a=>k.value.start_date=a),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[T,k.value.start_date]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm mb-1 text-gray-700 dark:text-gray-300"},"–û–∫–æ–Ω—á–∞–Ω–∏–µ",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=a=>k.value.due_date=a),class:"w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-700 dark:text-white",required:""},null,512),[[T,k.value.due_date]])])]),e("div",Zs,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>i.value=!1),class:"px-4 py-2 rounded-xl border bg-white dark:bg-gray-700 dark:text-white"},"–û—Ç–º–µ–Ω–∞"),e("button",{type:"submit",disabled:j.value,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60"},[j.value?(l(),o("span",sa,"–°–æ—Ö—Ä–∞–Ω—è—é‚Ä¶")):(l(),o("span",ta,"–°–æ–∑–¥–∞—Ç—å"))],8,ea)])],32)])])):v("",!0),q.value?(l(),o("div",aa,[e("div",la,[t[55]||(t[55]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É",-1)),e("form",{onSubmit:De(Be,["prevent"])},[e("div",oa,[t[51]||(t[51]=e("label",{class:"block text-sm text-gray-700 dark:text-gray-300"},"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),y(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>S.value.title=a),type:"text",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[T,S.value.title]])]),e("div",da,[t[52]||(t[52]=e("label",{class:"block text-sm"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),y(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>S.value.start_date=a),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[T,S.value.start_date]])]),e("div",ra,[t[53]||(t[53]=e("label",{class:"block text-sm"},"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è",-1)),y(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>S.value.due_date=a),type:"date",class:"w-full border rounded px-3 py-2 dark:bg-gray-700 dark:text-white"},null,512),[[T,S.value.due_date]])]),e("div",ia,[e("button",{type:"button",onClick:t[12]||(t[12]=a=>q.value=!1),class:"px-4 py-2 border rounded"},"–û—Ç–º–µ–Ω–∞"),t[54]||(t[54]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):v("",!0),B.value?(l(),o("div",na,[e("div",ua,[t[56]||(t[56]=e("h3",{class:"font-semibold mb-3"},"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è",-1)),y(e("select",{"onUpdate:modelValue":t[13]||(t[13]=a=>E.value=a),class:"w-full border p-2 rounded"},[(l(!0),o(b,null,h(u.value,a=>(l(),o("option",{key:a.id,value:a.id},n(a.name),9,pa))),128))],512),[[F,E.value]]),e("div",va,[e("button",{onClick:t[14]||(t[14]=a=>B.value=!1),class:"px-3 py-1 border rounded"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:Je,class:"px-3 py-1 bg-blue-600 text-white rounded"},"–î–æ–±–∞–≤–∏—Ç—å")])])])):v("",!0),N.value?(l(),o("div",ga,[e("div",ma,[t[58]||(t[58]=e("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",-1)),y(e("select",{"onUpdate:modelValue":t[15]||(t[15]=a=>V.value=a),class:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-700 dark:text-white"},[t[57]||(t[57]=e("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(b,null,h(u.value,a=>(l(),o("option",{key:a.id,value:a.id},n(a.name),9,ca))),128))],512),[[F,V.value]]),e("div",xa,[e("button",{onClick:t[16]||(t[16]=a=>N.value=!1),class:"px-3 py-1.5 text-sm rounded-md bg-gray-200 dark:bg-gray-700 dark:text-gray-300"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:Ze,class:"px-3 py-1.5 text-sm rounded-md bg-blue-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):v("",!0),H.value?(l(),o("div",ba,[e("div",ya,[t[60]||(t[60]=e("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"},"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",-1)),y(e("select",{"onUpdate:modelValue":t[17]||(t[17]=a=>V.value=a),class:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-700 dark:text-white"},[t[59]||(t[59]=e("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(l(!0),o(b,null,h(u.value,a=>(l(),o("option",{key:a.id,value:a.id},n(a.name),9,fa))),128))],512),[[F,V.value]]),e("div",ka,[e("button",{onClick:t[18]||(t[18]=a=>H.value=!1),class:"px-3 py-1.5 text-sm rounded-md bg-gray-200 dark:bg-gray-700 dark:text-gray-300"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:et,class:"px-3 py-1.5 text-sm rounded-md bg-indigo-600 text-white"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])])):v("",!0)]}),_:1})],64)}}};export{Ca as default};
