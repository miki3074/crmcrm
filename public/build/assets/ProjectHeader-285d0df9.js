import{h as j,o as r,a as d,b as t,t as s,f as i,F as m,d as x,g as p,m as D,M as H,O as V,L as B}from"./app-c38d94e2.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const L={class:"project-header"},$={class:"project-title-block"},z={class:"project-name"},E={class:"company-link"},P={class:"project-status-badge"},S={class:"status"},F={class:"key-metrics"},I={key:0,class:"metric-card"},T={class:"people-group"},U={class:"person-avatar"},O={class:"person-info"},R={key:1,class:"metric-card"},q={class:"people-group"},A={class:"person-avatar"},G={class:"person-info"},J={class:"metric-card"},K={style:{display:"flex",gap:"10px","align-items":"center","margin-bottom":"15px"}},Q={class:"status-chip warning"},W={class:"date-info"},X={class:"date-row"},Y={class:"date-value"},Z={class:"date-row"},tt={class:"date-value"},et={class:"space-y-10 animate-fade-in text-slate-900 dark:text-slate-100 font-sans"},st={key:0},at={class:"text-lg font-bold text-slate-900 dark:text-white mb-5 flex items-center gap-2"},lt={class:"bg-slate-100 dark:bg-slate-800 text-slate-500 text-xs px-2 py-1 rounded-full"},ot={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-5"},rt=["onClick"],dt={class:"font-bold text-slate-900 dark:text-white truncate pr-2"},it={class:"text-sm text-slate-500 mt-1 truncate"},nt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ct={class:"relative w-full max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden"},ut={class:"px-6 py-6 border-b border-slate-100 dark:border-slate-800 flex items-center gap-4"},vt={class:"text-lg font-bold text-slate-900 dark:text-white leading-tight"},pt={class:"text-sm text-slate-500"},mt={class:"p-6 space-y-5"},gt={class:"grid grid-cols-1 gap-4"},bt={class:"p-3 rounded-lg border border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/30"},xt={class:"text-sm font-medium text-slate-800 dark:text-slate-200 select-all"},ht={class:"p-3 rounded-lg border border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/30"},ft={class:"text-sm font-medium text-slate-800 dark:text-slate-200 select-all"},kt={key:0},_t={class:"mt-2 text-sm text-slate-600 dark:text-slate-400 leading-relaxed p-3 bg-white dark:bg-slate-950 border border-slate-100 dark:border-slate-800 rounded-lg"},wt={class:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-800"},yt={__name:"ProjectHeader",props:["project"],setup(l){const c=j(!1),n=j(null),h=(o,e)=>{if(!o||!e)return null;const u=new Date(o),v=new Date(u);return v.setDate(u.getDate()+Number(e)),Math.ceil((v-new Date)/(1e3*60*60*24))},C=o=>o?new Date(o).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}):"—",f=o=>(o==null?void 0:o.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase())||"?",M=o=>{n.value=o,c.value=!0};return(o,e)=>{var u,v,g;return r(),d(m,null,[t("div",L,[t("div",$,[e[4]||(e[4]=t("div",{class:"project-icon-large"},[t("i",{class:"fas fa-cloud"})],-1)),t("div",z,[t("h1",null,s(l.project.name),1),t("div",E,[e[3]||(e[3]=t("i",{class:"fas fa-building"},null,-1)),i(" "+s(l.project.company.name)+" · Инициатор: Дмитрий Ильин ",1)])])]),t("div",P,[e[6]||(e[6]=t("div",{class:"status"},[t("i",{class:"fas fa-play-circle",style:{color:"#4ade80"}}),i(" В работе")],-1)),t("div",S,[e[5]||(e[5]=t("i",{class:"far fa-calendar-alt"},null,-1)),i(" Дедлайн: "+s(h(l.project.start_date,l.project.duration_days))+" дн.",1)])])]),t("div",F,[(u=l.project.managers)!=null&&u.length?(r(),d("div",I,[e[8]||(e[8]=t("div",{class:"metric-title"},[t("i",{class:"fas fa-user-tie"}),i(" Руководители")],-1)),t("div",T,[(r(!0),d(m,null,x(l.project.managers,a=>(r(),d("div",{class:"person-row",key:a.id},[t("div",U,s(f(a.name)),1),t("div",O,[t("h4",null,s(a.name),1),e[7]||(e[7]=t("p",null,"кто в компании",-1))])]))),128))])])):p("",!0),(v=l.project.executors)!=null&&v.length?(r(),d("div",R,[e[10]||(e[10]=t("div",{class:"metric-title"},[t("i",{class:"fas fa-users"}),i(" Исполнители (6)")],-1)),t("div",q,[(r(!0),d(m,null,x(l.project.executors,a=>(r(),d("div",{class:"person-row",key:a.id},[t("div",A,s(f(a.name)),1),t("div",G,[t("h4",null,s(a.name),1),e[9]||(e[9]=t("p",null,"кто в комапнии",-1))])]))),128))])])):p("",!0),t("div",J,[e[15]||(e[15]=t("div",{class:"metric-title"},[t("i",{class:"fas fa-calendar-check"}),i(" Статус и сроки")],-1)),t("div",K,[e[12]||(e[12]=t("span",{class:"status-chip"},[t("i",{class:"fas fa-play"}),i(" Активный")],-1)),t("span",Q,[e[11]||(e[11]=t("i",{class:"fas fa-clock"},null,-1)),i(" "+s(h(l.project.start_date,l.project.duration_days))+" дней до конца",1)])]),t("div",W,[t("div",X,[e[13]||(e[13]=t("span",{class:"date-label"},"Начало:",-1)),t("span",Y,s(C(l.project.start_date)),1)]),t("div",Z,[e[14]||(e[14]=t("span",{class:"date-label"},"Длительность:",-1)),t("span",tt,s(l.project.duration_days??"—")+" дней",1)])])])]),t("div",et,[(g=l.project.clients)!=null&&g.length?(r(),d("div",st,[t("h3",at,[e[16]||(e[16]=i(" Контрагенты ",-1)),t("span",lt,s(l.project.clients.length),1)]),t("div",ot,[(r(!0),d(m,null,x(l.project.clients,a=>(r(),d("div",{key:a.id,onClick:b=>M(a),class:"group cursor-pointer bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 hover:border-indigo-500 dark:hover:border-indigo-500 transition-all duration-300"},[e[17]||(e[17]=B('<div class="flex items-center justify-between mb-4" data-v-04786d49><div class="p-2.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-colors" data-v-04786d49><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04786d49><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-04786d49></path></svg></div><svg class="w-4 h-4 text-slate-300 group-hover:text-indigo-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04786d49><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" data-v-04786d49></path></svg></div>',1)),t("h4",dt,s(a.organization_name||a.name),1),t("p",it,s(a.email||"Email скрыт"),1)],8,rt))),128))])])):p("",!0),D(V,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:H(()=>{var a,b,k,_,w;return[c.value?(r(),d("div",nt,[t("div",{class:"absolute inset-0 bg-slate-900/20 dark:bg-black/50 backdrop-blur-sm",onClick:e[0]||(e[0]=y=>c.value=!1)}),t("div",ct,[t("div",ut,[e[18]||(e[18]=t("div",{class:"w-12 h-12 rounded-xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-300"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[t("h2",vt,s((a=n.value)==null?void 0:a.name),1),t("p",pt,s((b=n.value)==null?void 0:b.organization_name),1)]),t("button",{class:"ml-auto text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition",onClick:e[1]||(e[1]=y=>c.value=!1)},"✕")]),t("div",mt,[t("div",gt,[t("div",bt,[e[19]||(e[19]=t("span",{class:"text-xs font-bold text-slate-400 uppercase tracking-wide block mb-1"},"Email",-1)),t("span",xt,s(((k=n.value)==null?void 0:k.email)||"—"),1)]),t("div",ht,[e[20]||(e[20]=t("span",{class:"text-xs font-bold text-slate-400 uppercase tracking-wide block mb-1"},"Телефон",-1)),t("span",ft,s(((_=n.value)==null?void 0:_.phone)||"—"),1)])]),(w=n.value)!=null&&w.notes?(r(),d("div",kt,[e[21]||(e[21]=t("span",{class:"text-xs font-bold text-slate-400 uppercase tracking-wide"},"Заметки",-1)),t("p",_t,s(n.value.notes),1)])):p("",!0)]),t("div",wt,[t("button",{onClick:e[2]||(e[2]=y=>c.value=!1),class:"w-full py-2.5 rounded-lg bg-slate-900 hover:bg-slate-800 dark:bg-white dark:hover:bg-slate-100 text-white dark:text-slate-900 font-semibold text-sm transition shadow-sm"}," Закрыть ")])])])):p("",!0)]}),_:1})])],64)}}},Mt=N(yt,[["__scopeId","data-v-04786d49"]]);export{Mt as default};
