import{Q as F,j,r as n,x as N,o as a,c as m,k as t,u as d,J as D,F as K,f as M,Z as z,a as s,N as g,G as p,d as r,E as B,b as I,t as V,K as A}from"./app-f9f3ca95.js";import{_ as G}from"./AuthenticatedLayout-1eb45781.js";import c from"./StatCard-d462e782.js";import J from"./TelegramBinding-9ab8872c.js";import O from"./CompanySection-a4114b78.js";import P from"./ProjectsSummary-32d45e46.js";import y from"./TasksSummary-da4626e2.js";import Q from"./SubtasksSection-ea0ea124.js";import W from"./SearchOverlay-4a0e33cc.js";import Z from"./CreateCompanyModal-4c7018a6.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-0b930598.js";const H={class:"mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10"},L={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},U={class:"space-y-12"},X={class:"grid grid-cols-1 lg:grid-cols-[7fr_3fr] gap-8 items-start"},Y={class:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden"},ee={class:"flex items-center border-b border-slate-100 dark:border-slate-800"},se={key:0,class:"ml-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 px-2 py-0.5 rounded-full text-xs"},te={key:1,class:"absolute bottom-0 left-0 w-full h-[2px] bg-indigo-600 dark:bg-indigo-400"},ae={key:0,class:"ml-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full text-xs"},oe={key:1,class:"absolute bottom-0 left-0 w-full h-[2px] bg-indigo-600 dark:bg-indigo-400"},le={class:"p-6 min-h-[300px]"},re={key:"tasks"},ie={key:"subtasks"},ne={class:"h-full"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={__name:"Dashboard",setup(me){var $,w;const{props:v}=F(),k=j(()=>{var i,e;return(e=(i=v.auth)==null?void 0:i.roles)==null?void 0:e.includes("admin")}),R=(w=($=v.auth)==null?void 0:$.user)==null?void 0:w.id,b=n([]),o=n({managing_projects:[],all_tasks:[],all_subtasks:[],due_today:[],overdue:[]}),h=n(!0);n("");const _=n(!1),f=n(!1),x=async()=>{h.value=!0;try{const[i,e]=await Promise.all([M.get("/api/companies"),M.get("/api/dashboard/summary")]);b.value=i.data,o.value=e.data}catch(i){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…",i)}finally{h.value=!1}},u=n("tasks");j(()=>v.summary.managing_projects&&v.summary.managing_projects.length>0),N(x);const T=()=>{_.value=!0},E=n(!1);return N(()=>{sessionStorage.getItem("welcome_modal_shown")||(E.value=!0,sessionStorage.setItem("welcome_modal_shown","true"))}),(i,e)=>(a(),m(K,null,[t(d(z),{title:"Ð Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÑ‚Ð¾Ð»"}),t(G,null,{default:D(()=>{var C,S;return[s("div",H,[t(J,{user:d(v).auth.user},null,8,["user"]),s("div",L,[t(c,{title:"ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ",icon:"ðŸ“…",color:"purple",onClick:e[0]||(e[0]=l=>d(g).visit("/calendar"))}),t(c,{title:"Ð¥Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ",icon:"ðŸ“‚",color:"blue",onClick:e[1]||(e[1]=l=>d(g).visit("/file-storage"))}),k.value?(a(),p(c,{key:0,title:"Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸",icon:"ðŸ‘¥",color:"indigo",onClick:e[2]||(e[2]=l=>d(g).visit("/employees"))})):r("",!0),k.value?(a(),p(c,{key:1,title:"ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹",icon:"ðŸ¤",color:"orange",onClick:e[3]||(e[3]=l=>d(g).visit("/clients"))})):r("",!0),t(c,{title:"Ð¡Ñ…ÐµÐ¼Ð°",icon:"ðŸ—ºï¸",color:"emerald",onClick:e[4]||(e[4]=l=>d(g).visit("/mapdiagram"))}),k.value?(a(),p(c,{key:2,title:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",icon:"âž•",color:"rose",onClick:e[5]||(e[5]=l=>f.value=!0)})):r("",!0)]),s("div",{class:"relative group"},[s("div",{onClick:T,class:"w-full flex items-center gap-3 px-5 py-4 bg-white/50 dark:bg-slate-900/50 backdrop-blur-xl border border-slate-200 dark:border-slate-800 rounded-2xl cursor-text hover:border-slate-300 dark:hover:border-slate-700 transition-all shadow-sm"},e[10]||(e[10]=[s("span",{class:"text-slate-400 text-xl"},"ðŸ”",-1),s("span",{class:"text-slate-400 flex-1"},"ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑÐ¼, Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ð¼ Ð¸Ð»Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð°Ð¼...",-1),s("kbd",{class:"hidden sm:inline-block px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs text-slate-500 border border-slate-200 dark:border-slate-700"},"âŒ˜K",-1)]))]),s("div",U,[t(O,{companies:b.value,"user-id":d(R),"is-admin":k.value,onRefresh:x},null,8,["companies","user-id","is-admin"]),s("div",X,[s("div",Y,[s("div",ee,[s("button",{onClick:e[6]||(e[6]=l=>u.value="tasks"),class:B(["flex-1 py-4 text-sm font-bold transition-all relative outline-none",u.value==="tasks"?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50"])},[e[11]||(e[11]=I(" âœ… ÐœÐ¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸ ",-1)),(C=o.value.all_tasks)!=null&&C.length?(a(),m("span",se,V(o.value.all_tasks.length),1)):r("",!0),u.value==="tasks"?(a(),m("div",te)):r("",!0)],2),e[13]||(e[13]=s("div",{class:"w-[1px] h-6 bg-slate-200 dark:bg-slate-700"},null,-1)),s("button",{onClick:e[7]||(e[7]=l=>u.value="subtasks"),class:B(["flex-1 py-4 text-sm font-bold transition-all relative outline-none",u.value==="subtasks"?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50"])},[e[12]||(e[12]=I(" ðŸ“‹ ÐŸÐ¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸ ",-1)),(S=o.value.all_subtasks)!=null&&S.length?(a(),m("span",ae,V(o.value.all_subtasks.length),1)):r("",!0),u.value==="subtasks"?(a(),m("div",oe)):r("",!0)],2)]),s("div",le,[t(A,{name:"fade",mode:"out-in"},{default:D(()=>[u.value==="tasks"?(a(),m("div",re,[t(y,{tasks:o.value.all_tasks},null,8,["tasks"])])):(a(),m("div",ie,[t(Q,{subtasks:o.value.all_subtasks},null,8,["subtasks"])]))]),_:1})])]),s("div",ne,[t(P,{projects:o.value.managing_projects},null,8,["projects"])])]),s("div",de,[t(y,{tasks:o.value.due_today,title:"ðŸ”” Ð¡Ñ€Ð¾ÐºÐ¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ",compact:""},null,8,["tasks"]),t(y,{tasks:o.value.overdue,title:"âš ï¸ ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾",compact:"",variant:"danger"},null,8,["tasks"])])])]),_.value?(a(),p(W,{key:0,onClose:e[8]||(e[8]=l=>_.value=!1),companies:b.value,summary:o.value},null,8,["companies","summary"])):r("",!0),f.value?(a(),p(Z,{key:1,onClose:e[9]||(e[9]=l=>f.value=!1),onCreated:x})):r("",!0)]}),_:1})],64))}},we=q(ue,[["__scopeId","data-v-f120139a"]]);export{we as default};
