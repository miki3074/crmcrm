import{r as c,w,x as S,o as a,c as o,k as m,u as j,J as y,F as i,f as C,Z as D,a as e,E as b,d as u,h as $,L as V,e as x,t as d,M as N,b as h}from"./app-0c17e5ad.js";import{_ as T}from"./AuthenticatedLayout-e4f4bca7.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-792ed34e.js";const L={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},U={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6 mb-6"},E={class:"flex flex-col sm:flex-row gap-4 justify-between items-center"},F={class:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg"},O={class:"w-full sm:w-64"},z=["value"],A={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg overflow-x-auto"},I={key:0,class:"p-8 text-center text-gray-500"},J={key:1,class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},R={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"px-6 py-4 align-top"},q={class:"flex items-center"},G={class:"h-10 w-10 flex-shrink-0"},H={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold"},K={class:"ml-4"},P={class:"text-sm font-medium text-gray-900 dark:text-white"},Q={class:"px-6 py-4 align-top"},W={class:"mb-2 font-bold text-blue-600"},X={class:"space-y-2"},Y={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500"},ee={class:"text-gray-500 mt-1 flex flex-col gap-0.5"},te={class:"opacity-75"},se={class:"text-[10px] text-gray-400"},re={class:"px-6 py-4 align-top"},ae={class:"mb-2 font-bold text-rose-600"},oe={class:"space-y-2"},de=["href"],le={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-rose-200 dark:border-gray-500"},ne={class:"text-rose-800/70 mt-1 flex flex-col gap-0.5"},ie={class:"font-bold"},ce={class:"text-[10px] opacity-70"},ue={class:"px-6 py-4 align-top"},xe={class:"mb-2 font-bold text-emerald-600"},_e={class:"space-y-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar"},ge=["href"],pe={key:0,class:"text-[10px] bg-white/50 dark:bg-gray-600 px-1 rounded mr-1 border border-emerald-200 dark:border-gray-500"},me={class:"text-gray-500 mt-1 flex flex-col gap-0.5"},ye={class:"text-[10px]"},be={class:"px-6 py-4 align-top text-center"},he={class:"inline-flex items-center justify-center px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-bold text-sm"},ve={key:0},fe={__name:"TaskSummary",props:{auth:Object},setup(ke){const _=c(!0),g=c([]),v=c([]),f=c(!1),l=c({mode:"my_tasks",user_id:""}),p=async()=>{_.value=!0;try{const n={mode:l.value.mode,user_id:l.value.user_id||void 0},{data:s}=await C.get("/api/tasks/summary",{params:n});g.value=s.summary,f.value=s.is_owner,l.value.user_id||(v.value=s.users)}catch(n){console.error(n)}finally{_.value=!1}};w(()=>l.value.mode,()=>{l.value.user_id="",p()}),w(()=>l.value.user_id,()=>{p()}),S(()=>{p()});const k=n=>n?new Date(n).toLocaleDateString("ru-RU"):"‚Äî";return(n,s)=>(a(),o(i,null,[m(j(D),{title:"–°–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á"}),m(T,null,{header:y(()=>s[4]||(s[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," üìä –°–≤–æ–¥–Ω—ã–π –ø—É–ª –∑–∞–¥–∞—á ",-1)])),default:y(()=>[e("div",L,[e("div",M,[e("div",U,[e("div",E,[e("div",F,[e("button",{onClick:s[0]||(s[0]=r=>l.value.mode="my_tasks"),class:b([l.value.mode==="my_tasks"?"bg-white dark:bg-gray-600 shadow text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700","px-4 py-2 rounded-md text-sm font-medium transition"])}," –ú–æ–∏ –∑–∞–¥–∞—á–∏ ",2),e("button",{onClick:s[1]||(s[1]=r=>l.value.mode="author"),class:b([l.value.mode==="author"?"bg-white dark:bg-gray-600 shadow text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700","px-4 py-2 rounded-md text-sm font-medium transition"])}," –Ø ‚Äî –ê–≤—Ç–æ—Ä (–†–ü) ",2),f.value?(a(),o("button",{key:0,onClick:s[2]||(s[2]=r=>l.value.mode="owner"),class:b([l.value.mode==="owner"?"bg-white dark:bg-gray-600 shadow text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700","px-4 py-2 rounded-md text-sm font-medium transition"])}," –í–ª–∞–¥–µ–ª–µ—Ü (–í—Å–µ) ",2)):u("",!0)]),e("div",O,[$(e("select",{"onUpdate:modelValue":s[3]||(s[3]=r=>l.value.user_id=r),class:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[s[5]||(s[5]=e("option",{value:""},"–í—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",-1)),(a(!0),o(i,null,x(v.value,r=>(a(),o("option",{key:r.id,value:r.id},d(r.name),9,z))),128))],512),[[V,l.value.user_id]])])])]),e("div",A,[_.value?(a(),o("div",I,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")):(a(),o("table",J,[s[7]||(s[7]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/5"}," –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-blue-600 dark:text-blue-400 uppercase tracking-wider w-1/4"}," –í —Ä–∞–±–æ—Ç–µ "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-rose-600 dark:text-rose-400 uppercase tracking-wider w-1/4"}," –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-emerald-600 dark:text-emerald-400 uppercase tracking-wider w-1/4"}," –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ "),e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," –ò—Ç–æ–≥ ")])],-1)),e("tbody",R,[(a(!0),o(i,null,x(g.value,r=>(a(),o("tr",{key:r.user.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",Z,[e("div",q,[e("div",G,[e("div",H,d(r.user.name.charAt(0)),1)]),e("div",K,[e("div",P,d(r.user.name),1)])])]),e("td",Q,[e("div",W,d(r.stats.in_work_count)+" —à—Ç.",1),e("div",X,[(a(!0),o(i,null,x(r.tasks.in_work,t=>(a(),o("div",{key:(t.is_subtask?"s":"t")+t.id,class:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded border border-blue-100 dark:border-blue-800 text-xs"},[m(j(N),{href:t.task_id||t.is_subtask?`/subtasks/${t.id}`:`/tasks/${t.id}`,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30"},{default:y(()=>[t.task_id||t.is_subtask?(a(),o("span",Y," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):u("",!0),h(" "+d(t.title),1)]),_:2},1032,["href"]),e("div",ee,[e("span",null,"üìÖ –°—Ä–æ–∫: "+d(k(t.due_date)),1),e("span",te,"üë§ –†–æ–ª—å: "+d(t.roles),1),e("span",se,"üìÅ "+d(t.project_name),1)])]))),128))])]),e("td",re,[e("div",ae,d(r.stats.overdue_count)+" —à—Ç.",1),e("div",oe,[(a(!0),o(i,null,x(r.tasks.overdue,t=>(a(),o("div",{key:(t.is_subtask?"s":"t")+t.id,class:"bg-rose-50 dark:bg-rose-900/20 p-2 rounded border border-rose-100 dark:border-rose-800 text-xs"},[e("a",{href:t.link,class:"font-semibold text-rose-800 dark:text-rose-300 hover:underline block truncate"},[t.is_subtask?(a(),o("span",le," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):u("",!0),h(" "+d(t.title),1)],8,de),e("div",ne,[e("span",ie,"‚ö†Ô∏è –°—Ä–æ–∫: "+d(k(t.due_date)),1),e("span",null,"üë§ –†–æ–ª—å: "+d(t.roles),1),e("span",ce,"üìÅ "+d(t.project_name),1)])]))),128))])]),e("td",ue,[e("div",xe,d(r.stats.completed_count)+" —à—Ç.",1),e("div",_e,[(a(!0),o(i,null,x(r.tasks.completed,t=>(a(),o("div",{key:(t.is_subtask?"s":"t")+t.id,class:"bg-emerald-50 dark:bg-emerald-900/20 p-2 rounded border border-emerald-100 dark:border-emerald-800 text-xs opacity-75 hover:opacity-100 transition"},[e("a",{href:t.link,class:"font-semibold text-emerald-800 dark:text-emerald-300 hover:underline block truncate decoration-emerald-800/30"},[t.is_subtask?(a(),o("span",pe," ‚Ü≥ –ü–æ–¥–∑–∞–¥–∞—á–∞ ")):u("",!0),h(" "+d(t.title),1)],8,ge),e("div",me,[e("span",null,"üë§ –†–æ–ª—å: "+d(t.roles),1),e("span",ye,"üìÅ "+d(t.project_name),1)])]))),128))])]),e("td",be,[e("span",he,d(r.stats.total),1)])]))),128)),g.value.length===0?(a(),o("tr",ve,s[6]||(s[6]=[e("td",{colspan:"5",class:"px-6 py-10 text-center text-gray-500"}," –ó–∞–¥–∞—á –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. ",-1)]))):u("",!0)])]))])])])]),_:1})],64))}},De=B(fe,[["__scopeId","data-v-d3ed2482"]]);export{De as default};
