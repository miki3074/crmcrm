import{P as g,r as y,w as x,o as a,G as k,J as w,a as s,g as U,h as d,L as b,u as o,c as i,e as m,t as u,F as v,v as f,f as V}from"./app-f9f3ca95.js";import{_ as q}from"./AuthenticatedLayout-1eb45781.js";import"./ApplicationLogo-0b930598.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"p-6 bg-white rounded shadow"},C={class:"mb-4"},L=["value"],M={key:0},S={class:"mb-4"},D={class:"mb-4"},F={class:"mb-4"},T=["disabled"],$=["value"],A={class:"mb-4"},E=["disabled"],G=["value"],J={class:"mb-4"},N=["disabled"],P={key:1,class:"text-gray-500 mt-4"},O={__name:"Create",props:{available_companies:Array},setup(_){const l=g({company_id:"",title:"",start_time:"",responsible_id:"",agenda:"",participants:[]}),n=y([]),r=y(!1);x(()=>l.company_id,async p=>{if(l.responsible_id="",l.participants=[],n.value=[],!!p){r.value=!0;try{const t=await V.get(`/api/company/${p}/users`);n.value=t.data}catch(t){console.error("Ошибка загрузки сотрудников",t)}finally{r.value=!1}}});const c=()=>{l.post(route("meetings.store"))};return(p,t)=>(a(),k(q,null,{default:w(()=>[s("div",B,[t[16]||(t[16]=s("h1",{class:"text-2xl mb-4"},"Создать совещание",-1)),s("form",{onSubmit:U(c,["prevent"])},[s("div",C,[t[7]||(t[7]=s("label",{class:"block font-bold"},"Компания",-1)),d(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o(l).company_id=e),class:"border p-2 w-full",required:""},[t[6]||(t[6]=s("option",{value:"",disabled:""},"Выберите компанию",-1)),(a(!0),i(v,null,m(_.available_companies,e=>(a(),i("option",{key:e.id,value:e.id},u(e.name),9,L))),128))],512),[[b,o(l).company_id]])]),o(l).company_id?(a(),i("div",M,[s("div",S,[t[8]||(t[8]=s("label",{class:"block font-bold"},"Тема совещания",-1)),d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o(l).title=e),type:"text",class:"border p-2 w-full",required:""},null,512),[[f,o(l).title]])]),s("div",D,[t[9]||(t[9]=s("label",{class:"block font-bold"},"Дата и время",-1)),d(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o(l).start_time=e),type:"datetime-local",class:"border p-2 w-full",required:""},null,512),[[f,o(l).start_time]])]),s("div",F,[t[11]||(t[11]=s("label",{class:"block font-bold"},"Ответственный (Секретарь)",-1)),d(s("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o(l).responsible_id=e),class:"border p-2 w-full",required:"",disabled:r.value},[t[10]||(t[10]=s("option",{value:"",disabled:""},"Выберите ответственного",-1)),(a(!0),i(v,null,m(n.value,e=>(a(),i("option",{key:e.id,value:e.id},u(e.name)+" ("+u(e.email)+") ",9,$))),128))],8,T),[[b,o(l).responsible_id]]),t[12]||(t[12]=s("p",{class:"text-sm text-gray-500"},"Этот человек будет заполнять повестку и протокол.",-1))]),s("div",A,[t[13]||(t[13]=s("label",{class:"block font-bold"},"Участники",-1)),d(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o(l).participants=e),multiple:"",class:"border p-2 w-full h-32",disabled:r.value},[(a(!0),i(v,null,m(n.value,e=>(a(),i("option",{key:e.id,value:e.id},u(e.name),9,G))),128))],8,E),[[b,o(l).participants]]),t[14]||(t[14]=s("p",{class:"text-sm text-gray-500"},"Зажмите Ctrl (Cmd) для выбора нескольких.",-1))]),s("div",J,[t[15]||(t[15]=s("label",{class:"block font-bold"},"Повестка дня (План)",-1)),d(s("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>o(l).agenda=e),class:"border p-2 w-full h-24"},null,512),[[f,o(l).agenda]])]),s("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",disabled:o(l).processing}," Создать и отправить приглашения ",8,N)])):(a(),i("div",P," Сначала выберите компанию, чтобы увидеть список сотрудников. "))],32)])]),_:1}))}};export{O as default};
