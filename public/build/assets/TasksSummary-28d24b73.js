import{h as M,c as x,o,a as r,b as e,H as c,t as a,g as i,F as m,d as w,I as $,T,J as _,N as B}from"./app-5e745d3f.js";const z={class:"flex items-center justify-between mb-6"},S={class:"flex items-center gap-3"},N={class:"px-2.5 py-0.5 text-xs font-extrabold rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 border border-slate-200 dark:border-slate-700"},H={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},I=["onClick"],L={class:"flex justify-between items-start mb-2"},V={class:"text-[10px] font-bold uppercase tracking-wider text-slate-400 bg-slate-50 dark:bg-slate-700/50 px-2 py-0.5 rounded-md truncate max-w-[120px]"},F={key:0,class:"text-[10px] font-medium text-slate-400 whitespace-nowrap"},A={class:"font-bold text-slate-700 dark:text-slate-200 leading-snug line-clamp-2 group-hover:text-indigo-500 transition-colors mb-4"},D={class:"mt-auto"},E={class:"flex justify-between text-[10px] mb-1.5 font-bold text-slate-400"},J={class:"h-1.5 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},O={class:"text-2xl font-bold mb-1"},P={key:0,class:"py-12 flex flex-col items-center justify-center text-slate-400"},q={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},G={class:"relative w-full max-w-5xl max-h-[90vh] flex flex-col bg-white dark:bg-slate-900 rounded-3xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200"},K={class:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 z-10"},Q={class:"text-2xl font-bold text-slate-800 dark:text-white"},R={class:"overflow-y-auto p-6 bg-slate-50/50 dark:bg-slate-900/50"},U={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},W=["onClick"],X={class:"flex justify-between items-start mb-2"},Y={class:"text-[10px] font-bold uppercase text-slate-400 truncate max-w-[120px]"},Z={key:0,class:"text-[10px] text-slate-400"},ee={class:"font-bold text-slate-700 dark:text-slate-200 leading-snug mb-3 group-hover:text-indigo-600 transition"},te={class:"mt-2"},se={class:"h-1.5 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},le={class:"p-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 text-center"},g=6,re={__name:"TasksSummary",props:{tasks:Array,title:String,variant:{type:String,default:"default"}},setup(d){const b=d,n=M(!1),y=x(()=>{var l;return((l=b.tasks)==null?void 0:l.slice(0,g))||[]}),h=x(()=>{var l;return(((l=b.tasks)==null?void 0:l.length)||0)>g}),C=x(()=>{var l;return(((l=b.tasks)==null?void 0:l.length)||0)-g}),v=l=>{B.visit(`/tasks/${l}`)},f=l=>l>=100?"bg-emerald-500":l>50?"bg-indigo-500":"bg-amber-500";return(l,s)=>{var p,k;return o(),r("div",{class:c(["relative p-6 rounded-3xl border transition-all shadow-sm bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl",d.variant==="danger"?"border-rose-200 dark:border-rose-900/30":"border-slate-200 dark:border-slate-800"])},[e("div",z,[e("div",S,[e("h3",{class:c(["text-xl font-bold tracking-tight",d.variant==="danger"?"text-rose-600":"text-slate-800 dark:text-slate-100"])},a(d.title),3),e("span",N,a(((p=d.tasks)==null?void 0:p.length)||0),1)]),h.value?(o(),r("button",{key:0,onClick:s[0]||(s[0]=t=>n.value=!0),class:"text-xs font-semibold text-indigo-500 hover:text-indigo-600 dark:text-indigo-400 transition hover:underline"}," См. все ")):i("",!0)]),e("div",H,[(o(!0),r(m,null,w(y.value,t=>{var u;return o(),r("div",{key:t.id,onClick:j=>v(t.id),class:"group relative flex flex-col justify-between p-4 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700/60 rounded-2xl hover:shadow-lg hover:-translate-y-1 transition-all duration-300 cursor-pointer h-full"},[e("div",null,[e("div",L,[e("span",V,a(((u=t.project)==null?void 0:u.name)||"Без проекта"),1),t.due_date?(o(),r("span",F,a(t.due_date),1)):i("",!0)]),e("h4",A,a(t.title),1)]),e("div",D,[e("div",E,[s[5]||(s[5]=e("span",null,"Прогресс",-1)),e("span",null,a(t.progress||0)+"%",1)]),e("div",J,[e("div",{class:c(["h-full rounded-full transition-all duration-500 shadow-[0_0_10px_rgba(99,102,241,0.4)]",f(t.progress)]),style:_({width:(t.progress||0)+"%"})},null,6)])])],8,I)}),128)),h.value?(o(),r("button",{key:0,onClick:s[1]||(s[1]=t=>n.value=!0),class:"flex flex-col items-center justify-center p-4 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-700 text-slate-400 hover:border-indigo-300 hover:text-indigo-500 hover:bg-indigo-50/50 dark:hover:bg-slate-800 transition-all cursor-pointer h-full min-h-[140px]"},[e("span",O,"+"+a(C.value),1),s[6]||(s[6]=e("span",{class:"text-xs font-semibold uppercase tracking-wide"},"Показать все",-1))])):i("",!0)]),(k=d.tasks)!=null&&k.length?i("",!0):(o(),r("div",P,s[7]||(s[7]=[e("svg",{class:"w-12 h-12 mb-3 text-slate-200 dark:text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1),e("p",{class:"text-sm italic"},"Задач пока нет",-1)]))),(o(),$(T,{to:"body"},[n.value?(o(),r("div",q,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:s[2]||(s[2]=t=>n.value=!1)}),e("div",G,[e("div",K,[e("h2",Q," Все задачи: "+a(d.title),1),e("button",{onClick:s[3]||(s[3]=t=>n.value=!1),class:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition text-slate-500"},s[8]||(s[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",R,[e("div",U,[(o(!0),r(m,null,w(d.tasks,t=>{var u;return o(),r("div",{key:"modal-"+t.id,onClick:j=>v(t.id),class:"group flex flex-col justify-between p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-md transition-all cursor-pointer h-full"},[e("div",null,[e("div",X,[e("span",Y,a((u=t.project)==null?void 0:u.name),1),t.due_date?(o(),r("span",Z,a(t.due_date),1)):i("",!0)]),e("h4",ee,a(t.title),1)]),e("div",te,[e("div",se,[e("div",{class:c(["h-full rounded-full",f(t.progress)]),style:_({width:(t.progress||0)+"%"})},null,6)])])],8,W)}),128))])]),e("div",le,[e("button",{onClick:s[4]||(s[4]=t=>n.value=!1),class:"px-6 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition"}," Закрыть ")])])])):i("",!0)]))],2)}}};export{re as default};
